<!DOCTYPE html>
<html lang="en">
<head>
        <title>charlesreid1</title>
        <meta charset="utf-8" />

        <!--
        CSS styles
        -->
        <link href="/theme/css/bootstrap.css"       rel="stylesheet" type="text/css">
        <!--
        <link href="/theme/css/cyborg.css"          rel="stylesheet" type="text/css">
        <link href="/theme/css/cosmo.css"           rel="stylesheet" type="text/css">
        <link href="/theme/css/sandstone.css"       rel="stylesheet" type="text/css">
        -->
        <link href="/theme/css/slate.css"              rel="stylesheet" type="text/css">
        <link href="/theme/css/font-awesome.css"       rel="stylesheet" type="text/css"/>
        <link href="/theme/css/pygment-solarized.css"  rel="stylesheet" type="text/css"/>


        <!--
        my CSS styles
        -->
        <link href="/theme/css/main.css"            rel="stylesheet" type="text/css">
        <link href="/theme/css/dox.css"             rel="stylesheet" type="text/css">


        <!--
        include Angular first
        -->
        <script type="text/javascript" src="/theme/js/angular-1.3.15.js"></script>
        <script type="text/javascript" src="/theme/js/skrollr-0.6.29.js"></script>
        <script type="text/javascript" src="/theme/js/d3-3.5.5.js"></script>

        <!--
        this seems like a bad idea.
        but if I don't put jquery first, I get errors about unrecognized $s.
        -->
        <script type="text/javascript" src="/theme/js/jquery-1.11.2.js"></script>

</head>
<body id="index">
<nav class="navbar navbar-default">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span> 
            </button>
            <a href="/" class="navbar-brand">charlesreid1.com</a>
        </div>
        <div>
            <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav">

                    <li>
                        <a href="https://charlesreid1.com/wiki">Wiki</a>
                    </li>
                    <li>
                        <a href="https://charlesreid1.com:3000/explore">Git.charlesreid1.com</a>
                    </li>
                    <li>
                        <a href="https://github.com/charlesreid1/charlesreid1-awesome/">charlesreid1 Awesome List</a>
                    </li>
                    <li>
                        <a href="https://charlesreid1.com/notes">Notes</a>
                    </li>
                    <li>
                        <a href="https://charlesreid1.github.io">Blog</a>
                    </li>
                    <li>
                        <a href="https://charlesreid1.com/contact">Contact Me</a>
                    </li>

                </ul>
            </div>
        </div>
    </div>
</nav>



<div class="container">

<header>
<div class="row">


    <div class="col-md-12">
        <div class="headtext" style="text-align: center;">
            <h1><b>
                4x4 Rubik's Cube: Part 2: Permutations
            </b></h1>
        
            <p class="lead">
                Posted 
                <time datetime="2018-01-14T20:00:00-08:00" pubdate>Sunday 01/14/2018</time>
                in 
                <a href="/category/rubiks-cube.html">Rubiks Cube</a>
                </p>
            <p>
            <span style="font-size: 14px">
                <a href="/4x4-rubiks-cube-part-2-permutations.html">permalink</a>
            </span>
            </p>
        </div>

    </div>

</div>
</header>


<div class="v50"></div>


<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="entry-content"><p><em>This is Part 2 of a 4-part blog post 
on the mathematics of the 4x4 Rubik's Cube, 
its relation to algorithms, and some 
curious properties of Rubik's Cubes.</em></p>
<h1>Table of Contents</h1>
<ul>
<li>
<p><a href="#rubiks2-intro">Introduction: Sequences and Permutations</a></p>
</li>
<li>
<p><a href="#rubiks2-representing">Representing Permutations: Two-Row Notation</a></p>
<ul>
<li><a href="#rubiks2-representing-tworow">Two-Row Notation</a></li>
<li><a href="#rubiks2-representing-tworow-rubiks">Two-Row Notation for Rubik's Cube</a></li>
</ul>
</li>
<li>
<p><a href="#rubiks2-sequences">Sequences</a></p>
<ul>
<li><a href="#rubiks2-sequences-review">Review of Move/Sequence Notation</a></li>
<li><a href="#rubiks2-sequences-permute-cube">How Moves Permute the Cube</a></li>
</ul>
</li>
<li>
<p><a href="#rubiks2-maps">Rotation Maps</a></p>
<ul>
<li><a href="#rubiks2-maps-u">U Rotation Map</a></li>
<li><a href="#rubiks2-maps-d">D Rotation Map</a></li>
<li><a href="#rubiks2-maps-l">L Rotation Map</a></li>
<li><a href="#rubiks2-maps-r">R Rotation Map</a></li>
<li><a href="#rubiks2-maps-f">F Rotation Map</a></li>
<li><a href="#rubiks2-maps-b">B Rotation Map</a></li>
<li><a href="#rubiks2-maps-rotation">How to Use Rotation Map</a></li>
<li><a href="#rubiks2-maps-code">Face Map Code</a></li>
</ul>
</li>
<li>
<p><a href="#rubiks2-tuples">Tuples for Move Sequences</a></p>
<ul>
<li><a href="#rubiks2-tuples-sequences">Applying Rotation Maps for Sequences</a></li>
</ul>
</li>
<li>
<p><a href="#rubiks2-preview">Preview of Part 3</a></p>
</li>
<li>
<p><a href="#rubiks2-references">References</a></p>
</li>
<li>
<p><a href="#rubiks2-appendix">Appendix: Cube with Numbered Faces</a></p>
</li>
</ul>
<p><br />
<br />
<br /></p>
<p><a name="rubiks2-intro"></a></p>
<h1>Introduction</h1>
<p>In this post, we'll be connecting material from Part 1, about 
how to represent the state of the cube in a mathematical way,
to the ultimate goal of exploring properties of particular
move sequences.</p>
<p>In paticular, we'll expand on the tuple notation from Part 1,
and demonstrate the two-row permutation notation of Knuth.
This notation is useful for representing permutations 
in a way that makes it possible to create a system for 
describing permutations using algebra.</p>
<p>We will not discuss the aim of representing permutations
in this way in the present post, but this will be 
described in Part 3.</p>
<p>Next, we discuss move sequences on the Rubik's Cube - 
these are sequences of rotations of particular faces
on the Rubik's Cube. We discuss the application of the 
two-row permutation notation to describe moves
and to describe move sequences.</p>
<p>Finally, we discuss rotation maps, a useful concept
in the implementation of permutations via move sequences.</p>
<p><a name="rubiks2-representing"></a></p>
<h1>Representing Permutations: Two-Row Notation</h1>
<p>We begin by expanding on and streamlining the tuple notation
introduced in Part 1 of this post so that we have a common
basis for comparing two permutations. We do this using a two-row
notation, where the first row denotes the "solved" or default 
state of the system.</p>
<p>In the case of the Rubik's Cube, this is equivalent to 
starting a cube in the solved state, then describing where
each face ends up, in order to completely specify 
the outcome of a move or a sequence of moves.</p>
<p><a name="rubiks2-representing-tworow"></a></p>
<h2>Two-Row Notation</h2>
<p>We begin by considering a permutation of an <span class="math">\(n\)</span>-tuple,
which, in the last post, we resolved to denote </p>
<div class="math">$$
(2 3 4 \dots n 1)
$$</div>
<p>Now, let us write this as two rows: the first row
consists of each element of the tuple <em>in ascending 
order</em>, while the second line will the tuple corresponding
to the order of the elements in this particular permutation:</p>
<div class="math">$$
a = \bigl(\begin{smallmatrix}
  1 &amp; 2 &amp; 3 &amp; \cdots &amp; n-1 &amp; n \\
  2 &amp; 3 &amp; 4 &amp; \cdots &amp;  n  &amp; 1
\end{smallmatrix}\bigr)
$$</div>
<p>We can think of the first row as denoting the "solved", 
default configuration, and the second row denoting how 
each item is permuted.</p>
<p>If we had a different permutation, we would simply change
the second row:</p>
<div class="math">$$
b = \bigl(\begin{smallmatrix}
  1 &amp; 2 &amp; 3 &amp; \cdots &amp; n-1 &amp; n \\
  n &amp; 4 &amp; 1 &amp; \cdots &amp; 2   &amp; 3
\end{smallmatrix}\bigr)
$$</div>
<p><a name="rubiks2-representing-tworow-rubiks"></a></p>
<h2>Two-Row Notation for Rubik's Cube</h2>
<p>If we adopt the above two-row notation for the Rubik's Cube,
and we utilize the face numbering and tuple indexing from Part 1,
the top row consists of the integers from 1 to 96:</p>
<div class="highlight"><pre><span></span>(1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96)
</pre></div>


<p>Now suppose we perform a rotation of the upper row U on the cube.
Then we end up with the following tuple:</p>
<div class="highlight"><pre><span></span>(13 9 5 1 14 10 6 2 15 11 7 3 16 12 8 4 33 34 35 36 21 22 23 24 25 26 27 28 29 30 31 32 49 50 51 52 37 38 39 40 41 42 43 44 45 46 47 48 65 66 67 68 53 54 55 56 57 58 59 60 61 62 63 64 17 18 19 20 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96)
</pre></div>


<p>This tuple denotes the permutation corresponding to the move U 
performed on a solved cube.</p>
<p><a name="rubiks2-sequences"></a></p>
<h1>Sequences</h1>
<p><a name="rubiks2-sequences-review"></a></p>
<h2>Review of Move/Sequence Notation</h2>
<p>Let's quickly recap what we already know from prior posts about the 
properties of move sequences on the Rubik's Cube.</p>
<p>There are 36 possible moves on a cube, and a series of 
moves applied in a particular order defines a sequence.
The 36 possible rotations were given in the prior blog post
and cover clockwise and counterclockwise rotations of 
each of the six faces - either the first layer, the second layer,
or both of the first two layers.</p>
<p>These moves are denoted with six letters (<code>UDLRFB</code>) for the upper,
downward, left, right, front, and back face of the cube, respectively.</p>
<p>Moves indicated should be clockwise unless they contain an apostrophe
character <code>'</code>, which indicates counterclockwise rotation.</p>
<p>A capital letter indicates a rotation of the first layer only 
(e.g., <code>U</code> indicates a clockwise rotation of the first layer of 
the upper face).</p>
<p>A lowercase letter indicates a roration of the first and second layers
(e.g., <code>r</code> indicates a clockwise rotation of the top two layers of
the right face).</p>
<p>A 2 before the letter indicates that the second layer should be rotated
(e.g., <code>2F</code> indicates a clockwise rotation of the second layer of the 
front face).</p>
<p><a name="rubiks2-sequences-permute-cube"></a></p>
<h2>How Moves Permute the Cube</h2>
<p>This will be a little easier to understand if we consider 
a particular move sequence. We'll start simple and consider 
the move sequence <code>U</code>. This results, as we saw before, in:</p>
<div class="highlight"><pre><span></span>U:
(1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96)
(13 9 5 1 14 10 6 2 15 11 7 3 16 12 8 4 33 34 35 36 21 22 23 24 25 26 27 28 29 30 31 32 49 50 51 52 37 38 39 40 41 42 43 44 45 46 47 48 65 66 67 68 53 54 55 56 57 58 59 60 61 62 63 64 17 18 19 20 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96)
</pre></div>


<p>Now let's consider the move sequence <code>U U</code>, a double rotation of the 
cube's top layer:</p>
<div class="highlight"><pre><span></span>U U:
(1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96)
(16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 49 50 51 52 21 22 23 24 25 26 27 28 29 30 31 32 65 66 67 68 37 38 39 40 41 42 43 44 45 46 47 48 17 18 19 20 53 54 55 56 57 58 59 60 61 62 63 64 33 34 35 36 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96)
</pre></div>


<p>Third, we consider the move sequence <code>U U U</code>, equivalent to <code>U'</code>,
a counterclockwise rotation of the top layer:</p>
<div class="highlight"><pre><span></span>U U U:
(1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96)
(4 8 12 16 3 7 11 15 2 6 10 14 1 5 9 13 65 66 67 68 21 22 23 24 25 26 27 28 29 30 31 32 17 18 19 20 37 38 39 40 41 42 43 44 45 46 47 48 33 34 35 36 53 54 55 56 57 58 59 60 61 62 63 64 49 50 51 52 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96)
</pre></div>


<p>The fourth application of <code>U</code>, of course, will return the cube back to its 
solved state:</p>
<div class="highlight"><pre><span></span>U U U:
(1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96)
(1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96)
</pre></div>


<p>Now if we examine the relationship between each of these tuples, 
we see that the faces are exchanged according to specific patterns.</p>
<p>These groups of four numbered faces are exchanged with one another:</p>
<div class="highlight"><pre><span></span>( 4, 16, 13,  1)
( 8, 15,  9,  2)
(12, 14,  5,  3)
( 7, 11, 10,  6)
(65, 49, 33, 17) 
(66, 50, 34, 18)
(67, 51, 35, 19)
(68, 52, 36, 20)
</pre></div>


<p>There are 8 total faces, composing one upper quadrant of the face
being rotated.</p>
<p>The remaining 64 faces do not move:</p>
<div class="highlight"><pre><span></span>(21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96)
</pre></div>


<p><a name="rubiks2-maps"></a></p>
<h1>Rotation Maps</h1>
<p>While the 96-tuple representation is useful, a better computational
representation of the tuple is a rotation map, which consists of 
2-tuples of face index numbers that are permuted. For example,
the tuple <span class="math">\((4,16)\)</span> would indicate that the position at face 4
would become face 16 after the rotation.</p>
<p>As a reminder, here is the solved cube's face index layout:</p>
<div class="highlight"><pre><span></span>             01 02 03 04
             05 06 07 08
             09 10 11 12
             13 14 15 16

17 18 19 20  33 34 35 36  49 50 51 52  65 66 67 68
21 22 23 24  37 38 39 40  53 54 55 56  69 70 71 72
25 26 27 28  41 42 43 44  57 58 59 60  73 74 75 76
29 30 31 32  45 46 47 48  61 62 63 64  77 78 79 80

             81 82 83 84
             85 86 87 88
             89 90 91 92
             93 94 95 96
</pre></div>


<p>Thus, the rotation map representation of each move would be:</p>
<p><a name="rubiks2-maps-u"></a></p>
<h2>U Rotation Map</h2>
<p>Upon a U rotation, the face 1 will become face 13, indicated by (1,13).</p>
<div class="highlight"><pre><span></span>U:
---------------------
[(1, 13),
 (2, 9),
 (3, 5),
 (4, 1),
 (5, 14),
 (6, 10),
 (7, 6),
 (8, 2),
 (9, 15),
 (10, 11),
 (11, 7),
 (12, 3),
 (13, 16),
 (14, 12),
 (15, 8),
 (16, 4),
 (17, 33),
 (18, 34),
 (19, 35),
 (20, 36),
 (33, 49),
 (34, 50),
 (35, 51),
 (36, 52),
 (49, 65),
 (50, 66),
 (51, 67),
 (52, 68),
 (65, 17),
 (66, 18),
 (67, 19),
 (68, 20)]
</pre></div>


<p><a name="rubiks2-maps-d"></a></p>
<h2>D Rotation Map</h2>
<div class="highlight"><pre><span></span>D:
----------------------------------------
[(81, 93),
 (82, 89),
 (83, 85),
 (84, 81),
 (85, 94),
 (86, 90),
 (87, 86),
 (88, 82),
 (89, 95),
 (90, 91),
 (91, 87),
 (92, 83),
 (93, 96),
 (94, 92),
 (95, 88),
 (96, 84),
 (29, 77),
 (30, 78),
 (31, 79),
 (32, 80),
 (45, 29),
 (46, 30),
 (47, 31),
 (48, 32),
 (61, 45),
 (62, 46),
 (63, 47),
 (64, 48),
 (77, 61),
 (78, 62),
 (79, 63),
 (80, 64)]
</pre></div>


<p><a name="rubiks2-maps-l"></a></p>
<h2>L Rotation Map</h2>
<div class="highlight"><pre><span></span>L:
----------------------------------------
[(17, 29),
 (18, 25),
 (19, 21),
 (20, 17),
 (21, 30),
 (22, 26),
 (23, 22),
 (24, 18),
 (25, 31),
 (26, 27),
 (27, 23),
 (28, 19),
 (29, 32),
 (30, 28),
 (31, 24),
 (32, 20),
 (1, 80),
 (5, 76),
 (9, 72),
 (13, 68),
 (33, 1),
 (37, 5),
 (41, 9),
 (45, 13),
 (81, 33),
 (85, 37),
 (89, 41),
 (93, 45),
 (68, 93),
 (72, 89),
 (76, 85),
 (80, 81)]
</pre></div>


<p><a name="rubiks2-maps-r"></a></p>
<h2>R Rotation Map</h2>
<div class="highlight"><pre><span></span> R:
----------------------------------------
[(49, 61),
 (50, 57),
 (51, 53),
 (52, 49),
 (53, 62),
 (54, 58),
 (55, 54),
 (56, 50),
 (57, 63),
 (58, 59),
 (59, 55),
 (60, 51),
 (61, 64),
 (62, 60),
 (63, 56),
 (64, 52),
 (4, 36),
 (8, 40),
 (12, 44),
 (16, 48),
 (36, 84),
 (40, 88),
 (44, 92),
 (48, 96),
 (84, 77),
 (88, 73),
 (92, 69),
 (96, 65),
 (65, 16),
 (69, 12),
 (73, 8),
 (77, 4)]
</pre></div>


<p><a name="rubiks2-maps-f"></a></p>
<h2>F Rotation Map</h2>
<div class="highlight"><pre><span></span> F:
----------------------------------------
[(33, 45),
 (34, 41),
 (35, 37),
 (36, 33),
 (37, 46),
 (38, 42),
 (39, 38),
 (40, 34),
 (41, 47),
 (42, 43),
 (43, 39),
 (44, 35),
 (45, 48),
 (46, 44),
 (47, 40),
 (48, 36),
 (13, 32),
 (14, 28),
 (15, 24),
 (16, 20),
 (20, 81),
 (24, 82),
 (28, 83),
 (32, 84),
 (81, 61),
 (82, 57),
 (83, 53),
 (84, 49),
 (49, 13),
 (53, 14),
 (57, 15),
 (61, 16)]
</pre></div>


<p><a name="rubiks2-maps-b"></a></p>
<h2>B Rotation Map</h2>
<div class="highlight"><pre><span></span> B:
----------------------------------------
[(65, 77),
 (66, 73),
 (67, 69),
 (68, 65),
 (69, 78),
 (70, 74),
 (71, 70),
 (72, 66),
 (73, 79),
 (74, 75),
 (75, 71),
 (76, 67),
 (77, 80),
 (78, 76),
 (79, 72),
 (80, 68),
 (1, 52),
 (2, 56),
 (3, 60),
 (4, 64),
 (17, 4),
 (21, 3),
 (25, 2),
 (29, 1),
 (93, 17),
 (94, 21),
 (95, 25),
 (96, 29),
 (52, 96),
 (56, 95),
 (60, 94),
 (64, 93)]
</pre></div>


<p><a name="rubiks2-maps-rotation"></a></p>
<h2>How To Use Rotation Map</h2>
<p>The rotation map enables us to represent a 4x4 Rubik's Cube
as a simple tuple, and just use a Rubik's Cube object from the 
<a href="https://charlesreid1.com:3000/charlesreid1/rubiks-cube-nnn-solver">forked rubikscubesolver library</a>
at git.charlesreid1.com to get the rotation maps.</p>
<div class="highlight"><pre><span></span><span class="c1"># Python code:</span>
<span class="n">cube0</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">96</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
<span class="n">cube1</span> <span class="o">=</span> <span class="n">cube0</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">cube_prior</span> <span class="o">=</span> <span class="n">cube0</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">get_cube</span><span class="p">()</span>

<span class="k">for</span> <span class="n">c</span><span class="p">,</span><span class="n">move</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">rot</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)):</span>

    <span class="c1"># Get the rotation map</span>
    <span class="n">rotmap</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">rotation_map</span><span class="p">(</span><span class="n">move</span><span class="p">)</span>

    <span class="c1"># (Print the rotation map here)</span>

    <span class="c1"># Apply each transformation in the rotation map to the new cube</span>
    <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">rotmap</span><span class="p">:</span>
        <span class="c1"># shift item at index m[0] to item at index m[1]</span>
        <span class="n">cube1</span><span class="p">[</span><span class="n">cube_prior</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="n">cube_prior</span> <span class="o">=</span> <span class="n">cube1</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</pre></div>


<p><a name="rubiks2-maps-code"></a></p>
<h2>Face Map Code</h2>
<p>In this section we present a portion of the code 
that actually generates these face maps. This functionality
was not in the <a href="https://github.com/dwalton76/rubiks-cube-NxNxN-solver">original Rubik's Cube solver library</a>
from <a href="https://github.com/dwalton76/">Github user @dwalton76</a>,
so the library was forked and the functionality added
to the <a href="https://charlesreid1.com:3000/charlesreid1/rubiks-cube-nnn-solver">forked Rubik's Cube solver library</a>.</p>
<p>The actual implementation is in the <code>rotation_map(action)</code> method,
defined for the Rubik's Cube object at the same place as the 
<code>rotate(action)</code> method. This definition is in 
<code>rubikscubennnsolver/__init__.py</code> on line 581:</p>
<p><a href="https://charlesreid1.com:3000/charlesreid1/rubiks-cube-nnn-solver/src/master/rubikscubennnsolver/__init__.py#L581">link to <code>rubikscubennnsolver/__init__.py</code></a></p>
<p>This method returns a list containing the tuples of index permutations 
(old,new) that correspond to this particular move. Call it like this:</p>
<div class="highlight"><pre><span></span><span class="n">order</span> <span class="o">=</span> <span class="s1">&#39;URFDLB&#39;</span>
<span class="n">cube</span> <span class="o">=</span> <span class="n">RubiksCube444</span><span class="p">(</span><span class="n">solved_4x4x4</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span>
<span class="n">cube</span><span class="o">.</span><span class="n">rotation_map</span><span class="p">(</span><span class="s1">&#39;U&#39;</span><span class="p">)</span>
</pre></div>


<p><a name="rubiks2-tuples"></a></p>
<h1>Tuples for Move Sequences</h1>
<p>So far we have shown the tuple representation for the Rubik's Cube
and how it works, and created a more convenient representation for
implementing the cube on a computer and applying rotations.</p>
<p>Now, we can achieve the goal of this post, which is to be able to
represent the state of a cube, after a certain number of rotations,
in a quantitative and mathematical way.</p>
<p>In Part 3, we'll develop an algebra of permutations to use 
and understand the tuple representations we are presenting in 
this post.</p>
<p><a name="rubiks2-tuples-sequences"></a></p>
<h2>Applying Rotation Maps for Sequences</h2>
<p>The concept here is simple: we use the rotation maps that we defined
above to permute elements according to the formula prescribed for 
that particular rotation.</p>
<p>By applying these permutations sequentially, we can permute the 
96-tuple in a way that represents the permutations created by 
a given sequence of moves.</p>
<p>For example, after applying four sequence maps corresponding to 
the move sequence <code>U R U' R'</code> we get:</p>
<div class="highlight"><pre><span></span>(1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96)
(1 2 3 77 5 6 7 73 9 10 11 69 16 12 8 20 17 18 19 36 21 22 23 24 25 26 27 28 29 30 31 32 49 50 51 33 37 38 39 40 41 42 43 44 45 46 47 48 13 56 60 64 53 54 55 34 57 58 59 35 61 62 63 4 96 66 67 68 14 70 71 72 15 74 75 76 65 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 52)
</pre></div>


<p><a name="rubiks2-preview"></a></p>
<h1>Preview of Part 3</h1>
<p>As a preview of where we are going with Part 3, let's 
return to the permutation corresponding to <code>U R U' R'</code>:</p>
<div class="highlight"><pre><span></span>(1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96)
(1 2 3 77 5 6 7 73 9 10 11 69 16 12 8 20 17 18 19 36 21 22 23 24 25 26 27 28 29 30 31 32 49 50 51 33 37 38 39 40 41 42 43 44 45 46 47 48 13 56 60 64 53 54 55 34 57 58 59 35 61 62 63 4 96 66 67 68 14 70 71 72 15 74 75 76 65 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 52)
</pre></div>


<p>It turns out that, unlike the <code>U</code> move by itself, this move sequence 
results in groups of either three or six faces exchanging places.
(In Part 3 we will cover the algorithm for finding these groups,
which, crucially, relies on the work we did in this post.)</p>
<p>The groups of six faces that are permuted are:</p>
<div class="highlight"><pre><span></span><span class="k">[77, 65, 96, 52, 64, 4]</span>
<span class="k">[16, 20, 36, 33, 49, 13]</span>
</pre></div>


<p>These two sets of six faces all live on corners of the cube, 
so this move sequence swaps six corners.</p>
<p>Likewise, the groups of three faces that are permuted are:</p>
<div class="highlight"><pre><span></span><span class="k">[73, 15, 8]</span>
<span class="k">[69, 14, 12]</span>
<span class="k">[50, 56, 34]</span>
<span class="k">[51, 60, 35]</span>
</pre></div>


<p>These are all faces on double edge pieces: </p>
<ul>
<li><code>[73, 15, 8]</code> and <code>[51, 60, 35]</code> are faces on right-handed double edge pieces</li>
<li><code>[69, 14, 12]</code> and <code>[50, 56, 34]</code> are faces on left-handed double edge pieces</li>
</ul>
<p>The remaining faces do not permute:</p>
<div class="highlight"><pre><span></span>[1, 2, 3, 5, 6, 7, 9, 10, 11, 17, 18, 19, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 53, 54, 55, 57, 58, 59, 61, 62, 63, 66, 67, 68, 70, 71, 72, 74, 75, 76, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95]
</pre></div>


<p>What we will discover is that the least common multiple 
of these two numbers, 6 and 3, yields the number of times
this move sequence needs to be applied to a solved cube (6) 
in order to return the cube back to its solved state.</p>
<p><a name="rubiks2-references"></a></p>
<h1>References</h1>
<ol>
<li>
<p>"Rubik's Cube". Charlesreid1.com wiki, Charles Reid. Edited 11 January 2017. Accessed 11 January 2017.
&lt;<a href="https://charlesreid1.com/wiki/Rubiks_Cube">https://charlesreid1.com/wiki/Rubiks_Cube</a>&gt;</p>
</li>
<li>
<p>"Rubik's Revenge". Charlesreid1.com wiki, Charles Reid. Edited 11 January 2017. Accessed 11 January 2017.
&lt;<a href="https://charlesreid1.com/wiki/Rubiks_Revenge">https://charlesreid1.com/wiki/Rubiks_Revenge</a>&gt;</p>
</li>
<li>
<p>"Rubik's Cube/Tuple". Charlesreid1.com wiki, Charles Reid. Edited 11 January 2017. Accessed 11 January 2017.
&lt;<a href="https://charlesreid1.com/wiki/Rubiks_Cube/Tuple">https://charlesreid1.com/wiki/Rubiks_Cube/Tuple</a>&gt;</p>
</li>
<li>
<p>"Rubik's Cube/Permutations". Charlesreid1.com wiki, Charles Reid. Edited 11 January 2017. Accessed 11 January 2017.
&lt;<a href="https://charlesreid1.com/wiki/Rubiks_Cube/Permutations">https://charlesreid1.com/wiki/Rubiks_Cube/Permutations</a>&gt;</p>
</li>
<li>
<p>"Github - dwalton76/rubiks-cube-NxNxN-solver". dwalton76, Github Repository, Github Inc. Accessed 11 January 2017.
&lt;<a href="https://github.com/dwalton76/rubiks-cube-NxNxN-solver">https://github.com/dwalton76/rubiks-cube-NxNxN-solver</a>&gt;</p>
</li>
<li>
<p>"Rubik's Cube NxNxN Solver". Git repository, git.charlesreid1.com. Charles Reid. Updated 11 January 2017.
&lt;<a href="https://charlesreid1.com:3000/charlesreid1/rubiks-cube-nnn-solver">https://charlesreid1.com:3000/charlesreid1/rubiks-cube-nnn-solver</a>&gt;</p>
</li>
<li>
<p>"Rubiks Cube Cycles". Git repository, git.charlesreid1.com. Charles Reid. Updated 11 January 2017.
&lt;<a href="https://charlesreid1.com:3000/charlesreid1/rubiks-cube-cycles">https://charlesreid1.com:3000/charlesreid1/rubiks-cube-cycles</a>&gt;</p>
</li>
</ol>
<p><a name="rubiks2-appendix"></a></p>
<h1>Appendix: Cube with Numbered Faces</h1>
<div class="highlight"><pre><span></span>             01 02 03 04
             05 06 07 08
             09 10 11 12
             13 14 15 16

17 18 19 20  33 34 35 36  49 50 51 52  65 66 67 68
21 22 23 24  37 38 39 40  53 54 55 56  69 70 71 72
25 26 27 28  41 42 43 44  57 58 59 60  73 74 75 76
29 30 31 32  45 46 47 48  61 62 63 64  77 78 79 80

             81 82 83 84
             85 86 87 88
             89 90 91 92
             93 94 95 96
</pre></div>


<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    var location_protocol = (false) ? 'https' : document.location.protocol;
    if (location_protocol !== 'http' && location_protocol !== 'https') location_protocol = 'https:';
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = location_protocol + '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script></div>

    </div>
</div>

<div class="v20"></div>

<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="tags">
            <p>Tags:&nbsp;&nbsp;&nbsp;
                    <a href="/tag/rubiks-cube.html">rubiks cube</a>
                    &nbsp;&nbsp;
                    <a href="/tag/combinatorics.html">combinatorics</a>
                    &nbsp;&nbsp;
                    <a href="/tag/permutations.html">permutations</a>
                    &nbsp;&nbsp;
                    <a href="/tag/python.html">python</a>
                    &nbsp;&nbsp;
                    <a href="/tag/puzzles.html">puzzles</a>
                    &nbsp;&nbsp;
                    <a href="/tag/art-of-computer-programming.html">art of computer programming</a>
                    &nbsp;&nbsp;
                    <a href="/tag/knuth.html">knuth</a>
                    &nbsp;&nbsp;
        </div>

    </div>
</div>


<div class="v200"></div>

</div>


<script type="text/javascript" src="/theme/js/jquery-1.11.2.js"></script>
<script type="text/javascript" src="/theme/js/bootstrap-3.3.4.js"></script>
<script type="text/javascript" src="/theme/js/d3-3.5.5.js"></script>
<!--
<script type="text/javascript" src="/theme/js/leaflet-0.7.3.js"></script>
<script type="text/javascript" src="/theme/js/leaflet.ajax.min.js"></script>
--><script type="text/javascript" src="/theme/js/jquery-1.11.2.js"></script>
<script type="text/javascript" src="/theme/js/bootstrap-3.3.4.js"></script>

<footer id="contentinfo" class="body">
<p>&nbsp;</p>
<p>&nbsp;</p>
<center>
	<hr />
</center>
<p>&nbsp;</p>
<p style="text-align: center">
    <span class="fa-stack fa-lg">
        <i class="fa fa-square fa-stack-2x" style="color:#000;"></i>
        <i class="fa fa-terminal fa-stack-1x fa-inverse"></i>
    </span>
    Made from the command line with vim by 
    <a href="http://charlesreid1.com">charlesreid1</a><br />
    with help from <a href="https://getbootstrap.com/">Bootstrap</a> and <a href="http://getpelican.com">Pelican</a>.
</p>

<br />

<p style="text-align: center">
    <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">
    <span class="fa-stack fa-lg">
        <i class="fa fa-square fa-stack-2x" style="color:#000;"></i>
        <i class="fa fa-creative-commons fa-stack-1x fa-inverse"></i>
    </span>
    </a>
    <br />
    Licensed under the <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 License</a>.
</p>

</footer><!-- /#contentinfo -->
</body>
</html>