<!DOCTYPE html>
<html lang="en">
<head>
        <title>charlesreid1</title>
        <meta charset="utf-8" />

        <!--
        CSS styles
        -->
        <link href="https://charlesreid1.github.io/theme/css/bootstrap.css"       rel="stylesheet" type="text/css">
        <link href="https://charlesreid1.github.io/theme/css/slate.css"              rel="stylesheet" type="text/css">
        <link href="https://charlesreid1.github.io/theme/css/font-awesome.css"       rel="stylesheet" type="text/css"/>
        <link href="https://charlesreid1.github.io/theme/css/pygment-solarized.css"  rel="stylesheet" type="text/css"/>

        <!--
        my CSS styles
        -->
        <link href="https://charlesreid1.github.io/theme/css/main.css"            rel="stylesheet" type="text/css">
        <link href="https://charlesreid1.github.io/theme/css/dox.css"             rel="stylesheet" type="text/css">


        <!--
        include Angular first
        -->
        <script type="text/javascript" src="https://charlesreid1.github.io/theme/js/angular-1.3.15.js"></script>
        <script type="text/javascript" src="https://charlesreid1.github.io/theme/js/skrollr-0.6.29.js"></script>
        <script type="text/javascript" src="https://charlesreid1.github.io/theme/js/d3-3.5.5.js"></script>

        <!--
        this seems like a bad idea.
        but if I don't put jquery first, I get errors about unrecognized $s.
        -->
        <script type="text/javascript" src="https://charlesreid1.github.io/theme/js/jquery-1.11.2.js"></script>

</head>
<body id="index">
<nav class="navbar navbar-default">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span> 
            </button>
            <a href="https://charlesreid1.github.io" class="navbar-brand">charlesreid1.github.io</a>
        </div>
        <div>
            <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav">

                    <li>
                        <a href="https://charlesreid1.com/wiki">Wiki</a>
                    </li>
                    <li>
                        <a href="https://git.charlesreid1.com/explore">Git</a>
                    </li>
                    <li>
                        <a href="http://spotify.charlesreid1.com">Music</a>
                    </li>
                    <li>
                        <a href="https://charlesreid1.com/life">Life</a>
                    </li>
                    <li>
                        <a href="https://charlesreid1.github.io">Blog</a>
                    </li>
                    <li>
                        <a href="https://charlesreid1.com/about">About Me</a>
                    </li>

                </ul>
            </div>
        </div>
    </div>
</nav>



<div class="container">

<header>
<div class="row">


    <div class="col-md-12">
        <div class="headtext" style="text-align: center;">
            <h1><b>
                Writing a Vim Plugin with Python
            </b></h1>
        
            <p class="lead">
                Posted 
                <time datetime="2019-08-22T09:00:00-07:00" pubdate>Thursday 08/22/2019</time>
                in 
                <a href="https://charlesreid1.github.io/category/python.html">Python</a>
                </p>
            <p>
            <span style="font-size: 14px">
                <a href="https://charlesreid1.github.io/writing-a-vim-plugin-with-python.html">permalink</a>
            </span>
            </p>
        </div>

    </div>

</div>
</header>


<div class="v50"></div>


<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="entry-content"><p>This blog is a quick rundown of a recent vim plugin I wrote
using Python - covering how it works, how to write a vim plugin
that calls Python functions, and how to do more advanced things
like use visual selections. </p>
<h2>Summary</h2>
<p><a href="https://github.com/chmreid/eightball">eightball</a> is a vim plugin
that provides functionality for formatting Python code using Black
and other code formatting tools to help create consistent, clean
Python code with no extra effort from the user. (Well, okay, maybe
a few keystrokes.)</p>
<h2>Some Background</h2>
<p>eightball was borne of necessity. I write Python at work, and have for many
years. Personally, I cannot be bothered with the finer details of how code is
formatted. This attitude was one I developed after using the Go language, which
has a code format step (gofmt) built into the compilation step - gofmt conforms
to a single standard, set by Go developers (the ones who care far more about
the placement of spaces and commas and equals signs than I do), and
consequently no one who writes Go has to argue about stupid things like whether
you should write <code>if (2+2 == 4)</code> or <code>if(2+2==4)</code> or <code>if ( 2 + 2 == 4 )</code>.</p>
<p>That's why I like <a href="https://github.com/psf/black">Black</a> so much -
it defines a single universal standard for formatting Python code,
and can be used similar to gofmt, to style code universally and
consistently. But it is for Python!</p>
<h2>Where Black Fell Short</h2>
<p>If I like Black so much, what's wrong with using the batteries-included
Black vim plugin?</p>
<p>Unfortunately, the developers of Black (for obvious reasons) have opted
not to get bogged down in the complicated nuances of vim plugins, and
have provided a useful library with a simple API and a convenient way
to apply it to an <em>entire document</em>. But there is more work to be done.</p>
<p>The problem with Black is that applying it wholesale to existing code
bases under version control is a no-no, as it will create massive diffs and
cause conflicts in virtually everybody's working tree.</p>
<p>This is the need eightball serves - the ability to apply Black selectively,
or to format sections of code. This plugin and blog post demonstrate how to 
use Python modules that provide code formatting functionality to format text 
in vim by writing a Python plugin.</p>
<h2>Where To Begin</h2>
<p>The Black vim plugin itself is an excellent starting point, as it illustrates
(first) how a vim plugin can be written in Python, and (second) how a vim Python
plugin can manage its own virtual environment to ensure it has a consistent
and hassle-free Python environment. eightball also illustrates how to bind
Python functionality to keyboard shortcuts.</p>
<p>How to write a vim plugin with python
- eightball plugin
    - using black as guide
    - expanding functionality
- vim python plugin
    - vim buffer
    - vim cursor
    - obtaining visual selection contents
    - modifying buffer contents
    - calling python function with text
    - calling system function with text
    - putting it all together</p></div>

    </div>
</div>

<div class="v20"></div>

<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="tags">
            <p>Tags:&nbsp;&nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/python.html">python</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/vim.html">vim</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/plugin.html">plugin</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/black.html">black</a>
                    &nbsp;&nbsp;
        </div>

    </div>
</div>


<div class="v200"></div>

</div>


<script type="text/javascript" src="https://charlesreid1.github.io/theme/js/jquery-1.11.2.js"></script>
<script type="text/javascript" src="https://charlesreid1.github.io/theme/js/bootstrap-3.3.4.js"></script>
<script type="text/javascript" src="https://charlesreid1.github.io/theme/js/d3-3.5.5.js"></script><script type="text/javascript" src="https://charlesreid1.github.io/theme/js/jquery-1.11.2.js"></script>
<script type="text/javascript" src="https://charlesreid1.github.io/theme/js/bootstrap-3.3.4.js"></script>

<footer id="contentinfo" class="body">
<p>&nbsp;</p>
<p>&nbsp;</p>
<center>
	<hr />
</center>
<p>&nbsp;</p>
<p style="text-align: center">
    <span class="fa-stack fa-lg">
        <i class="fa fa-square fa-stack-2x" style="color:#000;"></i>
        <i class="fa fa-terminal fa-stack-1x fa-inverse"></i>
    </span>
    Made from the command line with vim by 
    <a href="http://charlesreid1.com">charlesreid1</a><br />
    with help from <a href="https://getbootstrap.com/">Bootstrap</a> and <a href="http://getpelican.com">Pelican</a>.
</p>

<br />

<p style="text-align: center">
    <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">
    <span class="fa-stack fa-lg">
        <i class="fa fa-square fa-stack-2x" style="color:#000;"></i>
        <i class="fa fa-creative-commons fa-stack-1x fa-inverse"></i>
    </span>
    </a>
    <br />
    Licensed under the <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 License</a>.
</p>

<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=11611748;
var sc_invisible=1;
var sc_security="9fcba820";
</script>
<script type="text/javascript"
src="https://www.statcounter.com/counter/counter.js"
async></script>

<noscript><div class="statcounter"><a title="Web Analytics"
href="http://statcounter.com/" target="_blank"><img
class="statcounter"
src="//c.statcounter.com/11611748/0/9fcba820/1/" alt="Web
Analytics"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->
</footer><!-- /#contentinfo -->
</body>
</html>