<!DOCTYPE html>
<html lang="en">
<head>
        <title>charlesreid1</title>
        <meta charset="utf-8" />

        <!--
        CSS styles
        -->
        <link href="https://charlesreid1.github.io/theme/css/bootstrap.css"       rel="stylesheet" type="text/css">
        <link href="https://charlesreid1.github.io/theme/css/slate.css"              rel="stylesheet" type="text/css">
        <link href="https://charlesreid1.github.io/theme/css/font-awesome.css"       rel="stylesheet" type="text/css"/>
        <link href="https://charlesreid1.github.io/theme/css/pygment-solarized.css"  rel="stylesheet" type="text/css"/>

        <!--
        my CSS styles
        -->
        <link href="https://charlesreid1.github.io/theme/css/main.css"            rel="stylesheet" type="text/css">
        <link href="https://charlesreid1.github.io/theme/css/dox.css"             rel="stylesheet" type="text/css">


        <!--
        include Angular first
        -->
        <script type="text/javascript" src="https://charlesreid1.github.io/theme/js/angular-1.3.15.js"></script>
        <script type="text/javascript" src="https://charlesreid1.github.io/theme/js/skrollr-0.6.29.js"></script>
        <script type="text/javascript" src="https://charlesreid1.github.io/theme/js/d3-3.5.5.js"></script>

        <!--
        this seems like a bad idea.
        but if I don't put jquery first, I get errors about unrecognized $s.
        -->
        <script type="text/javascript" src="https://charlesreid1.github.io/theme/js/jquery-1.11.2.js"></script>

</head>
<body id="index">
<nav class="navbar navbar-default">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span> 
            </button>
            <a href="https://charlesreid1.github.io" class="navbar-brand">charlesreid1.github.io</a>
        </div>
        <div>
            <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav">

                    <li>
                        <a href="https://charlesreid1.com/wiki">Wiki</a>
                    </li>
                    <li>
                        <a href="https://git.charlesreid1.com/explore">Git</a>
                    </li>
                    <li>
                        <a href="http://spotify.charlesreid1.com">Music</a>
                    </li>
                    <li>
                        <a href="https://charlesreid1.com/life">Life</a>
                    </li>
                    <li>
                        <a href="https://charlesreid1.github.io">Blog</a>
                    </li>
                    <li>
                        <a href="https://charlesreid1.com/about">About Me</a>
                    </li>

                </ul>
            </div>
        </div>
    </div>
</nav>



<div class="container">

    <div class="row">
        <div class="col-md-12 col-centered" style="text-align: center;">
            <div class="v50"></div>
            <div class="cosmojumbo">
                <h1 class="jumbojumbo">charlesreid1.com blog<h1>
            </div>
        </div>
    </div>


    <div class="v50"></div>


    <div class="row">

        <div class="col-md-8" style="text-align: center;">

  	            	<article>
<header>
<div class="row">


    <div class="col-md-12">
        <div class="headtext" style="text-align: center;">
            <h1><b>
                June 2021 TILs
            </b></h1>
        
            <p class="lead">
                Posted 
                <time datetime="2021-12-31T11:06:00-08:00" pubdate>Friday 12/31/2021</time>
                in 
                <a href="https://charlesreid1.github.io/category/til.html">TIL</a>
                </p>
            <p>
            <span style="font-size: 14px">
                <a href="https://charlesreid1.github.io/june-2021-tils.html">permalink</a>
            </span>
            </p>
        </div>

    </div>

</div>
</header>


<div class="v50"></div>


<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="entry-content"><p>This year, we've been keeping track of some of the surprising things that we have learned.</p>
<p>We call these "Today I Learned", or TILs. We have a private Slack channel set up to keep track
of these, and occasionally we scrape the channel and collect the new TILs into a list.</p>
<p>Once you have a list, it makes it easy to review the things you've learned, and share it with
other people!</p>
<p>For December, we're posting some of our TILs from throughout the year.
Here are the "Today I Learned", or TILs, from June 2021.</p>
<p>June 27, 2021:</p>
<ul>
<li>TIL "headship" is a word.</li>
</ul>
<p>June 29, 2021:</p>
<ul>
<li>
<p>TIL Superfund sites name a Potentially Responsible Party (PRP) who is held responsible (through legal and administrative actions) for cleaning up the site.
  (<a href="https://www.epa.gov/superfund/superfund-glossary#p">Link</a>)</p>
</li>
<li>
<p>TIL that Operation Valuable/Fiend, an early CIA operation to overthrow the leftist government of
  Albania. It was sabotaged by Kim Philby, a Cambridge-educated double agent working as a Soviet mole inside MI6
  (British Intelligence Service). (<a href="https://en.wikipedia.org/wiki/Operation_Valuable#Valuable_Project/Fiend">Link</a>)</p>
</li>
<li>
<p>TIL about the Philby Tape. In a secret videotape from 1981, discovered by the BBC in the Stasi
  (East German Secret Police) archives in 2016, Philby describes his experience being recruited as a Soviet spy,
  his role in sabotaging various operations, and why he believes that his sabotage of Operation Valuable/Fiend
  prevented World War 3. (<a href="https://www.bbc.co.uk/sounds/play/b076v1zq">Link</a>)</p>
</li>
</ul>
<p>June 30, 2021:</p>
<ul>
<li>
<p>TIL ginger, cardamom, and tumeric are all in the same plant family.
  (<a href="https://en.wikipedia.org/wiki/Ginger">Link</a>)</p>
</li>
<li>
<p>TIL the world produced 2.8 million tons of ginger in 2018. (I have no idea how to put that into
  perspective.) (<a href="https://en.wikipedia.org/wiki/Ginger">Link</a>)</p>
</li>
</ul></div>

    </div>
</div>

<div class="v20"></div>

<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="tags">
            <p>Tags:&nbsp;&nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/til.html">til</a>
                    &nbsp;&nbsp;
        </div>

    </div>
</div>


<div class="v200"></div>
  	            	</article>
  	            	<article>
<header>
<div class="row">


    <div class="col-md-12">
        <div class="headtext" style="text-align: center;">
            <h1><b>
                Applied Gitflow
            </b></h1>
        
            <p class="lead">
                Posted 
                <time datetime="2020-07-01T12:00:00-07:00" pubdate>Wednesday 07/01/2020</time>
                in 
                <a href="https://charlesreid1.github.io/category/git.html">Git</a>
                </p>
            <p>
            <span style="font-size: 14px">
                <a href="https://charlesreid1.github.io/applied-gitflow.html">permalink</a>
            </span>
            </p>
        </div>

    </div>

</div>
</header>


<div class="v50"></div>


<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="entry-content"><div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#how-we-apply-gitflow">How We Apply Gitflow</a></li>
<li><a href="#the-tools">The Tools</a></li>
<li><a href="#recap-of-gitflow">Recap of Gitflow</a></li>
<li><a href="#deploying-and-releasing">Deploying and Releasing</a></li>
<li><a href="#environment-file">Environment File</a></li>
<li><a href="#deploy-action">Deploy Action</a></li>
<li><a href="#release-action">Release Action</a></li>
<li><a href="#release-script">Release Script</a><ul>
<li><a href="#breaking-it-down">Breaking It Down</a></li>
</ul>
</li>
<li><a href="#makefile">Makefile</a></li>
<li><a href="#more-details">More Details</a></li>
</ul>
</div>
<p><strong>This is a retroactive blog post. This post was authored in February 2022,
using material authored in July 2020.</strong></p>
<p>The most up-to-date version of this content is here: <a href="https://charlesreid1.com/wiki/Applied_Gitflow">https://charlesreid1.com/wiki/Applied_Gitflow</a></p>
<h2 id="how-we-apply-gitflow">How We Apply Gitflow</h2>
<p>In some prior blog posts, we've covered a few patterns that we use for software development,
including:</p>
<ul>
<li>
<p><a href="https://charlesreid1.github.io/automatically-generating-up-to-date-requirementstxt-for-python-projects.html">Automatically generating requirements.txt files with pinned versions for Python
  projects</a>,
  which covered a Makefile rule that would programmatically generate a fresh, up-to-date requirements.txt file
  for a Python project</p>
</li>
<li>
<p><a href="https://charlesreid1.github.io/incorporating-terraform-commands-into-makefiles.html">Incorporating Terraform commands into
  Makefiles</a> to make it easy
  to use <code>make</code> and terraform to manage multiple cloud deployments</p>
</li>
<li>
<p><a href="https://charlesreid1.github.io/git-workflows-part-1-supercharging-your-git-config.html">Git workflows: supercharging your git
  config</a>, which covers
  some tricks and aliases for the git configuration file that makes some git operations a lot easier</p>
</li>
<li>
<p><a href="https://charlesreid1.github.io/git-workflows-part-3-refactoring-large-branches-and-pull-requests.html">Git workflows: refactoring large branches and pull
  requests</a>,
  which covered strategies and techniques for refactoring a large set of changes
  or pull request into smaller chunks that are simpler and easier to review,
  without having to start from scratch</p>
</li>
</ul>
<p>In this post, we'll get into some details about how we manage software in git repositories.</p>
<p>Specifically, we want to provide some details about how gitflow looks
when it's being used to manage software with different versions,
and when that software is being deployed in multiple environments.</p>
<p>The original gitflow pattern doesn't talk much about how software
deployments in multiple environments fits in with the gitflow model,
or even <em>if</em> it fits in the gitflow model.</p>
<p>With a few adjustments and patterns, gitflow can easily handle both.
In this post we'll share patterns we have found useful when using
gitflow to manage both deployments and releases.</p>
<h2 id="the-tools">The Tools</h2>
<p>The main tool for this writeup is git, used for version control of the repository. GitHub and Gitea provide an
interface to manage the git repository and to collaborate/review code. We use the gitflow model for managing
branches and code, so we'll summarize it, and provide a link with the details. </p>
<p>We are also using a cloud provider where we upload the code to the cloud, and the code is run there. 
(Think AWS lambda function.) That code is separate from the git repository, so we need a way to track
what code is in what environment. We'll cover how we do that, too. </p>
<h2 id="recap-of-gitflow">Recap of Gitflow</h2>
<p>Since this post is talking about how to apply <a href="https://nvie.com/posts/a-successful-git-branching-model/">Gitflow</a>,
let's go through a quick recap of how it works.</p>
<p>Gitflow requires that a few branches be created, but
let's assume you're working in a repo already set up with Gitflow.
In that case, regular development work looks like thi:</p>
<ul>
<li>The <code>develop</code> branch is where the newest version is being worked on</li>
<li>Specific fixes or features go into their own feature branch</li>
<li>Feature branches are reviewed/tested before being merged into <code>develop</code></li>
<li>When it is time for a new version, the accumulated features on <code>develop</code> are
  put into a new branch for the new version.</li>
<li>When the new version is ready, the <code>main</code> branch is updated to point to the new version branch.
  A new release is made from the main branch.</li>
</ul>
<p>There is also a workflow for bug fixes for versions that have already been released:</p>
<ul>
<li>A new hotfix branch is created from the version branch (which is also what the <code>main</code> branch is pointing to)</li>
<li>The changes are added to the hotfix branch</li>
<li>The hotfix branch is merged back into the version branch, the version number is bumped, and a new release is cut.</li>
<li>The hotfix branch is also merged into the <code>develop</code> branch, so that it will make it into future releases.</li>
</ul>
<h2 id="deploying-and-releasing">Deploying and Releasing</h2>
<p>As the original author himself says on the page describing Gitflow,
this model doesn't say much about how to handle deployments into
multiple cloud environments.</p>
<p>There are two main actions that an operator can take, using the system we have devised:</p>
<ul>
<li>deploy code (upload the code to a cloud stage, and have that version of the code running in the cloud)</li>
<li>release code (update which version of the code is considered the "latest version")</li>
</ul>
<p>Additionally, the actions the operator can take will require certain variables to be defined - the location of the
source code, and which cloud environment (development, integration, production) we're deploying to, for example. Those
variables are defined using environment variables, so that we can use scripts to do deploy or release actions.</p>
<h2 id="environment-file">Environment File</h2>
<p>Before covering the deploy and release scripts, here is an example environment file. The example release script
below refers to these variables. The deploy script (no example provided, since it will inevitably be case-specific)
also uses these environment variables. More environment variables can be added as needed, to grow with the
complexity of the software and deployment process.</p>
<div class="highlight"><pre><span></span><code>#!/bin/bash

export PROJECTNAME_PACKAGENAME_HOME=&quot;${HOME}/path/to/package&quot;
export PROJECTNAME_PACKAGENAME_STAGE=&quot;dev&quot;
</code></pre></div>

<h2 id="deploy-action">Deploy Action</h2>
<p>The deploy action is the action that takes the code in its current state and uploads it to the cloud. That can take
many forms depending on the cloud service being used, but for example deploying an AWS lambda function would mean
creating a new .zip file from the lambda function code, and uploading that zip file to the corresponding lambda
function using the AWS CLI.</p>
<p>The deploy action is a script that is run. It deploys the code in its current state in the repository. Environment
variables are used to parameterize the script. There are environment variables to specify the repository location
on disk, to specify the deployment stage, and any others that are needed.</p>
<p>The deploy script is also the place to assert certain conditions are true before the deploy action is taken. We
keep it simple, but these can be expanded on:</p>
<ul>
<li>Check various environment variables are set</li>
<li>Check environment variable values</li>
</ul>
<p>These can be done in the deploy script directly, if the checks are simple, or they can be moved to an entire
separate script like a hypothetical <code>check_env.sh</code>, which would be run before the deploy script (using a make rule
dependency).</p>
<p>(Note that if checks are TOO strict, they can interfere with deployment, so they should be adjusted accordingly.) </p>
<p>Another step the deployment action might have before the actual deployment is to assemble any deployment
configuration files. For example, if the deployment process requires a JSON file that is dynamically assembled from
other bits of information, that could go in its own script that would be run before the deploy script (using a make
rule dependency).</p>
<p>For this writeup, we keep things simple and do all the checks in the deploy script.</p>
<h2 id="release-action">Release Action</h2>
<p>The release action can be thought of as a git repository operation.</p>
<p><strong>When does a release happen?</strong></p>
<p>When using gitflow, features and bugfixes will accumulate in the develop branch. Eventually the time for a new
release will come (scheduled, or because enough changes have accumulated). A new branch will be created that will
"freeze" the code in whatever state the develop branch is in. (Freeze is in quotes, because there are small changes
that need to be made to that "frozen" code before a release happens, but those are changes like bumping the version
number - no core changes.)</p>
<p><strong>Where does the release script come in?</strong></p>
<p>Once the code in the release branch is ready to go, the release script is run. The script will create a git tag, reset the head of the branch corresponding to the release (the "stable release" branch, usually main) to the head of the pre-release branch - whatever branch you're on when the release script is being run. Using our convention, we name this branch release/v1 (prefixed with release/ and a v plus the major version number only). </p>
<p><strong>What does the release script do?</strong></p>
<p>The release script starts by running some checks to make sure the code is in a state that's ready to release. There
must be no uncommitted files in the repo, there must be no changes to tracked files, and there must be no unpushed
changes in the repository (local commits that haven't been pushed to the remote).</p>
<p>If those conditions are met, then the release script proceeds. The release script will start by creating a git tag,
which records the date, time, and branch being released to. Next, the head of the branch to release to (usually
main) will be reset to the head of the branch to release from (the "frozen" code that's all fixed up for the
release). Finally, the release script will push the results of the reset operation, and the new tag, to the remote.</p>
<p>To keep it more general, the release script uses the concept of a "source" and "destination" branch - the source is
the branch to release from, the destination is the branch to release to. The destination branch is the one whose
head is reset to the source branch's head. (That should help clarify the script below a bit more.) </p>
<p>Also, the Makefile (which we cover below) will take care of providing the right destination and source branch
names.</p>
<h2 id="release-script">Release Script</h2>
<p>Here is an example release script, which we would add to our repository at <code>scripts/release.sh</code>:</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="nb">set</span> -euo pipefail
<span class="nb">set</span> -x

<span class="nv">REMOTE</span><span class="o">=</span><span class="s2">&quot;origin&quot;</span>

<span class="c1"># Check that environment file has been sourced</span>
<span class="k">if</span> <span class="o">[</span> -z <span class="s2">&quot;</span><span class="si">${</span><span class="nv">PROJECTNAME_PACKAGENAME_HOME</span><span class="si">}</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> <span class="s1">&#39;You must set the $PROJECTNAME_PACKAGENAME_HOME environment variable to proceed.&#39;</span>
    <span class="nb">exit</span> <span class="m">1</span>
<span class="k">fi</span>

<span class="c1"># Check the script is being called correctly</span>
<span class="k">if</span> <span class="o">[[</span> <span class="nv">$#</span> !<span class="o">=</span> <span class="m">2</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;Given a source (pre-release) branch and a destination (release) branch,&quot;</span>
    <span class="nb">echo</span> <span class="s2">&quot;this script does the following:&quot;</span>
    <span class="nb">echo</span> <span class="s2">&quot; - create a git tag&quot;</span>
    <span class="nb">echo</span> <span class="s2">&quot; - reset head of destination branch to head of source branch&quot;</span>
    <span class="nb">echo</span> <span class="s2">&quot; - push result to git repo&quot;</span>
    <span class="nb">echo</span>
    <span class="nb">echo</span> <span class="s2">&quot;Usage: </span><span class="k">$(</span>basename <span class="nv">$0</span><span class="k">)</span><span class="s2"> source_branch dest_branch&quot;</span>
    <span class="nb">echo</span> <span class="s2">&quot;Example: </span><span class="k">$(</span>basename <span class="nv">$0</span><span class="k">)</span><span class="s2"> release/v2 main&quot;</span>
    <span class="nb">exit</span> <span class="m">1</span>
<span class="k">fi</span>

<span class="c1"># Check that all changes are committed</span>
<span class="k">if</span> ! git diff-index --quiet HEAD --<span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;You have uncommitted files in your Git repository. Please commit or stash them.&quot;</span>
    <span class="nb">exit</span> <span class="m">1</span>
<span class="k">fi</span>

<span class="nb">export</span> <span class="nv">PROMOTE_FROM_BRANCH</span><span class="o">=</span><span class="nv">$1</span> <span class="nv">PROMOTE_DEST_BRANCH</span><span class="o">=</span><span class="nv">$2</span>

<span class="c1"># Check that there are no local commits that haven&#39;t been pushed yet</span>
<span class="k">if</span> <span class="o">[[</span> <span class="s2">&quot;</span><span class="k">$(</span>git log <span class="si">${</span><span class="nv">REMOTE</span><span class="si">}</span>/<span class="si">${</span><span class="nv">PROMOTE_FROM_BRANCH</span><span class="si">}</span>..<span class="si">${</span><span class="nv">PROMOTE_FROM_BRANCH</span><span class="si">}</span><span class="k">)</span><span class="s2">&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;You have unpushed changes on your promote from branch </span><span class="si">${</span><span class="nv">PROMOTE_FROM_BRANCH</span><span class="si">}</span><span class="s2">! Aborting.&quot;</span>
    <span class="nb">exit</span> <span class="m">1</span>
<span class="k">fi</span>

<span class="nv">RELEASE_TAG</span><span class="o">=</span><span class="k">$(</span>date -u +<span class="s2">&quot;%Y-%m-%d-%H-%M-%S&quot;</span><span class="k">)</span>-<span class="si">${</span><span class="nv">PROMOTE_DEST_BRANCH</span><span class="si">}</span>.release

<span class="c1"># Check whether there are commits on the destination branch that aren&#39;t on the source branch (changes would be thrown away)</span>
<span class="k">if</span> <span class="o">[[</span> <span class="s2">&quot;</span><span class="k">$(</span>git --no-pager log --graph --abbrev-commit --pretty<span class="o">=</span>oneline --no-merges -- <span class="nv">$PROMOTE_DEST_BRANCH</span> ^<span class="nv">$PROMOTE_FROM_BRANCH</span><span class="k">)</span><span class="s2">&quot;</span> !<span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;Warning: The following commits are present on </span><span class="nv">$PROMOTE_DEST_BRANCH</span><span class="s2"> but not on </span><span class="nv">$PROMOTE_FROM_BRANCH</span><span class="s2">&quot;</span>
    git --no-pager log --graph --abbrev-commit --pretty<span class="o">=</span>oneline --no-merges <span class="nv">$PROMOTE_DEST_BRANCH</span> ^<span class="nv">$PROMOTE_FROM_BRANCH</span>
    <span class="nb">echo</span> -e <span class="s2">&quot;\nYou must transfer them, or overwrite and discard them, from branch </span><span class="nv">$PROMOTE_DEST_BRANCH</span><span class="s2">.&quot;</span>
    <span class="nb">exit</span> <span class="m">1</span>
<span class="k">fi</span>

<span class="c1"># Check that untracked files are not present</span>
<span class="k">if</span> ! git --no-pager diff --ignore-submodules<span class="o">=</span>untracked --exit-code<span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;Working tree contains changes to tracked files. Please commit or discard your changes and try again.&quot;</span>
    <span class="nb">exit</span> <span class="m">1</span>
<span class="k">fi</span>

<span class="c1"># Perform the actual release operations</span>
git fetch --all
git -c advice.detachedHead<span class="o">=</span><span class="nb">false</span> checkout <span class="si">${</span><span class="nv">REMOTE</span><span class="si">}</span>/<span class="nv">$PROMOTE_FROM_BRANCH</span>
git checkout -B <span class="nv">$PROMOTE_DEST_BRANCH</span>
git tag <span class="nv">$RELEASE_TAG</span>
git push --force <span class="nv">$REMOTE</span> <span class="nv">$PROMOTE_DEST_BRANCH</span>
git push --tags <span class="nv">$REMOTE</span>
</code></pre></div>

<h3 id="breaking-it-down">Breaking It Down</h3>
<p>Let's break down the essential commands, starting with the checks: </p>
<p><code>git diff-index --quiet HEAD --</code></p>
<ul>
<li>Checks that all changes are committed</li>
<li>git diff-index is basically the same as git diff, but restricted to the working tree or index only</li>
<li>See <a href="https://stackoverflow.com/q/24197606">https://stackoverflow.com/q/24197606</a></li>
</ul>
<p><code>git log ${REMOTE}/${PROMOTE_FROM_BRANCH}..${PROMOTE_FROM_BRANCH}</code></p>
<ul>
<li>Checks the difference between the remote and local versions of the promote from branch</li>
<li>If this command turns up any commits, those are all local, unpushed commits</li>
</ul>
<p><code>RELEASE_TAG=$(date -u +"%Y-%m-%d-%H-%M-%S")-${PROMOTE_DEST_BRANCH}.release</code></p>
<ul>
<li>Creates a name for the git tag with the date and time, and branch being released to</li>
<li>This stores the release history in git tags</li>
</ul>
<p><code>git --no-pager log --graph --abbrev-commit --pretty=oneline --no-merges -- $PROMOTE_DEST_BRANCH ^$PROMOTE_FROM_BRANCH)</code></p>
<ul>
<li>This command checks for any commits that are on the destination branch and not on the source branch</li>
<li>Because the destination branch's head will be reset, commits on the destination branch but not on the source branch would be lost</li>
<li>(This script could optionally add a --force flag, to power through the release even if this check fails)</li>
</ul>
<p><code>git --no-pager diff --ignore-submodules=untracked --exit-code</code></p>
<ul>
<li>Checks if there are any untracked changes in the working tree</li>
<li>If there are, the release can't proceed</li>
</ul>
<p>Now here's a breakdown of the release process commands:</p>
<p><code>git fetch --all</code></p>
<ul>
<li>Ensures we have an up-to-date picture of where the remotes are at</li>
</ul>
<p><code>git -c advice.detachedHead=false checkout ${REMOTE}/$PROMOTE_FROM_BRANCH</code></p>
<ul>
<li>Checks out the source branch from the remote</li>
<li>This command is the reason why we have to make sure all local commits are pushed to the remote</li>
<li>The release process uses the remote version of the source/destination branches</li>
</ul>
<p><code>git checkout -B $PROMOTE_DEST_BRANCH</code></p>
<ul>
<li>This step forces the destination branch to be the same as the source branch.</li>
</ul>
<p><code>git tag $RELEASE_TAG</code></p>
<ul>
<li>Creates a record of what was released and when via a git tag</li>
</ul>
<p><code>git push --force $REMOTE $PROMOTE_DEST_BRANCH</code></p>
<p><code>git push --tags $REMOTE</code></p>
<ul>
<li>Pushes the results of the operations to the remote</li>
</ul>
<h2 id="makefile">Makefile</h2>
<p>Now we add a Makefile with rules for releasing and deploying.</p>
<p>The first rule is the release rule - run this when the current branch is release/vX and it's ready for it's final release.</p>
<div class="highlight"><pre><span></span><code><span class="nv">CB</span> <span class="o">:=</span> <span class="k">$(</span>shell git branch --show-current<span class="k">)</span>

<span class="nf">release_mainx</span><span class="o">:</span>
    @echo <span class="s2">&quot;Releasing current branch </span><span class="k">$(</span>CB<span class="k">)</span><span class="s2"> to mainx&quot;</span>
    scripts/release.sh <span class="k">$(</span>CB<span class="k">)</span> mainx
</code></pre></div>

<p>The <code>$(CB)</code> is short for current branch.</p>
<p>Now on to the deploy rule.</p>
<p>Because we might want to deploy the code in an arbitrary state (temporarily deploying a feature branch to the development stage, for example), the deploy script and deploy rule are intended to deploy the code in its current state, and don't have the same kinds of checks as the release script. </p>
<div class="highlight"><pre><span></span><code><span class="nf">deploy</span><span class="o">:</span>
    scripts/deploy.sh
</code></pre></div>

<p>As mentioned above, the deploy script will be case-specific so we don't provide an example.</p>
<p>How does the deploy script know which environment to deploy to? It depends on the environment file that was
sourced, and the value of the <code>PROJECTNAME_PACKAGENAME_STAGE</code> variable. The deploy script should be checking that
that environment variable is set to a valid value before proceeding with the deploy.</p>
<h2 id="more-details">More Details</h2>
<p>For more details, see the full writeup on our wiki here:
<a href="https://charlesreid1.com/wiki/Applied_Gitflow">https://charlesreid1.com/wiki/Applied_Gitflow</a></p></div>

    </div>
</div>

<div class="v20"></div>

<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="tags">
            <p>Tags:&nbsp;&nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/git.html">git</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/github.html">github</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/programming.html">programming</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/gitflow.html">gitflow</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/hubflow.html">hubflow</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/patterns.html">patterns</a>
                    &nbsp;&nbsp;
        </div>

    </div>
</div>


<div class="v200"></div>
  	            	</article>
  	            	<article>
<header>
<div class="row">


    <div class="col-md-12">
        <div class="headtext" style="text-align: center;">
            <h1><b>
                A Singleton Configuration Class in Python
            </b></h1>
        
            <p class="lead">
                Posted 
                <time datetime="2020-04-28T16:00:00-07:00" pubdate>Tuesday 04/28/2020</time>
                in 
                <a href="https://charlesreid1.github.io/category/python.html">Python</a>
                </p>
            <p>
            <span style="font-size: 14px">
                <a href="https://charlesreid1.github.io/a-singleton-configuration-class-in-python.html">permalink</a>
            </span>
            </p>
        </div>

    </div>

</div>
</header>


<div class="v50"></div>


<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="entry-content"><div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#the-singleton-pattern">The Singleton Pattern</a></li>
<li><a href="#get-variable-functions">Get Variable Functions</a></li>
<li><a href="#config-functions">Config Functions</a></li>
<li><a href="#reset-method">Reset method</a></li>
<li><a href="#creating-a-configuration-context-manager">Creating a configuration context manager</a></li>
<li><a href="#next-steps">Next steps</a></li>
</ul>
</div>
<h1 id="overview">Overview</h1>
<p>In this post we cover a strategy for managing configurations for programs using
a Singleton pattern to create a static <code>Config</code> class.</p>
<p>This allows the user to create an instance of the <code>Config</code> class, pointing it
to a specific config file, which it loads into memory.</p>
<p>The <code>Config</code> class provides several static methods for accessing configuration
options from the config file. Here's an example of its usage:</p>
<div class="highlight"><pre><span></span><code>Config(&#39;/path/to/config.json&#39;)

if Config.get_foo() == &quot;bar&quot;:
    do_stuff()
</code></pre></div>

<p>The principle is to <strong>define one configuration file location, and be done with it.</strong>
The configuration file is JSON formatted, but the pattern can be adapted to use
any format.</p>
<p>The <code>Config</code> class can also be used to wrap and process both variables in the configuration
file <em>and</em> environment variables.</p>
<p>The <code>Config</code> class implements a <strong>separation of concerns</strong> by only processing top-level
configuration variable options, and leaving more detailed configuration file parsing
to the classes that need it. This allows for more flexible config files.</p>
<h1 id="the-singleton-pattern">The Singleton Pattern</h1>
<p>The Singleton pattern involves the use of instance variables, which the variables
<code>_CONFIG_FILE</code> and <code>_CONFIG</code> are. These are shared across all instances of class
<code>Config</code> and can be accessed via <code>Config._CONFIG_FILE</code>, etc.</p>
<p>The location of the config file can be set in the constructor,
or can be provided via the <code>CONFIG_FILE</code> environment variable.
The config class also provides a method for accessing environment
variables that are required by the Config class, and raising a
custom exception if it is not present.</p>
<p>The constructor starts by checking that the configuration file exists, then loads
the configuration file into memory (at <code>Config._CONFIG</code> as a dictionary):</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Config</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="c1">#########################</span>
    <span class="c1"># Begin Singleton Section</span>
    <span class="c1">#########################</span>

    <span class="n">_CONFIG_FILE</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_CONFIG</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config_file</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">config_file</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">config_file</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">get_required_env_var</span><span class="p">(</span><span class="s2">&quot;CONFIG_FILE&quot;</span><span class="p">)</span>

        <span class="c1"># Check that specified config file exists</span>
        <span class="k">assert</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>

        <span class="c1"># Use singleton pattern to store config file location/load config once</span>
        <span class="n">Config</span><span class="o">.</span><span class="n">_CONFIG_FILE</span> <span class="o">=</span> <span class="n">config_file</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">config_file</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">_CONFIG</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_config_file</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Config</span><span class="o">.</span><span class="n">_CONFIG_FILE</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_required_env_var</span><span class="p">(</span><span class="n">envvar</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">envvar</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ConfigException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Please set the </span><span class="si">{</span><span class="n">envvar</span><span class="si">}</span><span class="s2"> environment variable&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">envvar</span><span class="p">]</span>
</code></pre></div>

<p>Aside from the constructor, every method in the <code>Config</code> class is a
<code>@staticmethod</code> or a <code>@classmethod</code>.</p>
<h1 id="get-variable-functions">Get Variable Functions</h1>
<p>We add two additional methods to get configuration variables: one to get variables
from the config file, one to get environment variables. Here they are:</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Config</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="o">...</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_required_env_var</span><span class="p">(</span><span class="n">envvar</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">envvar</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Please set the </span><span class="si">{envvar}</span><span class="s2"> environment variable&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">envvar</span><span class="p">]</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_required_config_var</span><span class="p">(</span><span class="n">configvar</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">Config</span><span class="o">.</span><span class="n">_CONFIG</span>
        <span class="k">if</span> <span class="n">configvar</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">Config</span><span class="o">.</span><span class="n">_CONFIG</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Please set the </span><span class="si">{</span><span class="n">configvar</span><span class="si">}</span><span class="s2"> variable in the config file </span><span class="si">{</span><span class="n">Config</span><span class="o">.</span><span class="n">_CONFIG_FILE</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Config</span><span class="o">.</span><span class="n">_CONFIG</span><span class="p">[</span><span class="n">configvar</span><span class="p">]</span>
</code></pre></div>

<p>We saw the get_required_env_var()<code>function in action in the constructor.
The</code>get_required_config_var()` can be useful for config variables that
are dependent on other config variables.</p>
<h1 id="config-functions">Config Functions</h1>
<p>Continuing with the <code>Config</code> class defined above,
we now define methods that implement logic for specific 
configuration variables.</p>
<p>Here are two example config variables.</p>
<p>The variable <code>foo</code> is set using the configuration file.
The configuration file is a dictionary, meaning it consists
of key-value pairs, so the variable <code>foo</code> is set by the value
corresponding to the <code>foo</code> key in the config file.</p>
<p>For example, using the following simple configuration file:</p>
<div class="highlight"><pre><span></span><code>{
    &quot;foo&quot;: &quot;hello world&quot;
}
</code></pre></div>

<p>if the <code>Config</code> class is initialized with that configuration file,
<code>Config.get_foo_var()</code>  will return the string <code>hello world</code>.</p>
<p>Similarly, the <code>bar</code>variable is set using the environment variable <code>BAR</code>.
If the <code>BAR</code> variable is not set, the program will raise an exception
when <code>Config.get_bar_var()</code> is called.</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Config</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="o">...</span><span class="n">see</span> <span class="n">singleton</span> <span class="n">section</span> <span class="n">above</span><span class="o">...</span>

    <span class="c1">#############################</span>
    <span class="c1"># Begin Configuration Section</span>
    <span class="c1">#############################</span>

    <span class="n">_FOO</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_BAR</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_foo_var</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Example variable that is set in the config file (preferred)&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_FOO</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_FOO</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">get_required_config_var</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_FOO</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_bar_var</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Example variable that is set via env var (not preferred)&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_BAR</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_BAR</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">get_required_env_var</span><span class="p">(</span><span class="s1">&#39;BAR&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_BAR</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_wuz</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_WUZ</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;wuz&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_CONFIG</span><span class="p">:</span>
                <span class="bp">cls</span><span class="o">.</span><span class="n">_WUZ</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">get_required_env_var</span><span class="p">(</span><span class="s1">&#39;WUZ&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">cls</span><span class="o">.</span><span class="n">_WUZ</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_CONFIG</span><span class="p">[</span><span class="s1">&#39;wuz&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_WUZ</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: Path </span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="n">_WUZ</span><span class="si">}</span><span class="s2"> is not a directory&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_WUZ</span>
</code></pre></div>

<p>The <code>wuz</code> variable, in this example, is a variable that can be set with a config
file variable, or (if it is not present in the config file) with an environment
variable. The <code>wuz</code> variable msut also be a path, so there is logic for checking
whether the path exists.</p>
<h1 id="reset-method">Reset method</h1>
<p>It can be useful to clear out an existing config file in order to
load a new config file - specifically, when testing. Here we define a <code>reset()</code>
method that clears out variable values. We will show an example of how to
use the <code>reset()</code> method below.</p>
<div class="highlight"><pre><span></span><code>    @classmethod
    def reset(cls) -&gt; None:
        cls._CONFIG_FILE = None
        cls._CONFIG = None
        cls._FOO = None
        cls._BAR = None
        cls._WUZ = None
</code></pre></div>

<p>This could be done more gracefully by iterating over each attribute of the Config class
and only nullifying those attributes whose variable name matches the given pattern (start
with an underscore, only contain capital letters and underscores) using a regular expression.</p>
<h1 id="creating-a-configuration-context-manager">Creating a configuration context manager</h1>
<p>To make tests more convenient, we define a context manager that takes
a dictionary as an input. The context manager creates a temporary file
with the contents of that dictionary, and resets the Config class using
the temporary file as the new config file. This allows tests to be written
using different configurations on the fly, very useful when testing
different configuration options:</p>
<div class="highlight"><pre><span></span><code><span class="n">cfg</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;peanut_butter&quot;</span><span class="p">:</span> <span class="s2">&quot;jelly&quot;</span><span class="p">}</span>
<span class="k">with</span> <span class="n">TempConfig</span><span class="p">(</span><span class="n">cfg</span><span class="p">)</span> <span class="k">as</span> <span class="n">config_file</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Temporary configuration file is at </span><span class="si">{</span><span class="n">config_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">val</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">get_required_config_var</span><span class="p">(</span><span class="s2">&quot;peanut_butter&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">val</span><span class="o">==</span><span class="s2">&quot;jelly&quot;</span>
</code></pre></div>

<p>Here is the context manager class to temporarily replace the configuration
wrapped by the <code>Config</code> class:</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">TempConfig</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Temporarily patch the Config class to use the config</span>
<span class="sd">    dictionary specified in the constructor.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config_dict</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This is the step that&#39;s run when object constructed&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="c1"># This is the temp configuration the user specified</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config_dict</span> <span class="o">=</span> <span class="n">config_dict</span>
        <span class="c1"># Make a temp dir for our temp config file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">temp_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkdtemp</span><span class="p">()</span>
        <span class="c1"># Make a temp config file</span>
        <span class="n">_</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">temp_json</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkstemp</span><span class="p">(</span><span class="n">suffix</span><span class="o">=</span><span class="s2">&quot;.json&quot;</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">temp_dir</span><span class="p">)</span>
        <span class="c1"># Set the wuz variable to the temporary directory</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config_dict</span><span class="p">[</span><span class="s1">&#39;wuz&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">temp_dir</span>

    <span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This is what&#39;s returned to the &quot;as X&quot; portion of the context manager&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_write_config</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">temp_json</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dict</span><span class="p">))</span>
        <span class="c1"># Re-init Config with new config file</span>
        <span class="n">Config</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">temp_json</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">temp_json</span>

    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Close the context and clean up; the *args are needed in case there is</span>
<span class="sd">        an exception (we don&#39;t deal with those here)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Delete temp file</span>
        <span class="n">os</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">temp_json</span><span class="p">)</span>
        <span class="c1"># Delete temp dir</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">temp_dir</span><span class="p">)</span>
        <span class="c1"># Reset all config variables</span>
        <span class="n">Config</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_write_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">contents</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Utility method: write string contents to config file&quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
</code></pre></div>

<h1 id="next-steps">Next steps</h1>
<p>That's it for now. This singleton configuration class is being written into a
new version of <a href="https://charlesreid1.github.io/centillion-a-document-search-engine.html">centillion</a>,
which will be <a href="https://github.com/chmreid/centillion/pull/3">centillion version 2.0</a>.
This is still a pull request in a centillion fork, though, so it's a work in progress.
Stay tuned!</p></div>

    </div>
</div>

<div class="v20"></div>

<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="tags">
            <p>Tags:&nbsp;&nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/python.html">python</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/programming.html">programming</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/patterns.html">patterns</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/design-patterns.html">design patterns</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/registry.html">registry</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/computer-science.html">computer science</a>
                    &nbsp;&nbsp;
        </div>

    </div>
</div>


<div class="v200"></div>
  	            	</article>

<div class="row">
    <div class="col-md-4 col-centered" style="text-align: center;">

        <div class="pagination">

            <a class="next" href="https://charlesreid1.github.io/index3.html">&larr; Newer</a>

            &nbsp;
            &nbsp;
            &nbsp;
            &nbsp;
            &nbsp;

            <a class="prev" href="https://charlesreid1.github.io/index5.html">Older &rarr;</a>
        
          <br />
        </div>

    </div>
</div>

<div class="v50"></div>


        </div>

        <div class="col-md-4" style="text-align: center;">
<a name="a_archive"></a>


        <div class="well">

            <h2>March 2022</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/copying-letsencrypt-certs-between-machines.html">Copying LetsEncrypt Certs Between Machines</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/how-to-read-ulysses.html">How to Read Ulysses</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>February 2022</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/mediawiki-patterns-for-a-zettelkasten-todo-lists.html">MediaWiki Patterns for a Zettelkasten: Todo Lists</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/mediawiki-patterns-for-a-zettelkasten-organizing-pages.html">MediaWiki Patterns for a Zettelkasten: Organizing Pages</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>January 2022</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/mediawiki-patterns-for-a-zettelkasten-monthly-template-pattern.html">MediaWiki Patterns for a Zettelkasten: Monthly Template Pattern</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/mediawiki-patterns-for-a-zettelkasten-daily-page-pattern.html">MediaWiki Patterns for a Zettelkasten: Daily Page Pattern</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/using-mediawiki-as-a-zettelkasten-or-external-brain.html">Using MediaWiki as a Zettelkasten or External Brain</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>December 2021</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/august-2021-tils.html">August 2021 TILs</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/july-2021-tils.html">July 2021 TILs</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/june-2021-tils.html">June 2021 TILs</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>July 2020</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/applied-gitflow.html">Applied Gitflow</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>April 2020</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/a-singleton-configuration-class-in-python.html">A Singleton Configuration Class in Python</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>March 2020</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/using-mock-api-servers.html">Using Mock API Servers</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>February 2020</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/creating-mock-api-servers.html">Creating Mock API Servers</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/python-from-args-to-kwargs.html">Python: From Args to Kwargs</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/confuse-a-constructor-when-class-as-constructor-returns-objects-of-type-b.html">Confuse-A-Constructor: When Class A's Constructor Returns Objects of Type B</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/python-patterns-the-registry.html">Python Patterns: The Registry</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/incorporating-terraform-commands-into-makefiles.html">Incorporating Terraform Commands into Makefiles</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>December 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/automatically-generating-up-to-date-requirementstxt-for-python-projects.html">Automatically Generating Up-To-Date requirements.txt for Python Projects</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/git-workflows-part-3-refactoring-large-branches-and-pull-requests.html">Git Workflows, Part 3: Refactoring Large Branches and Pull Requests</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>November 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/git-workflows-part-2-crafting-commits.html">Git Workflows, Part 2: Crafting Commits</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>October 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/git-workflows-part-1-supercharging-your-git-config.html">Git Workflows, Part 1: Supercharging your Git Config</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>September 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/mocking-aws-in-unit-tests.html">Mocking AWS in Unit Tests</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>May 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/deconvoluting-convolutional-neural-networks.html">Deconvoluting Convolutional Neural Networks</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/graphs-for-bioinformatics-part-2-finding-eulerian-paths.html">Graphs for Bioinformatics, Part 2: Finding Eulerian Paths</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/graphs-for-bioinformatics-part-1-de-bruijn-graphs-hamiltonian-paths-and-eulerian-paths.html">Graphs for Bioinformatics, Part 1: de Bruijn Graphs, Hamiltonian Paths, and Eulerian Paths</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>April 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/the-git-commit-ectomy.html">The Git-Commit-Ectomy</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>March 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/the-josephus-problem-part-3-solving-the-double-step-case.html">The Josephus Problem: Part 3: Solving the Double Step Case</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/the-josephus-problem-part-2-two-examples.html">The Josephus Problem: Part 2: Two Examples</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/the-josephus-problem-part-1-the-problem.html">The Josephus Problem: Part 1: The Problem</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/approximating-pi-happy-pi-day.html">Approximating Pi (Happy Pi Day)</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/five-letter-words-part-5-the-try-trie-tree.html">Five Letter Words: Part 5: The Try Trie Tree</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/five-letter-words-part-4-revisiting-diff-by-one.html">Five Letter Words: Part 4: Revisiting Diff by One</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/centillion-a-document-search-engine.html">centillion: a document search engine</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>February 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/any-color-you-like-as-long-as-its-00add8.html">Any Color You Like, As Long As It's 00ADD8</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/a-few-of-my-favorite-peps.html">A Few of My Favorite PEPs</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/context-managers-in-python.html">Context Managers in Python</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>January 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/building-snakemake-command-line-wrappers-for-kubernetes-workflows.html">Building Snakemake Command Line Wrappers for Kubernetes Workflows</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/building-snakemake-command-line-wrappers-for-workflows.html">Building Snakemake Command Line Wrappers for Workflows</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/recursive-backtracking-in-go-for-bioinformatics-applications-3-go-implementation-of-backtracking.html">Recursive Backtracking in Go for Bioinformatics Applications: 3. Go Implementation of Backtracking</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>December 2018</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/recursive-backtracking-in-go-for-bioinformatics-applications-2-generating-variations.html">Recursive Backtracking in Go for Bioinformatics Applications: 2. Generating Variations</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/recursive-backtracking-in-go-for-bioinformatics-applications-1-counting-variations.html">Recursive Backtracking in Go for Bioinformatics Applications: 1. Counting Variations</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/basic-data-structures-in-go-maps.html">Basic Data Structures in Go: Maps</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/learning-bioinformatics-with-go-and-rosalind.html">Learning Bioinformatics with Go and Rosalind</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>October 2018</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/first-post-of-the-fall-part-2-flaskadillo.html">First Post of the Fall, Part 2: Flaskadillo</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/first-post-of-the-fall-part-1-data-commons.html">First Post of the Fall, Part 1: Data Commons</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>May 2018</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/current-projects.html">Current Projects</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>March 2018</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/charlesreid1com-stack.html">Charlesreid1.com Stack</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>February 2018</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/d3-calendar-visualizations.html">D3 Calendar Visualizations</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/project-euler-problem-172.html">Project Euler Problem 172</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>January 2018</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/4x4-rubiks-cube-part-4-sequence-order.html">4x4 Rubik's Cube: Part 4: Sequence Order</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/4x4-rubiks-cube-part-3-factoring-permutations.html">4x4 Rubik's Cube: Part 3: Factoring Permutations</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/4x4-rubiks-cube-part-2-permutations.html">4x4 Rubik's Cube: Part 2: Permutations</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/4x4-rubiks-cube-part-1-representations.html">4x4 Rubik's Cube: Part 1: Representations</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/lets-generate-permutations.html">Let's Generate Permutations!</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>September 2017</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/five-letter-words-part-3-letter-coverage-and-dynamic-programming.html">Five Letter Words: Part 3: Letter Coverage and Dynamic Programming</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/five-letter-words-part-2-more-five-word-algorithms.html">Five Letter Words: Part 2: More Five-Word Algorithms</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/five-letter-words-part-1-getting-familiar-with-the-list.html">Five Letter Words: Part 1: Getting Familiar With The List</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>August 2017</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/eulers-theorem-the-totient-function-and-calculating-totients-by-hand.html">Euler's Theorem, the Totient Function, and Calculating Totients By Hand</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>July 2017</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/mad-combinatoric-castles.html">Mad Combinatoric Castles</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/project-euler-problem-1.html">Project Euler Problem 1</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/shortest-lattice-paths-and-multiset-permutations.html">Shortest Lattice Paths and Multiset Permutations</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/computing-square-roots-part-2-using-continued-fractions.html">Computing Square Roots: Part 2: Using Continued Fractions</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/computing-square-roots-part-1-using-newtons-method.html">Computing Square Roots: Part 1: Using Newton's Method</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>June 2017</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/cse-143-final-project-hilbert-sort-3-the-code.html">CSE 143 Final Project: Hilbert Sort: 3. The Code</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/cse-143-final-project-hilbert-sort-2-the-solution-algorithm.html">CSE 143 Final Project: Hilbert Sort: 2. The Solution Algorithm</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/cse-143-final-project-hilbert-sort-1-the-problem.html">CSE 143 Final Project: Hilbert Sort: 1. The Problem</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/cse-143-final-project-classy.html">CSE 143 Final Project: Classy</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/cse-143-final-project-checkers.html">CSE 143 Final Project: Checkers</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>May 2017</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/teaching-recursion-with-the-n-queens-problem.html">Teaching Recursion with the N Queens Problem</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/undergraduate-research-project-wireless-sensor-networks-for-internet-of-things-applications-part-2-the-technologies.html">Undergraduate Research Project: Wireless Sensor Networks for Internet of Things Applications (Part 2: The Technologies)</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/undergraduate-research-project-wireless-sensor-networks-for-internet-of-things-applications-part-1-the-project.html">Undergraduate Research Project: Wireless Sensor Networks for Internet of Things Applications (Part 1: The Project)</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>April 2017</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/stunnel.html">Stunnel</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/traveling-schoolteacher-problem.html">Traveling Schoolteacher Problem</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/the-z-machine-a-simple-turing-machine.html">The Z-Machine: A Simple Turing Machine</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/awsome-day-seattle-notes-part-2-networking-security-and-miscellany.html">AWSome Day Seattle Notes: Part 2: Networking, Security, and Miscellany</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/awsome-day-seattle-notes-part-1-the-basics.html">AWSome Day Seattle Notes: Part 1: The Basics</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/setting-up-a-self-hosted-github-clone-with-gitea.html">Setting Up a Self-Hosted Github Clone with Gitea</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/better-timing-of-guava-traveling-salesperson-problem-code-timing-scripts.html">Better Timing of Guava Traveling Salesperson Problem Code: Timing Scripts</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>March 2017</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/fixing-bottlenecks-in-the-guava-traveling-salesperson-problem-code.html">Fixing Bottlenecks in the Guava Traveling Salesperson Problem Code</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/python-vs-perl-n-queens-problem.html">Python vs. Perl: N Queens Problem</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/solving-the-traveling-salesperson-problem-with-java-and-guava.html">Solving the Traveling Salesperson Problem with Java and Guava</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/perl-vs-java-n-queens-problem.html">Perl vs. Java: N Queens Problem</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/enigma-cipher-implementation-part-4-combinatorics.html">Enigma Cipher Implementation: Part 4: Combinatorics</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/enigma-cipher-implementation-part-3-enigma-in-java-without-objects.html">Enigma Cipher Implementation: Part 3: Enigma in Java Without Objects</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/enigma-cipher-implementation-part-2-pseudocode.html">Enigma Cipher Implementation: Part 2: Pseudocode</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/enigma-cipher-implementation-part-1-how-it-works.html">Enigma Cipher Implementation: Part 1: How It Works</a>
            </p>

        </div>

        <div class="v20"></div>



<div class="v100"></div>
        </div>

    </div>



</div>



<script type="text/javascript" src="https://charlesreid1.github.io/theme/js/jquery-1.11.2.js"></script>
<script type="text/javascript" src="https://charlesreid1.github.io/theme/js/bootstrap-3.3.4.js"></script>
<script type="text/javascript" src="https://charlesreid1.github.io/theme/js/d3-3.5.5.js"></script><script type="text/javascript" src="https://charlesreid1.github.io/theme/js/jquery-1.11.2.js"></script>
<script type="text/javascript" src="https://charlesreid1.github.io/theme/js/bootstrap-3.3.4.js"></script>

<footer id="contentinfo" class="body">
<p>&nbsp;</p>
<p>&nbsp;</p>
<center>
	<hr />
</center>
<p>&nbsp;</p>
<p style="text-align: center">
    <span class="fa-stack fa-lg">
        <i class="fa fa-square fa-stack-2x" style="color:#000;"></i>
        <i class="fa fa-terminal fa-stack-1x fa-inverse"></i>
    </span>
    Made from the command line with vim by 
    <a href="http://charlesreid1.com">charlesreid1</a><br />
    with help from <a href="https://getbootstrap.com/">Bootstrap</a> and <a href="http://getpelican.com">Pelican</a>.
</p>

<br />

<p style="text-align: center">
    <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">
    <span class="fa-stack fa-lg">
        <i class="fa fa-square fa-stack-2x" style="color:#000;"></i>
        <i class="fa fa-creative-commons fa-stack-1x fa-inverse"></i>
    </span>
    </a>
    <br />
    Licensed under the <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 License</a>.
</p>

<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=11611748;
var sc_invisible=1;
var sc_security="9fcba820";
</script>
<script type="text/javascript"
src="https://www.statcounter.com/counter/counter.js"
async></script>

<noscript><div class="statcounter"><a title="Web Analytics"
href="http://statcounter.com/" target="_blank"><img
class="statcounter"
src="//c.statcounter.com/11611748/0/9fcba820/1/" alt="Web
Analytics"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->
</footer><!-- /#contentinfo -->
</body>
</html>