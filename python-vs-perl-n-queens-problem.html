<!DOCTYPE html>
<html lang="en">
<head>
        <title>charlesreid1</title>
        <meta charset="utf-8" />

        <!--
        CSS styles
        -->
        <link href="https://charlesreid1.github.io/theme/css/bootstrap.css"       rel="stylesheet" type="text/css">
        <link href="https://charlesreid1.github.io/theme/css/slate.css"              rel="stylesheet" type="text/css">
        <link href="https://charlesreid1.github.io/theme/css/font-awesome.css"       rel="stylesheet" type="text/css"/>
        <link href="https://charlesreid1.github.io/theme/css/pygment-solarized.css"  rel="stylesheet" type="text/css"/>

        <!--
        my CSS styles
        -->
        <link href="https://charlesreid1.github.io/theme/css/main.css"            rel="stylesheet" type="text/css">
        <link href="https://charlesreid1.github.io/theme/css/dox.css"             rel="stylesheet" type="text/css">


        <!--
        include Angular first
        -->
        <script type="text/javascript" src="https://charlesreid1.github.io/theme/js/angular-1.3.15.js"></script>
        <script type="text/javascript" src="https://charlesreid1.github.io/theme/js/skrollr-0.6.29.js"></script>
        <script type="text/javascript" src="https://charlesreid1.github.io/theme/js/d3-3.5.5.js"></script>

        <!--
        this seems like a bad idea.
        but if I don't put jquery first, I get errors about unrecognized $s.
        -->
        <script type="text/javascript" src="https://charlesreid1.github.io/theme/js/jquery-1.11.2.js"></script>

</head>
<body id="index">
<nav class="navbar navbar-default">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span> 
            </button>
            <a href="https://charlesreid1.github.io" class="navbar-brand">charlesreid1.github.io</a>
        </div>
        <div>
            <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav">

                    <li>
                        <a href="https://charlesreid1.com/wiki">Wiki</a>
                    </li>
                    <li>
                        <a href="https://git.charlesreid1.com/explore">Git</a>
                    </li>
                    <li>
                        <a href="http://spotify.charlesreid1.com">Music</a>
                    </li>
                    <li>
                        <a href="https://charlesreid1.com/life">Life</a>
                    </li>
                    <li>
                        <a href="https://charlesreid1.github.io">Blog</a>
                    </li>
                    <li>
                        <a href="https://charlesreid1.com/about">About Me</a>
                    </li>

                </ul>
            </div>
        </div>
    </div>
</nav>



<div class="container">

<header>
<div class="row">


    <div class="col-md-12">
        <div class="headtext" style="text-align: center;">
            <h1><b>
                Python vs. Perl: N Queens Problem
            </b></h1>
        
            <p class="lead">
                Posted 
                <time datetime="2017-03-25T20:00:00-07:00" pubdate>Saturday 03/25/2017</time>
                in 
                <a href="https://charlesreid1.github.io/category/computer-science.html">Computer Science</a>
                </p>
            <p>
            <span style="font-size: 14px">
                <a href="https://charlesreid1.github.io/python-vs-perl-n-queens-problem.html">permalink</a>
            </span>
            </p>
        </div>

    </div>

</div>
</header>


<div class="v50"></div>


<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="entry-content"><h2>Table of Contents</h2>
<ul>
<li><a href="#pvp-background">Background</a></li>
<li><a href="#pvp-nqueens">N Queens Revisited</a></li>
<li><a href="#pvp-perlsoln">Perl Solution</a></li>
<li><a href="#pvp-pythonsoln">Python Solution</a></li>
<li><a href="#pvp-h2hnqueens">Python vs. Perl: Walltime vs. Number of Queens</a></li>
<li><a href="#pvp-perlprof">Perl Profiling and Results</a></li>
<li><a href="#pvp-pythonprof">Python Profiling</a></li>
<li><a href="#pvp-pythonprofresults">Python Profiling Results</a></li>
<li><a href="#pvp-pythonperl">Comparing Python to Perl</a></li>
<li><a href="#pvp-h2hops">Python vs. Perl: Walltime vs. Number of Solutions Tested</a></li>
<li><a href="#pvp-winner">The Winner: Perl for Small Problems, Python for Big Ones</a></li>
<li><a href="#pvp-sources">Sources</a></li>
</ul>
<p><a name="pvp-background"></a></p>
<h2>Background</h2>
<p>Revisiting the N queens problem, this time implementing the solution in Python.</p>
<p>Verb-oriented solution, functional, and based on Perl solution</p>
<p>More fair comparison - both are interpreted languages, not compiled languages</p>
<p>Compare Python and Perl, ease of implementation, speed, flexibility</p>
<p><a name="pvp-nqueensproblem"></a></p>
<h2>N Queens Problem</h2>
<p>As a recap from the last post about the N queens problem, we're solving a chess puzzle that asks:
how many different configurations are there for placing <span class="math">\(N\)</span> queens on an <span class="math">\(N \times N\)</span> chessboard
such that no queen attacks any other queen?</p>
<p>This is a popular problem in computer science because solutions often implement recursive backtracking.</p>
<p>See <a href="https://en.wikipedia.org/wiki/N_Queens_Problem">the Wikipedia article</a> for details.</p>
<p><a name="pvp-nqueenssoln"></a></p>
<h2>N Queens Solution</h2>
<p>Here is the pseudocode of the N queens solution being implemented here:</p>
<div class="highlight"><pre><span></span><span class="nv">explore</span><span class="ss">(</span><span class="nv">column</span><span class="ss">)</span>:
    <span class="k">if</span> <span class="nv">last</span> <span class="nv">column</span>:
        # <span class="nv">base</span> <span class="nv">case</span>
        <span class="nv">add</span> <span class="nv">to</span> <span class="nv">solutions</span>
    <span class="k">else</span>:
        # <span class="nv">recursive</span> <span class="nv">case</span>
        <span class="k">for</span> <span class="nv">each</span> <span class="nv">row</span>:
            <span class="k">if</span> <span class="nv">this</span> <span class="nv">is</span> <span class="nv">a</span> <span class="nv">safe</span> <span class="nv">row</span>:
                <span class="nv">place</span> <span class="nv">queen</span> <span class="nv">on</span> <span class="nv">this</span> <span class="nv">row</span>
                <span class="nv">explore</span><span class="ss">(</span><span class="nv">column</span><span class="o">+</span><span class="mi">1</span><span class="ss">)</span>
                <span class="nv">remove</span> <span class="nv">queen</span> <span class="nv">from</span> <span class="nv">this</span> <span class="nv">row</span>
</pre></div>


<p>This solution implements recursive backtracking to explore choices of where to place each queen.
It keeps solutions simple, and can be implemented using only primitive built-in data types.
Solutions are stringified version of these arrays, consisting of 8 digits, so they are likewise very simple.</p>
<p><a name="pvp-perlsoln"></a></p>
<h3>Perl Solution</h3>
<p>As a reminder, the Perl solution was originally from <a href="http://rosettacode.org/wiki/N-queens_problem#Perl">Rosetta Code</a>.
Here's another link to the Perl solution on Github.</p>
<p><a href="https://gist.github.com/charlesreid1/4ce97a5f896ff1c89855a5d038d51535">Github gist: nqueens.pl</a></p>
<p><a name="pvp-pythonsoln"></a></p>
<h3>Python Solution</h3>
<p>The solution requires the use of one array of data that is fixed in size,
which for a given column stores a list of rows already occupied by queens, 
and one array of data that is variable in size, which stores where each queen has been placed.</p>
<p>The Python solution makes use of lists by using a fixed-size list for the occupied rows
and a variable size list for storing queen locations. 
It utilizes buit-in methods for the list data type to append and pop, or add and remove items from the end of the list.</p>
<p><a href="https://gist.github.com/charlesreid1/1a2ecb3a83284290d4a9daf747d0d7e4">Github gist: nqueens.py</a></p>
<p><a name="pvp-h2hnqueens"></a></p>
<h2>Head to Head: Walltime vs. Number of Queens</h2>
<p><img alt="Graph of walltime versus number of queens" src="/images/python-vs-perl-nqueens.png"></p>
<div class="highlight"><pre><span></span><span class="c1">----------------------------------------------------------</span>
<span class="o">|</span> <span class="n">NQueens</span> <span class="o">|</span> <span class="n">Nsolutions</span> <span class="o">|</span> <span class="n">Java</span>      <span class="o">|</span> <span class="n">Perl</span>     <span class="o">|</span> <span class="n">Python</span>   <span class="o">|</span>
<span class="o">|</span><span class="c1">---------|------------|-----------|----------|----------|</span>
<span class="o">|</span> <span class="mi">8</span>       <span class="o">|</span> <span class="mi">92</span>         <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">003628</span>  <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">016</span>    <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">018</span>    <span class="o">|</span>
<span class="o">|</span> <span class="mi">9</span>       <span class="o">|</span> <span class="mi">352</span>        <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">006709</span>  <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">067</span>    <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">077</span>    <span class="o">|</span>
<span class="o">|</span> <span class="mi">10</span>      <span class="o">|</span> <span class="mi">724</span>        <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">017473</span>  <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">259</span>    <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">359</span>    <span class="o">|</span>
<span class="o">|</span> <span class="mi">11</span>      <span class="o">|</span> <span class="mi">2680</span>       <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">061291</span>  <span class="o">|</span> <span class="mi">1</span><span class="p">.</span><span class="mi">542</span>    <span class="o">|</span> <span class="mi">1</span><span class="p">.</span><span class="mi">684</span>    <span class="o">|</span>
<span class="o">|</span> <span class="mi">12</span>      <span class="o">|</span> <span class="mi">14200</span>      <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">240463</span>  <span class="o">|</span> <span class="mi">8</span><span class="p">.</span><span class="mi">431</span>    <span class="o">|</span> <span class="mi">8</span><span class="p">.</span><span class="mi">618</span>    <span class="o">|</span>
<span class="o">|</span> <span class="mi">13</span>      <span class="o">|</span> <span class="mi">73712</span>      <span class="o">|</span> <span class="mi">1</span><span class="p">.</span><span class="mi">113491</span>  <span class="o">|</span> <span class="mi">48</span><span class="p">.</span><span class="mi">542</span>   <span class="o">|</span> <span class="mi">50</span><span class="p">.</span><span class="mi">401</span>   <span class="o">|</span>
<span class="o">|</span> <span class="mi">14</span>      <span class="o">|</span> <span class="mi">365596</span>     <span class="o">|</span> <span class="mi">6</span><span class="p">.</span><span class="mi">557336</span>  <span class="o">|</span> <span class="mi">303</span><span class="p">.</span><span class="mi">278</span>  <span class="o">|</span> <span class="mi">322</span><span class="p">.</span><span class="mi">576</span>  <span class="o">|</span>
<span class="o">|</span> <span class="mi">15</span>      <span class="o">|</span> <span class="mi">2279184</span>    <span class="o">|</span> <span class="mi">42</span><span class="p">.</span><span class="mi">619426</span> <span class="o">|</span> <span class="mi">2057</span><span class="p">.</span><span class="mi">052</span> <span class="o">|</span> <span class="mi">1979</span><span class="p">.</span><span class="mi">343</span> <span class="o">|</span>
<span class="c1">----------------------------------------------------------</span>
</pre></div>


<p>The results of this test show that Python and Perl
are fairly closely matched.</p>
<p><a name="pvp-perlprof"></a></p>
<h2>Perl Profiling</h2>
<p>Results of profiling the Perl code with <code>Devel::NYTProf</code> were detailed in a prior post.</p>
<p>Here are those results once again,
for the 11 queens problem:</p>
<div class="highlight"><pre><span></span><span class="c1"># Profile data generated by Devel::NYTProf::Reader</span>
<span class="c1"># Version: v6.04</span>
<span class="c1"># More information at http://metacpan.org/release/Devel-NYTProf/</span>
<span class="c1"># Format: time,calls,time/call,code</span>
<span class="mf">0.000238</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.000119</span><span class="p">,</span><span class="k">use</span> <span class="nn">Time::HiRes</span> <span class="sx">qw(time)</span><span class="p">;</span>
<span class="mf">0.000039</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.000019</span><span class="p">,</span><span class="k">use</span> <span class="nn">strict</span><span class="p">;</span>
<span class="mf">0.000491</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.000246</span><span class="p">,</span><span class="k">use</span> <span class="nn">warnings</span><span class="p">;</span>
<span class="mf">0.000021</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.000021</span><span class="p">,</span><span class="k">my</span> <span class="nv">$start</span> <span class="o">=</span> <span class="nb">time</span><span class="p">;</span>
<span class="mf">0.010338</span><span class="p">,</span><span class="mi">2680</span><span class="p">,</span><span class="mf">0.000004</span><span class="p">,</span><span class="nb">push</span> <span class="nv">@solutions</span><span class="p">,</span> <span class="s">&quot;@queens\n&quot;</span><span class="p">;</span>
<span class="mf">0.009993</span><span class="p">,</span><span class="mi">2680</span><span class="p">,</span><span class="mf">0.000004</span><span class="p">,</span><span class="k">return</span><span class="p">;</span>
<span class="mf">0.186298</span><span class="p">,</span><span class="mi">164246</span><span class="p">,</span><span class="mf">0.000001</span><span class="p">,</span><span class="nv">$#attacked</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="nv">$board_size</span><span class="p">;</span>
<span class="mf">0.150338</span><span class="p">,</span><span class="mi">164246</span><span class="p">,</span><span class="mf">0.000001</span><span class="p">,</span><span class="k">for</span><span class="p">(</span> <span class="mi">0</span> <span class="o">..</span> <span class="nv">$#queens</span><span class="p">)</span> <span class="p">{</span> 
<span class="mf">0.675523</span><span class="p">,</span><span class="mf">1.26035e+06</span><span class="p">,</span><span class="mf">0.000001</span><span class="p">,</span><span class="nv">$attacked</span><span class="p">[</span> <span class="nv">$ix2</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="mf">1.242624</span><span class="p">,</span><span class="mi">164246</span><span class="p">,</span><span class="mf">0.000008</span><span class="p">,</span><span class="k">for</span> <span class="k">my</span> <span class="nv">$row</span> <span class="p">(</span><span class="mi">0</span> <span class="o">..</span> <span class="nv">$board_size</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
<span class="mf">0.267469</span><span class="p">,</span><span class="mi">166925</span><span class="p">,</span><span class="mf">0.000002</span><span class="p">,</span><span class="n">explore</span><span class="p">(</span><span class="nv">$depth</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
<span class="mf">0.125272</span><span class="p">,</span><span class="mi">166925</span><span class="p">,</span><span class="mf">0.000001</span><span class="p">,</span><span class="nv">$occupied</span><span class="p">[</span><span class="nv">$row</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="mf">0.000002</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.000002</span><span class="p">,</span><span class="n">explore</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="mf">0.000011</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.000011</span><span class="p">,</span><span class="k">my</span> <span class="nv">$duration</span> <span class="o">=</span> <span class="nb">time</span> <span class="o">-</span> <span class="nv">$start</span><span class="p">;</span>
<span class="mf">0.000075</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.000075</span><span class="p">,</span><span class="k">print</span> <span class="s">&quot;Found &quot;</span><span class="p">,</span> <span class="nb">scalar</span><span class="p">(</span><span class="nv">@solutions</span><span class="p">),</span> <span class="s">&quot; solutions\n&quot;</span><span class="p">;</span>
<span class="mf">0.000050</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.000050</span><span class="p">,</span><span class="nb">printf</span> <span class="s">&quot;Execution time: %0.3f s \n&quot;</span><span class="p">,</span><span class="nv">$duration</span><span class="p">;</span>
</pre></div>


<p><a name="pvp-pythonprof"></a></p>
<h2>Python Profiling</h2>
<p>The Python N queens solution was profiled with two tools: <code>cProfile</code> and <code>line_profiler</code>. </p>
<p>The built-in profiling tool <code>cProfile</code> gives a summary of how much time was spent in each method,
but nothing lower level than that. It is similar to Java profiling tools. <a href="https://docs.python.org/2/library/profile.html">(cProfile documentation)</a></p>
<p>The <code>line_profiler</code> tool is designed to profile Python code line-by-line, which gives a much more useful
breakdown of where the code spent all of its time. It is also helpful because this can be compared one-to-one
with the results from Perl, and we can get an equal basis for comparing the two languages.</p>
<p><a name="pvp-pythonprofresults"></a></p>
<h2>Python Profiling Results</h2>
<h3><code>cProfile</code> Results</h3>
<p>Here are the results from running the N queens problem for N = 11 through cProfile:</p>
<div class="highlight"><pre><span></span><span class="o">**************************************</span>
<span class="n">Profiling</span> <span class="mi">11</span> <span class="n">queens</span> <span class="n">problem</span> <span class="k">with</span> <span class="n">Python</span><span class="p">...</span>
<span class="o">*******************************</span>
<span class="n">cProfile</span><span class="p">:</span>
<span class="o">*******************************</span>
<span class="k">Found</span> <span class="mi">2680</span> <span class="n">solutions</span>
         <span class="mi">996197</span> <span class="k">function</span> <span class="n">calls</span> <span class="p">(</span><span class="mi">829272</span> <span class="n">primitive</span> <span class="n">calls</span><span class="p">)</span> <span class="k">in</span> <span class="mi">2</span><span class="p">.</span><span class="mi">237</span> <span class="n">seconds</span>

   <span class="n">Ordered</span> <span class="k">by</span><span class="p">:</span> <span class="n">internal</span> <span class="n">time</span>

   <span class="n">ncalls</span>  <span class="n">tottime</span>  <span class="n">percall</span>  <span class="n">cumtime</span>  <span class="n">percall</span> <span class="n">filename</span><span class="p">:</span><span class="n">lineno</span><span class="p">(</span><span class="k">function</span><span class="p">)</span>
 <span class="mi">166926</span><span class="o">/</span><span class="mi">1</span>    <span class="mi">1</span><span class="p">.</span><span class="mi">845</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span>    <span class="mi">2</span><span class="p">.</span><span class="mi">237</span>    <span class="mi">2</span><span class="p">.</span><span class="mi">237</span> <span class="o">/</span><span class="n">Volumes</span><span class="o">/</span><span class="n">noospace</span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">charles</span><span class="o">/</span><span class="n">codes</span><span class="o">/</span><span class="n">hello</span><span class="o">-</span><span class="n">world</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">nqueens</span><span class="o">/</span><span class="n">nqueens</span><span class="p">.</span><span class="n">py</span><span class="p">:</span><span class="mi">12</span><span class="p">(</span><span class="n">explore</span><span class="p">)</span>
   <span class="mi">328492</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">275</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">275</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span> <span class="err">{</span><span class="n">range</span><span class="err">}</span>
   <span class="mi">166925</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">062</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">062</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span> <span class="err">{</span><span class="k">method</span> <span class="s1">&#39;pop&#39;</span> <span class="k">of</span> <span class="s1">&#39;list&#39;</span> <span class="n">objects</span><span class="err">}</span>
   <span class="mi">169605</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">029</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">029</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span> <span class="err">{</span><span class="k">method</span> <span class="s1">&#39;append&#39;</span> <span class="k">of</span> <span class="s1">&#39;list&#39;</span> <span class="n">objects</span><span class="err">}</span>
   <span class="mi">164247</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">026</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">026</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span> <span class="err">{</span><span class="n">len</span><span class="err">}</span>
        <span class="mi">1</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span>    <span class="mi">2</span><span class="p">.</span><span class="mi">237</span>    <span class="mi">2</span><span class="p">.</span><span class="mi">237</span> <span class="o">/</span><span class="n">Volumes</span><span class="o">/</span><span class="n">noospace</span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">charles</span><span class="o">/</span><span class="n">codes</span><span class="o">/</span><span class="n">hello</span><span class="o">-</span><span class="n">world</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">nqueens</span><span class="o">/</span><span class="n">nqueens</span><span class="p">.</span><span class="n">py</span><span class="p">:</span><span class="mi">4</span><span class="p">(</span><span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span><span class="p">)</span>
        <span class="mi">1</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span> <span class="err">{</span><span class="k">method</span> <span class="s1">&#39;disable&#39;</span> <span class="k">of</span> <span class="s1">&#39;_lsprof.Profiler&#39;</span> <span class="n">objects</span><span class="err">}</span>
</pre></div>


<h3><code>line_profiler</code> Results</h3>
<p>The <code>line_profiler</code> tool gives a more detailed picture of the code and where it spends its time,
breaking down profiling information line-by-line. This tool can be installed with pip: <code>pip install line_profiler</code>.
The (INSERT LINK)(nqueens repository on github) has a file that demonstrates how to use this tool.
See <a href="https://charlesreid1.com/wiki/Python/Profiling">Python/Profiling</a></p>
<p>Here are the results from the <code>line_profiler</code> tool run on the same (11 queens) problem:</p>
<div class="highlight"><pre><span></span><span class="o">**************************************</span>
<span class="nv">Profiling</span> <span class="mi">11</span> <span class="nv">queens</span> <span class="nv">problem</span> <span class="nv">with</span> <span class="nv">Python</span>...
<span class="nv">Found</span> <span class="mi">2680</span> <span class="nv">solutions</span>
<span class="nv">Wrote</span> <span class="nv">profile</span> <span class="nv">results</span> <span class="nv">to</span> <span class="nv">nqueens</span>.<span class="nv">py</span>.<span class="nv">lprof</span>
<span class="nv">Timer</span> <span class="nv">unit</span>: <span class="mi">1</span><span class="nv">e</span><span class="o">-</span><span class="mi">06</span> <span class="nv">s</span>

<span class="nv">Total</span> <span class="nv">time</span>: <span class="mi">14</span>.<span class="mi">2258</span> <span class="nv">s</span>
<span class="nv">File</span>: <span class="nv">nqueens</span>.<span class="nv">py</span>
<span class="nv">Function</span>: <span class="nv">explore</span> <span class="nv">at</span> <span class="nv">line</span> <span class="mi">11</span>

<span class="nv">Line</span> #      <span class="nv">Hits</span>         <span class="nv">Time</span>  <span class="nv">Per</span> <span class="nv">Hit</span>   <span class="o">%</span> <span class="nv">Time</span>  <span class="nv">Line</span> <span class="nv">Contents</span>
<span class="o">==============================================================</span>
    <span class="mi">11</span>                                           @<span class="nv">profile</span>
    <span class="mi">12</span>                                           <span class="nv">def</span> <span class="nv">explore</span><span class="ss">(</span><span class="nv">depth</span><span class="ss">)</span>:
    <span class="mi">13</span>                                               # <span class="nv">base</span> <span class="nv">case</span>
    <span class="mi">14</span>    <span class="mi">166926</span>       <span class="mi">187573</span>      <span class="mi">1</span>.<span class="mi">1</span>      <span class="mi">1</span>.<span class="mi">3</span>      <span class="k">if</span><span class="ss">(</span><span class="nv">depth</span><span class="o">==</span><span class="nv">board_size</span><span class="ss">)</span>:
    <span class="mi">15</span>                                                   # <span class="nv">stringify</span><span class="o">/</span><span class="nv">serialize</span> <span class="nv">the</span> <span class="nv">solution</span>
    <span class="mi">16</span>      <span class="mi">2680</span>        <span class="mi">31497</span>     <span class="mi">11</span>.<span class="mi">8</span>      <span class="mi">0</span>.<span class="mi">2</span>          <span class="nv">solutions</span>.<span class="nv">append</span><span class="ss">(</span><span class="s2">&quot;</span><span class="s">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="ss">(</span><span class="nv">queens</span><span class="ss">))</span>
    <span class="mi">17</span>      <span class="mi">2680</span>         <span class="mi">3117</span>      <span class="mi">1</span>.<span class="mi">2</span>      <span class="mi">0</span>.<span class="mi">0</span>          <span class="k">return</span>
    <span class="mi">18</span>                                           
    <span class="mi">19</span>                                               <span class="k">else</span>:
    <span class="mi">20</span>    <span class="mi">164246</span>       <span class="mi">384688</span>      <span class="mi">2</span>.<span class="mi">3</span>      <span class="mi">2</span>.<span class="mi">7</span>          <span class="nv">attacked</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="nv">board_size</span><span class="o">*</span>[<span class="mi">0</span>,]
    <span class="mi">21</span>   <span class="mi">1424595</span>      <span class="mi">1690693</span>      <span class="mi">1</span>.<span class="mi">2</span>     <span class="mi">11</span>.<span class="mi">9</span>          <span class="k">for</span> <span class="nv">i</span> <span class="nv">in</span> <span class="nv">range</span><span class="ss">(</span><span class="mi">0</span>,<span class="nv">len</span><span class="ss">(</span><span class="nv">queens</span><span class="ss">))</span>:
    <span class="mi">22</span>   <span class="mi">1260349</span>      <span class="mi">1471304</span>      <span class="mi">1</span>.<span class="mi">2</span>     <span class="mi">10</span>.<span class="mi">3</span>              <span class="nv">ix1</span> <span class="o">=</span> <span class="nv">queens</span>[<span class="nv">i</span>] <span class="o">+</span> <span class="nv">depth</span> <span class="o">-</span> <span class="nv">i</span>
    <span class="mi">23</span>   <span class="mi">1260349</span>      <span class="mi">1405141</span>      <span class="mi">1</span>.<span class="mi">1</span>      <span class="mi">9</span>.<span class="mi">9</span>              <span class="nv">attacked</span>[<span class="nv">ix1</span>] <span class="o">=</span> <span class="mi">1</span>
    <span class="mi">24</span>                                           
    <span class="mi">25</span>   <span class="mi">1260349</span>      <span class="mi">1494095</span>      <span class="mi">1</span>.<span class="mi">2</span>     <span class="mi">10</span>.<span class="mi">5</span>              <span class="nv">ix2</span> <span class="o">=</span> <span class="nv">queens</span>[<span class="nv">i</span>] <span class="o">-</span> <span class="nv">depth</span> <span class="o">+</span> <span class="nv">i</span>
    <span class="mi">26</span>   <span class="mi">1260349</span>      <span class="mi">1392563</span>      <span class="mi">1</span>.<span class="mi">1</span>      <span class="mi">9</span>.<span class="mi">8</span>              <span class="nv">attacked</span>[<span class="nv">ix2</span>] <span class="o">=</span> <span class="mi">1</span>
    <span class="mi">27</span>                                           
    <span class="mi">28</span>   <span class="mi">1970952</span>      <span class="mi">2229922</span>      <span class="mi">1</span>.<span class="mi">1</span>     <span class="mi">15</span>.<span class="mi">7</span>          <span class="k">for</span> <span class="nv">row</span> <span class="nv">in</span> <span class="nv">range</span><span class="ss">(</span><span class="mi">0</span>,<span class="nv">board_size</span><span class="ss">)</span>:
    <span class="mi">29</span>   <span class="mi">1806706</span>      <span class="mi">2031139</span>      <span class="mi">1</span>.<span class="mi">1</span>     <span class="mi">14</span>.<span class="mi">3</span>              <span class="k">if</span><span class="ss">(</span><span class="nv">occupied</span>[<span class="nv">row</span>] <span class="nv">or</span> <span class="nv">attacked</span>[<span class="nv">row</span>]<span class="ss">)</span>:
    <span class="mi">30</span>    <span class="mi">379432</span>       <span class="mi">374466</span>      <span class="mi">1</span>.<span class="mi">0</span>      <span class="mi">2</span>.<span class="mi">6</span>                  <span class="k">continue</span>
    <span class="mi">31</span>                                           
    <span class="mi">32</span>                                                       # <span class="nv">make</span> <span class="nv">a</span> <span class="nv">choice</span>
    <span class="mi">33</span>    <span class="mi">166925</span>       <span class="mi">241114</span>      <span class="mi">1</span>.<span class="mi">4</span>      <span class="mi">1</span>.<span class="mi">7</span>              <span class="nv">queens</span>.<span class="nv">append</span><span class="ss">(</span><span class="nv">row</span><span class="ss">)</span>
    <span class="mi">34</span>    <span class="mi">166925</span>       <span class="mi">186833</span>      <span class="mi">1</span>.<span class="mi">1</span>      <span class="mi">1</span>.<span class="mi">3</span>              <span class="nv">occupied</span>[<span class="nv">row</span>] <span class="o">=</span> <span class="mi">1</span>
    <span class="mi">35</span>                                           
    <span class="mi">36</span>                                                       # <span class="nv">explore</span> <span class="nv">the</span> <span class="nv">consequences</span>
    <span class="mi">37</span>    <span class="mi">166925</span>       <span class="mi">610396</span>      <span class="mi">3</span>.<span class="mi">7</span>      <span class="mi">4</span>.<span class="mi">3</span>              <span class="nv">explore</span><span class="ss">(</span><span class="nv">depth</span><span class="o">+</span><span class="mi">1</span><span class="ss">)</span>
    <span class="mi">38</span>                                           
    <span class="mi">39</span>                                                       # <span class="nv">unmake</span> <span class="nv">the</span> <span class="nv">choice</span>
    <span class="mi">40</span>    <span class="mi">166925</span>       <span class="mi">288667</span>      <span class="mi">1</span>.<span class="mi">7</span>      <span class="mi">2</span>.<span class="mi">0</span>              <span class="nv">queens</span>.<span class="nv">pop</span><span class="ss">()</span>
    <span class="mi">41</span>    <span class="mi">166925</span>       <span class="mi">202555</span>      <span class="mi">1</span>.<span class="mi">2</span>      <span class="mi">1</span>.<span class="mi">4</span>              <span class="nv">occupied</span>[<span class="nv">row</span>] <span class="o">=</span> <span class="mi">0</span>
</pre></div>


<p><a name="pvp-h2hopts"></a></p>
<h2>Python vs Perl: Walltime vs. Number of Solutions Tested</h2>
<p>As with the prior post, I verified that both codes were testing the same number of solutions.
Here is that table of the number of solutions for each value of N, together with the number of solutions tested:</p>
<div class="highlight"><pre><span></span><span class="c1">-----------------------------------------------------------------------------</span>
<span class="o">|</span> <span class="n">NQueens</span> <span class="o">|</span> <span class="n">Nsolutions</span> <span class="o">|</span> <span class="n">NsolutionsTested</span> <span class="o">|</span> <span class="n">Java</span>      <span class="o">|</span> <span class="n">Perl</span>     <span class="o">|</span> <span class="n">Python</span>   <span class="o">|</span>
<span class="o">|</span><span class="c1">---------|------------|------------------|-----------|----------|----------|</span>
<span class="o">|</span> <span class="mi">8</span>       <span class="o">|</span> <span class="mi">92</span>         <span class="o">|</span> <span class="mi">1965</span>             <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">003628</span>  <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">016</span>    <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">018</span>    <span class="o">|</span>
<span class="o">|</span> <span class="mi">9</span>       <span class="o">|</span> <span class="mi">352</span>        <span class="o">|</span> <span class="mi">8042</span>             <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">006709</span>  <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">067</span>    <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">077</span>    <span class="o">|</span>
<span class="o">|</span> <span class="mi">10</span>      <span class="o">|</span> <span class="mi">724</span>        <span class="o">|</span> <span class="mi">34815</span>            <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">017473</span>  <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">259</span>    <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">359</span>    <span class="o">|</span>
<span class="o">|</span> <span class="mi">11</span>      <span class="o">|</span> <span class="mi">2680</span>       <span class="o">|</span> <span class="mi">164246</span>           <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">061291</span>  <span class="o">|</span> <span class="mi">1</span><span class="p">.</span><span class="mi">542</span>    <span class="o">|</span> <span class="mi">1</span><span class="p">.</span><span class="mi">684</span>    <span class="o">|</span>
<span class="o">|</span> <span class="mi">12</span>      <span class="o">|</span> <span class="mi">14200</span>      <span class="o">|</span> <span class="mi">841989</span>           <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">240463</span>  <span class="o">|</span> <span class="mi">8</span><span class="p">.</span><span class="mi">431</span>    <span class="o">|</span> <span class="mi">8</span><span class="p">.</span><span class="mi">618</span>    <span class="o">|</span>
<span class="o">|</span> <span class="mi">13</span>      <span class="o">|</span> <span class="mi">73712</span>      <span class="o">|</span> <span class="mi">4601178</span>          <span class="o">|</span> <span class="mi">1</span><span class="p">.</span><span class="mi">113491</span>  <span class="o">|</span> <span class="mi">48</span><span class="p">.</span><span class="mi">542</span>   <span class="o">|</span> <span class="mi">50</span><span class="p">.</span><span class="mi">401</span>   <span class="o">|</span>
<span class="o">|</span> <span class="mi">14</span>      <span class="o">|</span> <span class="mi">365596</span>     <span class="o">|</span> <span class="mi">26992957</span>         <span class="o">|</span> <span class="mi">6</span><span class="p">.</span><span class="mi">557336</span>  <span class="o">|</span> <span class="mi">303</span><span class="p">.</span><span class="mi">278</span>  <span class="o">|</span> <span class="mi">322</span><span class="p">.</span><span class="mi">576</span>  <span class="o">|</span>
<span class="o">|</span> <span class="mi">15</span>      <span class="o">|</span> <span class="mi">2279184</span>    <span class="o">|</span> <span class="mi">168849888</span>        <span class="o">|</span> <span class="mi">42</span><span class="p">.</span><span class="mi">619426</span> <span class="o">|</span> <span class="mi">2057</span><span class="p">.</span><span class="mi">052</span> <span class="o">|</span> <span class="mi">1979</span><span class="p">.</span><span class="mi">343</span> <span class="o">|</span>
<span class="c1">-----------------------------------------------------------------------------</span>
</pre></div>


<p><img alt="Graph of walltime versus number of solutions tested" src="/images/python-vs-perl-ntested.png"></p>
<p><a name="pvp-winner"></a></p>
<h2>The Winner: Perl for Small Problems, Python for Big Ones</h2>
<p>It was not a big surprise to see that Perl and Python were nearly identical in their performance,
and it testament to the fact that interpreted scripting languages like Perl and Python operate at one speed,
and compiled code in C++ or Java operates at a completely different speed that is an order of magnitude faster 
(see the comparison of Perl and Java in a prior blog post).</p>
<p>Perl and Python were close enough in performance that, although Perl came out ahead on smaller problems
and Python came out ahead on the biggest, a different CPU or platform, micro-optimizations, and various butterfly effects 
could easily turn the tables. </p>
<p><a name="pvp-sources"></a></p>
<h2>Sources</h2>
<ol>
<li>
<p>"N-Queens Problem". Rosetta Code, GNU Free Documentation License. Edited 6 March 2017. Accessed 21 March 2017.
&lt;<a href="https://web.archive.org/web/20170320081421/http://rosettacode.org/wiki/N-queens_problem">https://web.archive.org/web/20170320081421/http://rosettacode.org/wiki/N-queens_problem</a>&gt;</p>
</li>
<li>
<p>"nqueens.py". Charles Reid. Github Gist, Github Inc. Edited 25 March 2017. Accessed 25 March 2017.
&lt;<a href="https://gist.github.com/charlesreid1/1a2ecb3a83284290d4a9daf747d0d7e4">https://gist.github.com/charlesreid1/1a2ecb3a83284290d4a9daf747d0d7e4</a>&gt;</p>
</li>
<li>
<p>"nqueens.pl". Charles Reid. Github Gist, Github Inc. Edited 20 March 2017. Accessed 23 March 2017.
&lt;<a href="https://gist.github.com/charlesreid1/4ce97a5f896ff1c89855a5d038d51535">https://gist.github.com/charlesreid1/4ce97a5f896ff1c89855a5d038d51535</a>&gt;</p>
</li>
<li>
<p>"The Python Profilers". Python 2.7.13 Documentation, Python Software Foundation. Updated 20 February 2017. Accessed 23 March 2017. 
&lt;<a href="https://docs.python.org/2/library/profile.html">https://docs.python.org/2/library/profile.html</a>&gt;</p>
</li>
<li>
<p>"line_profiler". Python Package Index, Python Software Foundation. Updated 20 October 2016. Accessed 23 March 2017.
&lt;<a href="https://pypi.python.org/pypi/line_profiler/">https://pypi.python.org/pypi/line_profiler/</a>&gt;</p>
</li>
<li>
<p>"Github - rkern/line_profiler". rkern, Github Repository, Github Inc. Updated 20 October 2016. Accessed 23 March 2017.
&lt;<a href="https://github.com/rkern/line_profiler">https://github.com/rkern/line_profiler</a>&gt;</p>
</li>
<li>
<p>"Python/Profiling". Charlesreid1.com wiki, Charles Reid. Edited 23 March 2017. Accessed 23 March 2017.
&lt;<a href="https://web.archive.org/web/20170326031708/http://charlesreid1.com/wiki/Python/Profiling">https://web.archive.org/web/20170326031708/http://charlesreid1.com/wiki/Python/Profiling</a>&gt;</p>
</li>
</ol>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script></div>

    </div>
</div>

<div class="v20"></div>

<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="tags">
            <p>Tags:&nbsp;&nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/python.html">python</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/perl.html">perl</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/java.html">java</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/algorithms.html">algorithms</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/recursion.html">recursion</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/n-queens.html">n-queens</a>
                    &nbsp;&nbsp;
        </div>

    </div>
</div>


<div class="v200"></div>

</div>


<script type="text/javascript" src="https://charlesreid1.github.io/theme/js/jquery-1.11.2.js"></script>
<script type="text/javascript" src="https://charlesreid1.github.io/theme/js/bootstrap-3.3.4.js"></script>
<script type="text/javascript" src="https://charlesreid1.github.io/theme/js/d3-3.5.5.js"></script><script type="text/javascript" src="https://charlesreid1.github.io/theme/js/jquery-1.11.2.js"></script>
<script type="text/javascript" src="https://charlesreid1.github.io/theme/js/bootstrap-3.3.4.js"></script>

<footer id="contentinfo" class="body">
<p>&nbsp;</p>
<p>&nbsp;</p>
<center>
	<hr />
</center>
<p>&nbsp;</p>
<p style="text-align: center">
    <span class="fa-stack fa-lg">
        <i class="fa fa-square fa-stack-2x" style="color:#000;"></i>
        <i class="fa fa-terminal fa-stack-1x fa-inverse"></i>
    </span>
    Made from the command line with vim by 
    <a href="http://charlesreid1.com">charlesreid1</a><br />
    with help from <a href="https://getbootstrap.com/">Bootstrap</a> and <a href="http://getpelican.com">Pelican</a>.
</p>

<br />

<p style="text-align: center">
    <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">
    <span class="fa-stack fa-lg">
        <i class="fa fa-square fa-stack-2x" style="color:#000;"></i>
        <i class="fa fa-creative-commons fa-stack-1x fa-inverse"></i>
    </span>
    </a>
    <br />
    Licensed under the <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 License</a>.
</p>

<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=11611748;
var sc_invisible=1;
var sc_security="9fcba820";
</script>
<script type="text/javascript"
src="https://www.statcounter.com/counter/counter.js"
async></script>

<noscript><div class="statcounter"><a title="Web Analytics"
href="http://statcounter.com/" target="_blank"><img
class="statcounter"
src="//c.statcounter.com/11611748/0/9fcba820/1/" alt="Web
Analytics"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->
</footer><!-- /#contentinfo -->
</body>
</html>