<!DOCTYPE html>
<html lang="en">
<head>
        <title>charlesreid1</title>
        <meta charset="utf-8" />

        <!--
        CSS styles
        -->
        <link href="/theme/css/bootstrap.css"       rel="stylesheet" type="text/css">
        <link href="/theme/css/slate.css"              rel="stylesheet" type="text/css">
        <link href="/theme/css/font-awesome.css"       rel="stylesheet" type="text/css"/>
        <link href="/theme/css/pygment-solarized.css"  rel="stylesheet" type="text/css"/>

        <!--
        my CSS styles
        -->
        <link href="/theme/css/main.css"            rel="stylesheet" type="text/css">
        <link href="/theme/css/dox.css"             rel="stylesheet" type="text/css">


        <!--
        include Angular first
        -->
        <script type="text/javascript" src="/theme/js/angular-1.3.15.js"></script>
        <script type="text/javascript" src="/theme/js/skrollr-0.6.29.js"></script>
        <script type="text/javascript" src="/theme/js/d3-3.5.5.js"></script>

        <!--
        this seems like a bad idea.
        but if I don't put jquery first, I get errors about unrecognized $s.
        -->
        <script type="text/javascript" src="/theme/js/jquery-1.11.2.js"></script>

</head>
<body id="index">
<nav class="navbar navbar-default">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span> 
            </button>
            <a href="https://charlesreid1.github.io" class="navbar-brand">charlesreid1.github.io</a>
        </div>
        <div>
            <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav">

                    <li>
                        <a href="https://charlesreid1.com/wiki">Wiki</a>
                    </li>
                    <li>
                        <a href="https://git.charlesreid1.com/explore">git.charlesreid1.com</a>
                    </li>
                    <li>
                        <a href="https://github.com/charlesreid1/charlesreid1-awesome/">charlesreid1 Awesome List</a>
                    </li>
                    <li>
                        <a href="https://charlesreid1.com/life">Life</a>
                    </li>
                    <li>
                        <a href="https://charlesreid1.github.io">Blog</a>
                    </li>
                    <li>
                        <a href="/contact">Contact Me</a>
                    </li>

                </ul>
            </div>
        </div>
    </div>
</nav>



<div class="container">

<header>
<div class="row">


    <div class="col-md-12">
        <div class="headtext" style="text-align: center;">
            <h1><b>
                Charlesreid1.com Stack: Part 1: Web
            </b></h1>
        
            <p class="lead">
                Posted 
                <time datetime="2018-03-31T23:00:00-07:00" pubdate>Saturday 03/31/2018</time>
                in 
                <a href="/category/charlesreid1.html">Charlesreid1</a>
                </p>
            <p>
            <span style="font-size: 14px">
                <a href="/drafts/charlesreid1com-stack-part-1-web.html">permalink</a>
            </span>
            </p>
        </div>

    </div>

</div>
</header>


<div class="v50"></div>


<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="entry-content"><h1>Web</h1>
<p>Several components:</p>
<ul>
<li>Main site - pelican</li>
<li>Wiki - MediaWiki (PHP), Old Reliable, same software running Wikipedia</li>
<li>Javascript playground - pelican, life, calendar, maps, Leaflet, D3, etc.</li>
<li>Blog - hosted on Github, made with Pelican</li>
</ul>
<h2>Main Pelican Site: Charlesreid1.com</h2>
<h3>Design and Layout</h3>
<p>Consistent look and feel of site belies underlying heterogeneous elements:</p>
<ul>
<li>HTML/JS for main page and Javascript sub-pages (Pelican)</li>
<li>Wiki with a skin and style files for wiki page layouts defined in PHP (MediaWiki)</li>
<li>Static content hosted on Github pages (also Pelican)</li>
</ul>
<p>The way these are kept consistent is by encapsulating all content for the Charlesreid1.com 
look and feel into standalone HTML files that can be copied into MediaWiki's skin folder,
Pelican's theme folder, and shared across Pelican themes to create a suite of 
sites with the same style.</p>
<h3>Pelican Workflow</h3>
<p>Manage content of the main site with Pelican, version control with git.</p>
<p>Edit workflow:</p>
<ul>
<li>Organize website repo into source branch and htdocs branch</li>
<li>Clone a local copy of the site, edit source of site to add content</li>
<li>Commit changes, push to central server</li>
</ul>
<p>Update htdocs after edit workflow:</p>
<ul>
<li>Generate pelican content into output/</li>
<li>Move to output directory</li>
<li>Add, commit, and push changes to the htdocs branch</li>
</ul>
<p>Deploy workflow:</p>
<ul>
<li>Clone (or pull) a local copy of the htdocs branch of the site </li>
<li>Web server uses this directory asa live htdocs directory</li>
</ul>
<p>Alternative deploy workflow:</p>
<ul>
<li>Clone (or pull) a local copy of the source brnach of the site</li>
<li>Generate pelian content for site</li>
<li>Copy htdocs files over to appropriate location on webserver</li>
</ul>
<h2>Wiki Site: Charlesreid1.com/wiki</h2>
<p>MediaWiki</p>
<p>Highly customized skin limits amount of clutter</p>
<p>Chose mediawiki nearly a decade ago, and am still going strong with it. Important reasons:</p>
<ul>
<li>The content features: simple as hell to create new pages, upload images, transclude content from one page in another, develop page templates, quickly create a sense of "there"-ness</li>
<li>The markdown: using a MW wiki every day means you are learning MW syntax, which translates directly to Wikipedia. This means you'll have a much deeper understanding of Wikipedia than the average bear.</li>
<li>The community: MW is a robust tool whose fate is forever tied to the fate of Wikipedia. It's a good bet Wikipedia will be around for a long time, and so will MW.</li>
<li>The bots: MW has an amazing API that allows you to create sophisticated wiki bots in Python. Again, this is knowledge that translates directly to Wikipedia.</li>
</ul>
<p>Alternatives: </p>
<ul>
<li>
<p>Git-based plain text repos rendered into markdown - this has the problem of mainly consisting of ruby tools,
    most of which were hopelessly mired in ruby versions, gem libraries, and Rakefiles. Ugh. 
    Furthermore, it's diffiult to incorporate rich text, media, HTML, Javascript, or plugins,
    and it's difficult to visualize history (impossible in the browser).</p>
</li>
<li>
<p>Other wiki software - none are as full featured as MediaWiki. Trac Wiki came the closest in terms of features and maturity,
    but it was extremely complicated to build and set up, and the syntax is completely different from MediaWiki, and in my opinion
    completely and utterly senseless. MediaWiki offers a better wiki than Trac, and Gitea offers a better version control web interface than Trac.</p>
</li>
<li>
<p>Drupal - similar in scope and complexity to MW (and also written in PHP), and designed for a large enough site that 
    you could handle thousands of pages. (For example, The Economist uses Drupal to manage their website.)
    However, I found Drupal's source difficult to understand and nearly impossible to customize, 
    and the barrier to creating pages and linking content was just too high.</p>
</li>
<li>
<p>WordPress - yeah right. WP matches MediaWiki in terms of features and ease of use (and is also written in PHP), 
    but WP is also riddled with security flaws and would make the task of managing a decade of notes and information impossible. </p>
</li>
</ul>
<p>MediaWiki is a clear winner.</p>
<h2>Javascript Playground: Charlesreid1.com/*</h2>
<p>Keeping Javascript pages standalone, lightweight, and modular</p>
<p>Pattern for Javascript apps: all files related to the app in a single directory</p>
<p>Static content (css, js libraries, images, common components) in static directory</p>
<h2>Server</h2>
<p>Running VPS</p>
<p>Nginx server frontend:</p>
<ul>
<li>Listens for requests </li>
<li>Forwards requests for wiki on to local instance of Apache</li>
<li>Pros: fast, secure, good for static content, handling high loads</li>
<li>Cons: no PHP (mitigated by Apache)</li>
</ul>
<p>Apache server backend:</p>
<ul>
<li>Listens for requests from local address only (Nginx)</li>
<li>Pros: handles PHP (and many other things)</li>
<li>Cons: constant patching (mitigated by Docker, building from source, not exposing Apache directly)</li>
</ul>
<h1>Git</h1>
<p>Gitea service - Go binary that runs continuously.</p>
<p>https://charlesreid1.github.io/setting-up-a-self-hosted-github-clone-with-gitea.html</p>
<p>Workflow to build from source, so able to constantly use the latest version.</p>
<p>Goenv to keep my Go version up to date.</p>
<h1>Docker</h1>
<p>Use Docker to run services, and to maintain patched, up-to-date software:</p>
<ul>
<li>Rsync</li>
<li>Stunnel</li>
<li>Netdata</li>
<li>Grafana</li>
<li>Nginx</li>
<li>Apache</li>
<li>Zmq</li>
<li>Jupyter Notebook</li>
</ul>
<h1>Security</h1>
<p>Encryption </p>
<ul>
<li>Private keys, SSH connection, ECSA fingerprint over trusted connection</li>
<li>SSH endpoint first time will ask you to verify fingerprint</li>
<li>Linode provides root web shell</li>
</ul>
<p>VPN - management LAN</p>
<ul>
<li>Concept of management LAN</li>
<li>Tinc for lightweight mesh VPN</li>
<li>OpenVPN is more complicated, server architecture</li>
<li>How it works: creates virtual network device, private IP </li>
<li>Use this to bind services to maangement LAN</li>
<li>Example: netdata server monitoring dashboard can be bound to VPN IP, and only accessible via LAN</li>
</ul></div>

    </div>
</div>

<div class="v20"></div>

<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="tags">
            <p>Tags:&nbsp;&nbsp;&nbsp;
                    <a href="/tag/web.html">web</a>
                    &nbsp;&nbsp;
                    <a href="/tag/git.html">git</a>
                    &nbsp;&nbsp;
                    <a href="/tag/pelican.html">pelican</a>
                    &nbsp;&nbsp;
                    <a href="/tag/nginx.html">nginx</a>
                    &nbsp;&nbsp;
                    <a href="/tag/apache.html">apache</a>
                    &nbsp;&nbsp;
                    <a href="/tag/mediawiki.html">mediawiki</a>
                    &nbsp;&nbsp;
                    <a href="/tag/javascript.html">javascript</a>
                    &nbsp;&nbsp;
                    <a href="/tag/php.html">php</a>
                    &nbsp;&nbsp;
                    <a href="/tag/docker.html">docker</a>
                    &nbsp;&nbsp;
                    <a href="/tag/security.html">security</a>
                    &nbsp;&nbsp;
        </div>

    </div>
</div>


<div class="v200"></div>

</div>


<script type="text/javascript" src="/theme/js/jquery-1.11.2.js"></script>
<script type="text/javascript" src="/theme/js/bootstrap-3.3.4.js"></script>
<script type="text/javascript" src="/theme/js/d3-3.5.5.js"></script>
<!--
<script type="text/javascript" src="/theme/js/leaflet-0.7.3.js"></script>
<script type="text/javascript" src="/theme/js/leaflet.ajax.min.js"></script>
--><script type="text/javascript" src="/theme/js/jquery-1.11.2.js"></script>
<script type="text/javascript" src="/theme/js/bootstrap-3.3.4.js"></script>

<footer id="contentinfo" class="body">
<p>&nbsp;</p>
<p>&nbsp;</p>
<center>
	<hr />
</center>
<p>&nbsp;</p>
<p style="text-align: center">
    <span class="fa-stack fa-lg">
        <i class="fa fa-square fa-stack-2x" style="color:#000;"></i>
        <i class="fa fa-terminal fa-stack-1x fa-inverse"></i>
    </span>
    Made from the command line with vim by 
    <a href="http://charlesreid1.com">charlesreid1</a><br />
    with help from <a href="https://getbootstrap.com/">Bootstrap</a> and <a href="http://getpelican.com">Pelican</a>.
</p>

<br />

<p style="text-align: center">
    <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">
    <span class="fa-stack fa-lg">
        <i class="fa fa-square fa-stack-2x" style="color:#000;"></i>
        <i class="fa fa-creative-commons fa-stack-1x fa-inverse"></i>
    </span>
    </a>
    <br />
    Licensed under the <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 License</a>.
</p>

<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=11611748;
var sc_invisible=1;
var sc_security="9fcba820";
</script>
<script type="text/javascript"
src="https://www.statcounter.com/counter/counter.js"
async></script>

<noscript><div class="statcounter"><a title="Web Analytics"
href="http://statcounter.com/" target="_blank"><img
class="statcounter"
src="//c.statcounter.com/11611748/0/9fcba820/1/" alt="Web
Analytics"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->
</footer><!-- /#contentinfo -->
</body>
</html>