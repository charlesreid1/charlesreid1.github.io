<!DOCTYPE html>
<html lang="en">
<head>
        <title>charlesreid1</title>
        <meta charset="utf-8" />

        <!--
        CSS styles
        -->
        <link href="https://charlesreid1.github.io/theme/css/bootstrap.css"       rel="stylesheet" type="text/css">
        <link href="https://charlesreid1.github.io/theme/css/slate.css"              rel="stylesheet" type="text/css">
        <link href="https://charlesreid1.github.io/theme/css/font-awesome.css"       rel="stylesheet" type="text/css"/>
        <link href="https://charlesreid1.github.io/theme/css/pygment-solarized.css"  rel="stylesheet" type="text/css"/>

        <!--
        my CSS styles
        -->
        <link href="https://charlesreid1.github.io/theme/css/main.css"            rel="stylesheet" type="text/css">
        <link href="https://charlesreid1.github.io/theme/css/dox.css"             rel="stylesheet" type="text/css">


        <!--
        include Angular first
        -->
        <script type="text/javascript" src="https://charlesreid1.github.io/theme/js/angular-1.3.15.js"></script>
        <script type="text/javascript" src="https://charlesreid1.github.io/theme/js/skrollr-0.6.29.js"></script>
        <script type="text/javascript" src="https://charlesreid1.github.io/theme/js/d3-3.5.5.js"></script>

        <!--
        this seems like a bad idea.
        but if I don't put jquery first, I get errors about unrecognized $s.
        -->
        <script type="text/javascript" src="https://charlesreid1.github.io/theme/js/jquery-1.11.2.js"></script>

</head>
<body id="index">
<nav class="navbar navbar-default">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span> 
            </button>
            <a href="https://charlesreid1.github.io" class="navbar-brand">charlesreid1.github.io</a>
        </div>
        <div>
            <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav">

                    <li>
                        <a href="https://charlesreid1.com/wiki">Wiki</a>
                    </li>
                    <li>
                        <a href="https://git.charlesreid1.com/explore">Git</a>
                    </li>
                    <li>
                        <a href="http://spotify.charlesreid1.com">Music</a>
                    </li>
                    <li>
                        <a href="https://charlesreid1.com/life">Life</a>
                    </li>
                    <li>
                        <a href="https://charlesreid1.github.io">Blog</a>
                    </li>
                    <li>
                        <a href="https://charlesreid1.com/about">About Me</a>
                    </li>

                </ul>
            </div>
        </div>
    </div>
</nav>



<div class="container">

    <div class="row">
        <div class="col-md-12 col-centered" style="text-align: center;">
            <div class="v50"></div>
            <div class="cosmojumbo">
                <h1 class="jumbojumbo">charlesreid1.com blog<h1>
            </div>
        </div>
    </div>


    <div class="v50"></div>


    <div class="row">

        <div class="col-md-8" style="text-align: center;">

  	            	<article>
<header>
<div class="row">


    <div class="col-md-12">
        <div class="headtext" style="text-align: center;">
            <h1><b>
                Perl vs. Java: N Queens Problem
            </b></h1>
        
            <p class="lead">
                Posted 
                <time datetime="2017-03-22T22:00:00-07:00" pubdate>Wednesday 03/22/2017</time>
                in 
                <a href="https://charlesreid1.github.io/category/computer-science.html">Computer Science</a>
                </p>
            <p>
            <span style="font-size: 14px">
                <a href="https://charlesreid1.github.io/perl-vs-java-n-queens-problem.html">permalink</a>
            </span>
            </p>
        </div>

    </div>

</div>
</header>


<div class="v50"></div>


<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="entry-content"><h2>Table of Contents</h2>
<ul>
<li><a href="#pvj-background">Background: Huh?</a></li>
<li><a href="#pvj-nqueensproblem">N Queens Problem</a></li>
<li><a href="#pvj-nqueenssoln">N Queens Solution</a><ul>
<li><a href="#pvj-perlsoln">Perl Solution</a></li>
<li><a href="#pvj-javasoln">Java Solution</a></li>
</ul>
</li>
<li><a href="#pvj-h2hnqueens">Head to Head: Walltime vs. Number of Queens</a></li>
<li><a href="#pvj-perlprof">Perl Profiling</a></li>
<li><a href="#pvj-perlprofresults">Perl Profiling Results</a></li>
<li><a href="#pvj-javaprof">Java Profiling</a></li>
<li><a href="#pvj-javaprofresults">Java Profiling Results</a></li>
<li><a href="#pvj-h2hntested">Head to Head: Walltime vs. Number of Solutions Tested</a></li>
<li><a href="#pvj-applesoranges">Apples and Oranges</a></li>
<li><a href="#pvj-sources">Sources</a></li>
</ul>
<h2>Summary</h2>
<p>In this post, we describe an implementation of the <a href="https://en.wikipedia.org/wiki/Eight_queens_puzzle">N Queens Problem</a>,
which is a puzzle related to optimization, combinatorics, and recursive backtracking.
The puzzle asks: how many configurations are there for placing 8 queens on a chessboard
such that no queen can attack any othr queen?</p>
<p>This problem was implemented in Perl and in Java, the solution results were timed,
and the codes were profiled. While Perl is an interpreted language, and is therefore
fully expeted to be much slower than Java (which indeed it is), it is still useful
to compare the performance between these two codes to gain an appreciation for 
the advantages and disadvantages to both approaches.</p>
<p><a name="pvj-background"></a></p>
<h2>Background: Huh?</h2>
<p>Recently I read an <a href="http://steve-yegge.blogspot.com/2006/03/execution-in-kingdom-of-nouns.html">(11 year old) article</a> 
by Steve Yegge entitled "Execution in the Kingdom of Nouns." In it, Steve describes the way that in Java, 
"Classes are really the only modeling tool Java provides you. 
So whenever a new idea occurs to you, you have to sculpt it or wrap it or smash at it until it becomes a thing, 
even if it began life as an action, a process, or any other non-'thing' concept."</p>
<p>The article inspired me to try on this verb-oriented mode of thinking in a more... active way. 
Prior experiences with OCaml were confusing, and Haskell continues to evade me,
so it was easier to dust off old Perl skills than learn enough Haskell or Ocaml to solve N queens problem.
Perl was the next-closest verb-oriented "scripting" language.</p>
<p>I was also familiar with the N queens problem, since I'm a programming instructor (I'll let you guess which language),
and it seemed like a nice problem for both noun-based and verb-based approaches. 
But it also meant I had to learn enough Perl to solve the N queens problem.</p>
<p>...or, use the <a href="http://rosettacode.org/wiki/N-queens_problem#Perl">Perl solution to the N queens problem from Rosetta Code</a>.</p>
<p>Right...</p>
<p>So here's the plan: study a verb-oriented implementation of this canonical, deceptively subtle programming problem in Perl; 
translate it into a verb-oriented Java program; and run the two head-to-head, using a profiler to understand the results.</p>
<p><a name="pvj-nqueensproblem"></a></p>
<h2>N Queens Problem</h2>
<p>The N queens problem predates computers - it's a chess puzzle that asks: how many ways can you place 8 queens on a chessboard
such that no queen can attack any other queen? </p>
<p>The number of possible configurations of queens on a chessboard is 64 pick 8, or</p>
<p><span class="math">\($
\dfrac{64!}{(64-8)!} = 64 \times 63 \times \dots \times 57 \times 56 = 178,462,987,637,760 
$\)</span></p>
<p>Here's that calculation in Python:</p>
<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="kp">prod</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">64</span><span class="o">-</span><span class="mi">8</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="mi">64</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
<span class="mi">178462987637760</span>
</pre></div>


<p>That's bigger than the net worth of most U.S. Presidents!</p>
<p>If we implemented a dumb brute-force solution that tested each of these configurations, we'd be waiting until the heat death of the universe.</p>
<p>Fortunately, as we place queens on the board we can check if it is an invalid placement, and rule out any configurations that would follow from that choice.
As long as we are making our choices in an orderly fashion, this enables us to rule out most of the nearly 10 quadrillion possibilities. 
If we place queens column-by-column and rule out rows where there are already queens, by keeping track of where queens have already been placed, 
we can reduce the number of possible rows by 1 with each queen placed. The first queen has 8 possible rows where it can be placed,
the second queen has 7 possible rows (excluding the row that the first queen was placed on), and so on. The number of possiblities is:</p>
<p><span class="math">\($
8! = 8 \times 7 \times \dots \times 2 \times 1 = 40,320
$\)</span></p>
<p>A big improvement! Here's that calculation in Python:</p>
<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">fact</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
<span class="o">...</span>     <span class="k">if</span><span class="p">(</span><span class="n">n</span><span class="o">==</span><span class="mi">1</span><span class="p">):</span>
<span class="o">...</span>         <span class="k">return</span> <span class="mi">1</span>
<span class="o">...</span>     <span class="k">else</span><span class="p">:</span>
<span class="o">...</span>         <span class="k">return</span> <span class="n">n</span><span class="o">*</span><span class="n">fact</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">fact</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="mi">40320</span>
</pre></div>


<p>This still-large number of possibilities can be further reduced by using the same procedure, but checking for invalid rows based on the diagonal squares that each already-placed queen attacks.
This covers each precondition for a solved board, and allows the base case of the recursive backtracking method to be as simple as,
"If you've reached this point, you have a valid solution. Add it to the solutions bucket."</p>
<p>Now, let's get to the solution algorithm.</p>
<p><a name="pvj-nqueenssoln"></a></p>
<h2>N Queens Solution</h2>
<p>As a recap, we dusted off our Perl skills to utilize an N queens solution in Perl from <a href="http://rosettacode.org/wiki/N-queens_problem#Perl">Rosetta Code</a>.</p>
<p>Here's the pseudocode:</p>
<div class="highlight"><pre><span></span><span class="nv">explore</span><span class="ss">(</span><span class="nv">column</span><span class="ss">)</span>:
    <span class="k">if</span> <span class="nv">last</span> <span class="nv">column</span>:
        # <span class="nv">base</span> <span class="nv">case</span>
        <span class="nv">add</span> <span class="nv">to</span> <span class="nv">solutions</span>
    <span class="k">else</span>:
        # <span class="nv">recursive</span> <span class="nv">case</span>
        <span class="k">for</span> <span class="nv">each</span> <span class="nv">row</span>:
            <span class="k">if</span> <span class="nv">this</span> <span class="nv">is</span> <span class="nv">a</span> <span class="nv">safe</span> <span class="nv">row</span>:
                <span class="nv">place</span> <span class="nv">queen</span> <span class="nv">on</span> <span class="nv">this</span> <span class="nv">row</span>
                <span class="nv">explore</span><span class="ss">(</span><span class="nv">column</span><span class="o">+</span><span class="mi">1</span><span class="ss">)</span>
                <span class="nv">remove</span> <span class="nv">queen</span> <span class="nv">from</span> <span class="nv">this</span> <span class="nv">row</span>
</pre></div>


<p>Both codes use integer arrays to keep track of where queens are placed. 
Solutions are stringified version of these arrays, consisting of 8 digits.</p>
<p><a name="pvj-perlsoln"></a></p>
<h3>Perl Solution</h3>
<p>After looking at the Rosetta Code solution for a (long) while and marking it up with comments to understand what it was doing, 
I decided it was precisely the kind of verb-oriented solution I wanted to test out to compare Perl and Java.
It uses no objects, but instead relies on fast built-in data structures (arrays), 
for loop expansion (only <code>for my $i (1 .. $N)</code>, no <code>for($i=1; $i&lt;=$N; $i++)</code>),
and basic integer math. The cost of solving the problem comes down to basic indexing and array access.</p>
<p>This is the kind of solution I imagine a human calculator like Alan Turing or John Von Neuman looking at, nodding, and saying, "Makes sense! (And by the way the answer is 92.)"</p>
<p><a href="https://gist.github.com/charlesreid1/4ce97a5f896ff1c89855a5d038d51535">Github gist: nqueens.pl</a></p>
<div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/perl</span>

<span class="c1"># Solve the N queens problem</span>
<span class="c1"># using recursive backtracking.</span>
<span class="c1"># </span>
<span class="c1"># Author: Charles Reid</span>
<span class="c1"># Date: March 2017</span>

<span class="c1"># Create an array to store solutions</span>
<span class="k">my</span> <span class="nv">@solutions</span><span class="p">;</span>

<span class="c1"># Create an array to store where queens have been placed</span>
<span class="k">my</span> <span class="nv">@queens</span><span class="p">;</span>

<span class="c1"># Mark the rows already used (useful for lookup)</span>
<span class="k">my</span> <span class="nv">@occupied</span><span class="p">;</span>

<span class="c1"># explore() implements a recursive, depth-first backtracking method</span>
<span class="k">sub</span> <span class="nf">explore</span> <span class="p">{</span> 
    <span class="c1"># Parameters:</span>
    <span class="c1">#   depth : this is the argument passed by the user</span>

    <span class="c1"># First argument passed to the function is $depth </span>
    <span class="c1"># (how many queens we&#39;ve placed on the board),</span>
    <span class="c1"># so use shift to pop that out of the parameters </span>
    <span class="k">my</span> <span class="p">(</span><span class="nv">$depth</span><span class="p">,</span> <span class="nv">@diag</span><span class="p">)</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>

    <span class="c1"># Explore is a recursive method,</span>
    <span class="c1"># so we need a base case and a recursive case.</span>
    <span class="c1">#</span>
    <span class="c1"># The base case is, we&#39;ve reached a leaf node,</span>
    <span class="c1"># placed 8 queens, and had no problems, </span>
    <span class="c1"># so we found a solution.</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$depth</span><span class="o">==</span><span class="nv">$board_size</span><span class="p">)</span> <span class="p">{</span> 
        <span class="c1"># Here, we store the stringified version of @queens,</span>
        <span class="c1"># which are the row numbers of prior queens. </span>
        <span class="c1"># This is a global variable that is shared across</span>
        <span class="c1"># instances of this recursive function.</span>
        <span class="nb">push</span> <span class="nv">@solutions</span><span class="p">,</span> <span class="s">&quot;@queens\n&quot;</span><span class="p">;</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1"># Mark the squares that are attackable, </span>
    <span class="c1"># so that we can cut down on the search space.</span>
    <span class="nv">$#diag</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="nv">$board_size</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span> <span class="mi">0</span> <span class="o">..</span> <span class="nv">$#queens</span><span class="p">)</span> <span class="p">{</span> 
        <span class="nv">$ix1</span> <span class="o">=</span> <span class="nv">$queens</span><span class="p">[</span><span class="nv">$_</span><span class="p">]</span> <span class="o">+</span> <span class="nv">$depth</span> <span class="o">-</span> <span class="nv">$_</span> <span class="p">;</span>
        <span class="nv">$diag</span><span class="p">[</span> <span class="nv">$ix1</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

        <span class="nv">$ix2</span> <span class="o">=</span> <span class="nv">$queens</span><span class="p">[</span><span class="nv">$_</span><span class="p">]</span> <span class="o">-</span> <span class="nv">$depth</span> <span class="o">+</span> <span class="nv">$_</span> <span class="p">;</span>
        <span class="nv">$diag</span><span class="p">[</span> <span class="nv">$ix2</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="k">my</span> <span class="nv">$row</span> <span class="p">(</span><span class="mi">0</span> <span class="o">..</span> <span class="nv">$board_size</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1"># Cut down on the search space:</span>
        <span class="c1"># if this square is already occupied</span>
        <span class="c1"># or will lead to an invalid solution,</span>
        <span class="c1"># don&#39;t bother exploring it.</span>
        <span class="k">next</span> <span class="k">if</span> <span class="nv">$occupied</span><span class="p">[</span><span class="nv">$row</span><span class="p">]</span> <span class="o">||</span> <span class="nv">$diag</span><span class="p">[</span><span class="nv">$row</span><span class="p">];</span>

        <span class="c1"># Make a choice</span>
        <span class="nb">push</span> <span class="nv">@queens</span><span class="p">,</span> <span class="nv">$row</span><span class="p">;</span>
        <span class="c1"># Mark the square as occupied</span>
        <span class="nv">$occupied</span><span class="p">[</span><span class="nv">$row</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

        <span class="c1"># Explore the consequences</span>
        <span class="n">explore</span><span class="p">(</span><span class="nv">$depth</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>

        <span class="c1"># Unmake the choice</span>
        <span class="nb">pop</span> <span class="nv">@queens</span><span class="p">;</span>

        <span class="c1"># Mark the square as unoccupied</span>
        <span class="nv">$occupied</span><span class="p">[</span><span class="nv">$row</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="p">}</span>
<span class="p">}</span>

<span class="nv">$board_size</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span> 

<span class="n">explore</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

<span class="k">print</span> <span class="s">&quot;total &quot;</span><span class="p">,</span> <span class="nb">scalar</span><span class="p">(</span><span class="nv">@solutions</span><span class="p">),</span> <span class="s">&quot; solutions\n&quot;</span><span class="p">;</span>
</pre></div>


<p><a name="pvj-javasoln"></a></p>
<h3>Java Solution</h3>
<p>Starting with the Rosetta Code solution in Perl, I translated the algorithm into Java, sticking as closely as possible to the Way of the Verb.
I replicated the solution in Java with a minimal amount of object-oriented-ness. 
A Board class simply wraps the same set of arrays and array manipulations that the Perl solution implements directly.
These constitute the lookahead check for safe places to put the queen. </p>
<p>The Java solution implements a static class containing a Linked List to store solutions. 
This is the only use of non-array objects and has a trivial impact on the solution walltime.</p>
<p><a href="https://gist.github.com/charlesreid1/4ce97a5f896ff1c89855a5d038d51535">Github gist: NQueens.java</a></p>
<p>(Verbatim code not included for length.)</p>
<p><a name="pvj-h2hnqueens"></a></p>
<h2>Head to Head: Walltime vs. Number of Queens</h2>
<p><img alt="Graph of walltime versus number of queens" src="/images/perl-vs-java-nqueens.png"></p>
<div class="highlight"><pre><span></span><span class="c1">-----------------------------------------------</span>
<span class="o">|</span><span class="w"> </span><span class="n">NQueens</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Nsolutions</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Java</span><span class="w"> </span><span class="o">[</span><span class="n">s</span><span class="o">]</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">Perl</span><span class="w"> </span><span class="o">[</span><span class="n">s</span><span class="o">]</span><span class="w"> </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="c1">---------|------------|-----------|----------|</span>
<span class="o">|</span><span class="w"> </span><span class="mi">8</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="mi">92</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="mf">0.003</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">0.016</span><span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">9</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="mi">352</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="mf">0.006</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">0.067</span><span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">10</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">724</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="mf">0.017</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">0.259</span><span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">11</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">2680</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="mf">0.061</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">1.542</span><span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">12</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">14200</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mf">0.240</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">8.431</span><span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">13</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">73712</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mf">1.113</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">48.542</span><span class="w">   </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">14</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">365596</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">6.557</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">303.278</span><span class="w">  </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">15</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">2279184</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mf">42.619</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mf">2057.052</span><span class="w"> </span><span class="o">|</span><span class="w"></span>
<span class="c1">-----------------------------------------------</span>
</pre></div>


<p>Java smokes Perl.</p>
<p>Initially I was using the Unix <code>time</code> utility to time these two,
and it seemed to be close for smaller problem sizes (N=9 or smaller) - 
Perl would start up and run faster than Java, measured end-to-end.
But when you time the program by using timers built into the language, 
it removes some of the overhead from the timing comparisons,
and Java becomes the clear winner.</p>
<p>We can dig deeper and understand this comparison better by using some profiling tools.</p>
<p><a name="pvj-perlprof"></a></p>
<h2>Perl Profiling</h2>
<p>I profiled Perl with <code>Devel::NYTProf</code> , 
an excellent Perl module <a href="http://search.cpan.org/~timb/Devel-NYTProf-6.04/lib/Devel/NYTProf.pm">available here on Cpanm</a>.</p>
<p>More details about the profiling tools I used for Perl are on the charlesreid1 wiki at 
<a href="https://charlesreid1.com/wiki/Perl/Profiling">Perl/Profiling</a>. </p>
<p>To run with <code>Devel::NYTProf</code>, use `cpanm:</p>
<div class="highlight"><pre><span></span>$ cpanm Devel::NYTProf
</pre></div>


<p>Now you can run Perl with <code>Devel::NYTProf</code> by doing:</p>
<div class="highlight"><pre><span></span>$ perl -d:NYTProf nqueens.pl
</pre></div>


<p>This results in a binary output file called <code>nytprof.out</code> that can be processed with several 
NYTProf post-processing tools. Use the CSV file tool to begin with:</p>
<div class="highlight"><pre><span></span>$ nytprofcsv nytprof.out
</pre></div>


<p>This puts the CSV file in a folder called <code>nytprof/</code>.</p>
<p><a name="pvj-perlprofresults"></a></p>
<h2>Perl Profiling Results</h2>
<p>The CSV output of the NYTProf module gives a breakdown of 
the amount of time spent in each method call, how many times it was called, and how much time per call was spent.
From this we can see the busiest lines are the lines accessing the arrays, and looping over the rows.
This is confirmation that this algorithm is testing the performance of the arrays,
and confirms the N queens problem is profiling Perl's core performance with its built-in data structures.</p>
<p>The profiling results of the 11 queens problem are shown below.</p>
<div class="highlight"><pre><span></span><span class="c1"># Profile data generated by Devel::NYTProf::Reader</span>
<span class="c1"># Version: v6.04</span>
<span class="c1"># More information at http://metacpan.org/release/Devel-NYTProf/</span>
<span class="c1"># Format: time,calls,time/call,code</span>
<span class="mf">0.000238</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.000119</span><span class="p">,</span><span class="k">use</span> <span class="nn">Time::HiRes</span> <span class="sx">qw(time)</span><span class="p">;</span>
<span class="mf">0.000039</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.000019</span><span class="p">,</span><span class="k">use</span> <span class="nn">strict</span><span class="p">;</span>
<span class="mf">0.000491</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.000246</span><span class="p">,</span><span class="k">use</span> <span class="nn">warnings</span><span class="p">;</span>
<span class="mf">0.000021</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.000021</span><span class="p">,</span><span class="k">my</span> <span class="nv">$start</span> <span class="o">=</span> <span class="nb">time</span><span class="p">;</span>
<span class="mf">0.010338</span><span class="p">,</span><span class="mi">2680</span><span class="p">,</span><span class="mf">0.000004</span><span class="p">,</span><span class="nb">push</span> <span class="nv">@solutions</span><span class="p">,</span> <span class="s">&quot;@queens\n&quot;</span><span class="p">;</span>
<span class="mf">0.009993</span><span class="p">,</span><span class="mi">2680</span><span class="p">,</span><span class="mf">0.000004</span><span class="p">,</span><span class="k">return</span><span class="p">;</span>
<span class="mf">0.186298</span><span class="p">,</span><span class="mi">164246</span><span class="p">,</span><span class="mf">0.000001</span><span class="p">,</span><span class="nv">$#attacked</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="nv">$board_size</span><span class="p">;</span>
<span class="mf">0.150338</span><span class="p">,</span><span class="mi">164246</span><span class="p">,</span><span class="mf">0.000001</span><span class="p">,</span><span class="k">for</span><span class="p">(</span> <span class="mi">0</span> <span class="o">..</span> <span class="nv">$#queens</span><span class="p">)</span> <span class="p">{</span> 
<span class="mf">0.675523</span><span class="p">,</span><span class="mf">1.26035e+06</span><span class="p">,</span><span class="mf">0.000001</span><span class="p">,</span><span class="nv">$attacked</span><span class="p">[</span> <span class="nv">$ix2</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="mf">1.242624</span><span class="p">,</span><span class="mi">164246</span><span class="p">,</span><span class="mf">0.000008</span><span class="p">,</span><span class="k">for</span> <span class="k">my</span> <span class="nv">$row</span> <span class="p">(</span><span class="mi">0</span> <span class="o">..</span> <span class="nv">$board_size</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
<span class="mf">0.267469</span><span class="p">,</span><span class="mi">166925</span><span class="p">,</span><span class="mf">0.000002</span><span class="p">,</span><span class="n">explore</span><span class="p">(</span><span class="nv">$depth</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
<span class="mf">0.125272</span><span class="p">,</span><span class="mi">166925</span><span class="p">,</span><span class="mf">0.000001</span><span class="p">,</span><span class="nv">$occupied</span><span class="p">[</span><span class="nv">$row</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="mf">0.000002</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.000002</span><span class="p">,</span><span class="n">explore</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="mf">0.000011</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.000011</span><span class="p">,</span><span class="k">my</span> <span class="nv">$duration</span> <span class="o">=</span> <span class="nb">time</span> <span class="o">-</span> <span class="nv">$start</span><span class="p">;</span>
<span class="mf">0.000075</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.000075</span><span class="p">,</span><span class="k">print</span> <span class="s">&quot;Found &quot;</span><span class="p">,</span> <span class="nb">scalar</span><span class="p">(</span><span class="nv">@solutions</span><span class="p">),</span> <span class="s">&quot; solutions\n&quot;</span><span class="p">;</span>
<span class="mf">0.000050</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.000050</span><span class="p">,</span><span class="nb">printf</span> <span class="s">&quot;Execution time: %0.3f s \n&quot;</span><span class="p">,</span><span class="nv">$duration</span><span class="p">;</span>
</pre></div>


<p>One of the more interesting pieces of information comes from several lines 
populating the squares that are on the diagonals with other queens (<code>$attacked</code>):</p>
<div class="highlight"><pre><span></span><span class="o">#</span> <span class="n">Format</span><span class="p">:</span> <span class="n">time</span><span class="p">,</span><span class="n">calls</span><span class="p">,</span><span class="n">time</span><span class="o">/</span><span class="k">call</span><span class="p">,</span><span class="n">code</span>
<span class="mi">0</span><span class="p">.</span><span class="mi">186298</span><span class="p">,</span><span class="mi">164246</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">000001</span><span class="p">,</span><span class="err">$</span><span class="o">#</span><span class="n">attacked</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="err">$</span><span class="n">board_size</span><span class="p">;</span>
</pre></div>


<p>The second column gives the number of times this line is executed - 164,246.
This is actually the number of solutions that are tried,
excluding the deepest depth of the tree (the base recursive case).</p>
<p>The Java profiler will show us that Java explores the exact same number of solutions,
which is confirmation that these tests are comparing the two languages on equal footing.</p>
<p><a name="pvj-javaprof"></a></p>
<h2>Java Profiling</h2>
<p>More details about the profiling tools I used for Java are on the charlesreid1 wiki at 
<a href="https://charlesreid1.com/wiki/Java/Profiling">Java/Profiling</a></p>
<p>I profiled Java with two tools, the <a href="http://jiprof.sourceforge.net/">Java Interactive Profiler (JIP)</a>
and the <a href="https://docs.oracle.com/javase/7/docs/technotes/samples/hprof.html">HPROF tool</a> 
that Oracle provides with Java.</p>
<p>No special compiler flags are needed, so compile as normal:</p>
<div class="highlight"><pre><span></span>$ javac NQueens.java
</pre></div>


<p>If you are profiling with JIP, you want the JIP jar, as described on the wiki: <a href="https://charlesreid1.com/wiki/Java/Profiling">Java/Profiling</a> 
Then run Java with the <code>-javaagent</code> flag:</p>
<div class="highlight"><pre><span></span>$ <span class="nb">export</span> <span class="nv">PATH2JIP</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span><span class="s2">/Downloads/jip&quot;</span>
$ java -javaagent:<span class="si">${</span><span class="nv">PATH2JIP</span><span class="si">}</span>/profile/profile.jar NQueens
</pre></div>


<p>This results in a <code>profile.txt</code> file with detailed profiling information
(an example is shown below).</p>
<p>The HPROF tool likewise requires no special compiler flags. 
It can be run with various options from the command line. 
Here's a basic usage of HPROF that will reduce the amount of output slightly,
making the size of the output file a little smaller:</p>
<div class="highlight"><pre><span></span>$ java -agentlib:hprof<span class="o">=</span><span class="nv">verbose</span><span class="o">=</span>n NQueens
</pre></div>


<p>This dumps out a file called <code>java.hprof.txt</code> that contains a significant amount of information.
The most useful, though, is at the end, so use tail to get a quick overview of the results:</p>
<div class="highlight"><pre><span></span>$ tail -n <span class="m">100</span> java.hprof.txt
</pre></div>


<p><a name="pvj-javaprof"></a></p>
<h2>Java Profiling Results</h2>
<p>The profiling results from JIP for the 11 queens problem are shown below.</p>
<div class="highlight"><pre><span></span><span class="o">+</span><span class="c1">----------------------------------------------------------------------</span>
<span class="o">|</span>  <span class="n">File</span><span class="p">:</span> <span class="n">profile</span><span class="p">.</span><span class="n">txt</span>
<span class="o">|</span>  <span class="nb">Date</span><span class="p">:</span> <span class="mi">2017</span><span class="p">.</span><span class="mi">03</span><span class="p">.</span><span class="mi">19</span> <span class="mi">19</span><span class="p">:</span><span class="mi">34</span><span class="p">:</span><span class="mi">18</span> <span class="n">PM</span>
<span class="o">+</span><span class="c1">----------------------------------------------------------------------</span>

<span class="o">+</span><span class="c1">--------------------------------------+</span>
<span class="o">|</span> <span class="n">Most</span> <span class="n">expensive</span> <span class="n">methods</span> <span class="n">summarized</span>    <span class="o">|</span>
<span class="o">+</span><span class="c1">--------------------------------------+</span>

               <span class="n">Net</span>
          <span class="c1">------------</span>
 <span class="k">Count</span>     <span class="n">Time</span>    <span class="n">Pct</span>  <span class="k">Location</span>
 <span class="o">=====</span>     <span class="o">====</span>    <span class="o">===</span>  <span class="o">========</span>
<span class="mi">166926</span>    <span class="mi">909</span><span class="p">.</span><span class="mi">5</span>   <span class="mi">82</span><span class="p">.</span><span class="mi">2</span>  <span class="n">NQueens</span><span class="p">:</span><span class="n">explore</span>
<span class="mi">164246</span>     <span class="mi">55</span><span class="p">.</span><span class="mi">6</span>    <span class="mi">5</span><span class="p">.</span><span class="mi">0</span>  <span class="n">Board</span><span class="p">:</span><span class="n">getDiagAttacked</span>
<span class="mi">166925</span>     <span class="mi">41</span><span class="p">.</span><span class="mi">4</span>    <span class="mi">3</span><span class="p">.</span><span class="mi">7</span>  <span class="n">Board</span><span class="p">:</span><span class="n">unchoose</span>
<span class="mi">166925</span>     <span class="mi">40</span><span class="p">.</span><span class="mi">7</span>    <span class="mi">3</span><span class="p">.</span><span class="mi">7</span>  <span class="n">Board</span><span class="p">:</span><span class="n">choose</span>
<span class="mi">164246</span>     <span class="mi">31</span><span class="p">.</span><span class="mi">0</span>    <span class="mi">2</span><span class="p">.</span><span class="mi">8</span>  <span class="n">Board</span><span class="p">:</span><span class="n">getOccupied</span>
     <span class="mi">1</span>     <span class="mi">18</span><span class="p">.</span><span class="mi">2</span>    <span class="mi">1</span><span class="p">.</span><span class="mi">6</span>  <span class="n">NQueens</span><span class="p">:</span><span class="n">main</span>
  <span class="mi">2680</span>      <span class="mi">7</span><span class="p">.</span><span class="mi">3</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">7</span>  <span class="n">Board</span><span class="p">:</span><span class="n">toString</span>
  <span class="mi">2680</span>      <span class="mi">2</span><span class="p">.</span><span class="mi">3</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">2</span>  <span class="n">SolutionSaver</span><span class="p">:</span><span class="n">saveSolution</span>
     <span class="mi">1</span>      <span class="mi">0</span><span class="p">.</span><span class="mi">2</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">0</span>  <span class="n">SolutionSaver</span><span class="p">:</span><span class="n">nSolutions</span>
     <span class="mi">1</span>      <span class="mi">0</span><span class="p">.</span><span class="mi">1</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">0</span>  <span class="n">SolutionSaver</span><span class="p">:</span><span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;</span>
     <span class="mi">1</span>      <span class="mi">0</span><span class="p">.</span><span class="mi">0</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">0</span>  <span class="n">Board</span><span class="p">:</span><span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;</span>
</pre></div>


<p>From this output we can see that the method getDiagAttacked, 
which is called each time we check a solution in the recursive case,
is called 164,246 times - exactly the same number of solutions that the Perl profiler showed.
One of the downsides of the JIP profiler is that it only gives high-level 
profiling information about methods and classes - it stops there.</p>
<p>Fortunately, however, the HPROF tool picks up where JIP leaves off.
The HPROF tool makes the program much slower but yields a huge amount of information.
In addition to an enormous heap dump of all objects appearing on Java's heap at any point,
it also shows where the time was spent in the low-level methods.</p>
<div class="highlight"><pre><span></span><span class="nv">SITES</span> <span class="nv">BEGIN</span> <span class="ss">(</span><span class="nv">ordered</span> <span class="nv">by</span> <span class="nv">live</span> <span class="nv">bytes</span><span class="ss">)</span> <span class="nv">Sun</span> <span class="nv">Mar</span> <span class="mi">19</span> <span class="mi">19</span>:<span class="mi">34</span>:<span class="mi">21</span> <span class="mi">2017</span>
          <span class="nv">percent</span>          <span class="nv">live</span>          <span class="nv">alloc</span><span class="s1">&#39;</span><span class="s">ed  stack class</span>
 <span class="nv">rank</span>   <span class="nv">self</span>  <span class="nv">accum</span>     <span class="nv">bytes</span> <span class="nv">objs</span>     <span class="nv">bytes</span>  <span class="nv">objs</span> <span class="nv">trace</span> <span class="nv">name</span>
    <span class="mi">1</span> <span class="mi">86</span>.<span class="mi">01</span><span class="o">%</span> <span class="mi">86</span>.<span class="mi">01</span><span class="o">%</span>  <span class="mi">10510976</span> <span class="mi">164234</span>  <span class="mi">10510976</span> <span class="mi">164234</span> <span class="mi">300462</span> <span class="nv">int</span>[]
    <span class="mi">2</span>  <span class="mi">1</span>.<span class="mi">93</span><span class="o">%</span> <span class="mi">87</span>.<span class="mi">94</span><span class="o">%</span>    <span class="mi">235840</span> <span class="mi">2680</span>    <span class="mi">235840</span>  <span class="mi">2680</span> <span class="mi">300467</span> <span class="nv">char</span>[]
    <span class="mi">3</span>  <span class="mi">1</span>.<span class="mi">09</span><span class="o">%</span> <span class="mi">89</span>.<span class="mi">03</span><span class="o">%</span>    <span class="mi">133320</span> <span class="mi">1515</span>    <span class="mi">133320</span>  <span class="mi">1515</span> <span class="mi">300465</span> <span class="nv">char</span>[]
    <span class="mi">4</span>  <span class="mi">1</span>.<span class="mi">07</span><span class="o">%</span> <span class="mi">90</span>.<span class="mi">11</span><span class="o">%</span>    <span class="mi">131200</span>    <span class="mi">8</span>    <span class="mi">131200</span>     <span class="mi">8</span> <span class="mi">300263</span> <span class="nv">char</span>[]
    <span class="mi">5</span>  <span class="mi">1</span>.<span class="mi">05</span><span class="o">%</span> <span class="mi">91</span>.<span class="mi">16</span><span class="o">%</span>    <span class="mi">128640</span> <span class="mi">2680</span>    <span class="mi">128640</span>  <span class="mi">2680</span> <span class="mi">300464</span> <span class="nv">char</span>[]
    <span class="mi">6</span>  <span class="mi">1</span>.<span class="mi">04</span><span class="o">%</span> <span class="mi">92</span>.<span class="mi">20</span><span class="o">%</span>    <span class="mi">127560</span> <span class="mi">1313</span>    <span class="mi">127560</span>  <span class="mi">1313</span> <span class="mi">300010</span> <span class="nv">char</span>[]
    <span class="mi">7</span>  <span class="mi">0</span>.<span class="mi">76</span><span class="o">%</span> <span class="mi">92</span>.<span class="mi">96</span><span class="o">%</span>     <span class="mi">92728</span> <span class="mi">1009</span>     <span class="mi">92728</span>  <span class="mi">1009</span> <span class="mi">300000</span> <span class="nv">char</span>[]
    <span class="mi">8</span>  <span class="mi">0</span>.<span class="mi">54</span><span class="o">%</span> <span class="mi">93</span>.<span class="mi">50</span><span class="o">%</span>     <span class="mi">65664</span>    <span class="mi">8</span>     <span class="mi">65664</span>     <span class="mi">8</span> <span class="mi">300260</span> <span class="nv">byte</span>[]
    <span class="mi">9</span>  <span class="mi">0</span>.<span class="mi">53</span><span class="o">%</span> <span class="mi">94</span>.<span class="mi">02</span><span class="o">%</span>     <span class="mi">64320</span> <span class="mi">2680</span>     <span class="mi">64320</span>  <span class="mi">2680</span> <span class="mi">300468</span> <span class="nv">java</span>.<span class="nv">util</span>.<span class="nv">LinkedList</span>$<span class="nv">Node</span>
   <span class="mi">10</span>  <span class="mi">0</span>.<span class="mi">53</span><span class="o">%</span> <span class="mi">94</span>.<span class="mi">55</span><span class="o">%</span>     <span class="mi">64320</span> <span class="mi">2680</span>     <span class="mi">64320</span>  <span class="mi">2680</span> <span class="mi">300466</span> <span class="nv">java</span>.<span class="nv">lang</span>.<span class="nv">String</span>
<span class="nv">SITES</span> <span class="k">END</span>
</pre></div>


<p>HPROF tells us that over 86% of the time spent on this program was spent accessing integer arrays.
Again, confirmation that we are getting a fair measurement of Java's performance with a core data type, the integer array.</p>
<p><a name="pvj-h2hntested"></a></p>
<h2>Head to Head: Walltime vs. Number of Solutions Tested</h2>
<p>Using the results of the profilers from each N queens problem, <code>N = 8 .. 15</code>, 
I extracted the total number of solutions tried, and confirmed that these numbers were the same 
between Java and Perl for each of the problem sizes.</p>
<p>Here is a table of the number of solutions found, and number of solutions tried, versus problem size:</p>
<div class="highlight"><pre><span></span><span class="c1">-------------------------------------------------------------</span>
<span class="o">|</span><span class="w"> </span><span class="n">NQueens</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Nsolutions</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Ntested</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">Java</span><span class="w"> </span><span class="o">[</span><span class="n">s</span><span class="o">]</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">Perl</span><span class="w"> </span><span class="o">[</span><span class="n">s</span><span class="o">]</span><span class="w"> </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="c1">---------|------------|-------------|-----------|----------|</span>
<span class="o">|</span><span class="w"> </span><span class="mi">8</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="mi">92</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="mi">1965</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="mf">0.003</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">0.016</span><span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">9</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="mi">352</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="mi">8042</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="mf">0.006</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">0.067</span><span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">10</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">724</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="mi">34815</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="mf">0.017</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">0.259</span><span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">11</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">2680</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="mi">164246</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mf">0.061</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">1.542</span><span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">12</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">14200</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">841989</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mf">0.240</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">8.431</span><span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">13</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">73712</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">4601178</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">1.113</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">48.542</span><span class="w">   </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">14</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">365596</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">26992957</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mf">6.557</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">303.278</span><span class="w">  </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">15</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">2279184</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">168849888</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mf">42.619</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mf">2057.052</span><span class="w"> </span><span class="o">|</span><span class="w"></span>
<span class="c1">-------------------------------------------------------------</span>
</pre></div>


<p>When the wall time for Java and Perl are plotted against the number of solutions tested,
an interesting trend emerges: the two scale the same way, with a fixed vertical offset.</p>
<p><img alt="Graph of walltime versus number of solutions tested" src="/images/perl-vs-java-ntested.png"></p>
<p>While this is proving what we already knew, 
that a compiled language beats a scripted language every time,
it also provides proof Perl can scale as well as Java - 
it just takes significantly more overhead and time per statement.</p>
<p><a name="pvj-applesoranges"></a></p>
<h2>Why Java Beat Perl</h2>
<p>Compiled languages are turned into bytecode and pre-optimized for the processor.</p>
<p>Perl is a scripted and interpreted language, like Python, evaluated piece by piece.</p>
<p>So, we didn't learn anything surprising. But we did find an interesting result - 
Perl can scale as well as Java in its implementation of the N queens recursive backtracking algorithm.</p>
<p><a name="pvj-sources"></a></p>
<h2>Sources</h2>
<ol>
<li>
<p>"Execution in the Kingdom of Nouns". Steve Yegge. March 2006. Accessed 18 March 2017.
&lt;<a href="https://web.archive.org/web/20170320081755/https://steve-yegge.blogspot.com/2006/03/execution-in-kingdom-of-nouns.html">https://web.archive.org/web/20170320081755/https://steve-yegge.blogspot.com/2006/03/execution-in-kingdom-of-nouns.html</a>&gt;</p>
</li>
<li>
<p>"N-Queens Problem". Rosetta Code, GNU Free Documentation License. Edited 6 March 2017. Accessed 21 March 2017.
&lt;<a href="https://web.archive.org/web/20170320081421/http://rosettacode.org/wiki/N-queens_problem">https://web.archive.org/web/20170320081421/http://rosettacode.org/wiki/N-queens_problem</a>&gt;</p>
</li>
<li>
<p>"nqueens.pl". Charles Reid. Github Gist, Github Inc. Edited 20 March 2017. Accessed 20 March 2017.
&lt;<a href="https://gist.github.com/charlesreid1/4ce97a5f896ff1c89855a5d038d51535">https://gist.github.com/charlesreid1/4ce97a5f896ff1c89855a5d038d51535</a>&gt;</p>
</li>
<li>
<p>"NQueens.java". Charles Reid. Github Gist, Github Inc. Edited 20 March 2017. Accessed 20 March 2017.
&lt;<a href="https://gist.github.com/charlesreid1/7b8d7b9dffb7b3090039849d72c5fff5">https://gist.github.com/charlesreid1/7b8d7b9dffb7b3090039849d72c5fff5</a>&gt;</p>
</li>
<li>
<p>"Devel::NYTProf". Adam Kaplan, Tim Bunce. Copyright 2008-2016, Tim Bunce. Published 4 March 2008. Accessed 20 March 2017.
&lt;<a href="https://web.archive.org/web/20170320081508/http://search.cpan.org/~timb/Devel-NYTProf-6.04/lib/Devel/NYTProf.pm">https://web.archive.org/web/20170320081508/http://search.cpan.org/~timb/Devel-NYTProf-6.04/lib/Devel/NYTProf.pm</a>&gt;</p>
</li>
<li>
<p>"Perl/Profiling". Charles Reid. Edited 20 March 2017. Accessed 20 March 2017.
&lt;<a href="https://web.archive.org/web/20170320081532/https://charlesreid1.com/wiki/Perl/Profiling">https://web.archive.org/web/20170320081532/https://charlesreid1.com/wiki/Perl/Profiling</a>&gt;</p>
</li>
<li>
<p>"Java/Profiling". Charles Reid. Edited 20 March 2017. Accessed 20 March 2017.
&lt;<a href="https://web.archive.org/web/20170320081535/https://charlesreid1.com/wiki/Java/Profiling">https://web.archive.org/web/20170320081535/https://charlesreid1.com/wiki/Java/Profiling</a>&gt;</p>
</li>
<li>
<p>"JIP - The Java Interactive Profiler." Andrew Wilcox. Published 30 April 2010. Accessed 20 March 2017.
&lt;<a href="https://web.archive.org/web/20170320081538/http://jiprof.sourceforge.net/">https://web.archive.org/web/20170320081538/http://jiprof.sourceforge.net/</a>&gt;</p>
</li>
<li>
<p>"HPROF". Oracle Corporation. Copyright 1993, 2016. Published 2016. Accessed 20 March 2017.
&lt;<a href="https://web.archive.org/web/20170320081540/https://docs.oracle.com/javase/7/docs/technotes/samples/hprof.html">https://web.archive.org/web/20170320081540/https://docs.oracle.com/javase/7/docs/technotes/samples/hprof.html</a>&gt;</p>
</li>
</ol>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script></div>

    </div>
</div>

<div class="v20"></div>

<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="tags">
            <p>Tags:&nbsp;&nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/java.html">java</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/perl.html">perl</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/algorithms.html">algorithms</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/recursion.html">recursion</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/n-queens.html">n-queens</a>
                    &nbsp;&nbsp;
        </div>

    </div>
</div>


<div class="v200"></div>
  	            	</article>
  	            	<article>
<header>
<div class="row">


    <div class="col-md-12">
        <div class="headtext" style="text-align: center;">
            <h1><b>
                Enigma Cipher Implementation: Part 4: Combinatorics
            </b></h1>
        
            <p class="lead">
                Posted 
                <time datetime="2017-03-22T19:00:00-07:00" pubdate>Wednesday 03/22/2017</time>
                in 
                <a href="https://charlesreid1.github.io/category/enigma.html">Enigma</a>
                </p>
            <p>
            <span style="font-size: 14px">
                <a href="https://charlesreid1.github.io/enigma-cipher-implementation-part-4-combinatorics.html">permalink</a>
            </span>
            </p>
        </div>

    </div>

</div>
</header>


<div class="v50"></div>


<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="entry-content"><p>In this, the fourth article in a series on implementing the Enigma cipher in Java,
we use some big number libraries to explore the combinatorics of the Enigma encryption scheme
and better understand the Enigma's strengths and weaknesses. </p>
<h2>Table of Contents</h2>
<ul>
<li><a href="#keyspace">The Key Space</a></li>
<li><a href="#switchboard">The Switchboard</a><ul>
<li><a href="#onecable">One Cable</a></li>
<li><a href="#morecables">More Cables</a></li>
<li><a href="#manycables">Many Cables</a></li>
<li><a href="#dupes">Accounting for Duplicates</a></li>
<li><a href="#finalswitchboard">Final Combination Count for Switchboard</a></li>
</ul>
</li>
<li><a href="#rotors">The Rotors</a><ul>
<li><a href="#finalrotors">Final Combination Count for Rotors</a></li>
</ul>
</li>
<li><a href="#reflector">The Reflector</a><ul>
<li><a href="#finalreflector">Final Combination Count for Reflector</a></li>
</ul>
</li>
<li><a href="#finalcount">Final Enigma Combination Count</a><ul>
<li><a href="#javabigint">Java BigInteger Combinations Program</a></li>
</ul>
</li>
<li><a href="#sources">Sources</a></li>
</ul>
<p><a name="keyspace"></a></p>
<h2>The Key Space</h2>
<p>Basically, what the Enigma did was to encrypt each character of a message one at a time, using a different, unique key for each character. 
One key corresponded to one particular scrambled version of the alphabet (one possible set of substitutions). 
The huge number of possible initial settings for the machine - the rotors, wiring, and reflector - meant that finding the very first key was extremely difficult. 
Furthermore, as the operator entered additional characters into the Enigma, the machine would rotate the rotor wheels, 
sequentially stepping through the space of possible keys in a totally random but deterministic way. 
Any operator with a matching Enigma machine and matching settings could replicate this "random walk" through the key space.</p>
<p>What we will do below is look at each component of the Enigma and determine the total number of 
unique settings for each component. A single machine setting corresponds to a single key, 
so the total number of possible settings of the machine yields the total number of possible keys for the Enigma.</p>
<p><a name="switchboard"></a></p>
<h2>The Switchboard</h2>
<p>The switchboard at the front of the Enigma consisted of a set of plugs, one for each letter, connected by wires.
The operator would connect pairs of wires to swap pairs of letters. If the letters A and K were connected, 
any A signal entering the keyboard would become a K signal leaving the keyboard, 
and any K signal entering the keyboard would become an A signal leaving the keyboard.
Letters could not be connected to themselves, and a wire could only connect two letters together.</p>
<p>From these constraints, we can get the total number of cable configurations on the front of the machine.
For a machine with <span class="math">\(S\)</span> symbols (typically 26) and <span class="math">\(N\)</span> patch cables, the total number of configurations is:</p>
<p><span class="math">\($
C_{sw} = \dfrac{ S! }{ N! \times (S - 2N)! \times 2^N }
$\)</span></p>
<p>Let's break down where those terms are coming from.</p>
<p><a name="onecable"></a></p>
<h3>One Cable</h3>
<p>Let's consider a single cable connecting two letters. </p>
<p>There are S (or, 26) places to plug in the left end, and S places to plug in the right end, for a total of <span class="math">\(S^2\)</span> combinations.
But no cable can connect to itself, so there are actually <span class="math">\(S (S-1)\)</span> possible combinations. 
Furthermore, each plug is symmetric (if A connects to B, then B connects to A), so half of the plug combinations are simply mirror images of the other half.</p>
<p>For a single plug, we start from a total of <span class="math">\(26 \times 26 = 676\)</span> possible configurations.
Ruling out any combinations that connect letters to themselves eliminates 26 possibilities (A connects to A, B connects to B, etc.)
for a total of <span class="math">\(26 \times 25 = 650\)</span> possible configurations.
But half of those configurations are mirror images of the other half (if we connect A to B, by implication we connect B to A),
so our number of choices is actually half that, or <span class="math">\(\frac{26 \times 25}{2} = 350\)</span>.</p>
<p><a name="morecables"></a></p>
<h3>More Cables</h3>
<p>If we plug in a second cable, there are now 2 choices occupied by the first letter, 
so there are <span class="math">\(S-2\)</span> possible places to plug in the left end,
and <span class="math">\(S-3\)</span> possible places to plug in the right end,
but each having half duplicate solutions, since the wires are two-way,
for a total of <span class="math">\(\frac{(S-2)(S-3)}{2 \times 2}\)</span> combinations.</p>
<p><a name="manycables"></a></p>
<h3>Many Cables</h3>
<p>Once <span class="math">\(N\)</span> wires have been plugged in, there are <span class="math">\(S - 2N\)</span> spaces remaining, and <span class="math">\(2N\)</span> spaces occupied by plug ends. 
That is, we are reducing the number of choices by 2 letters with each wire placed.</p>
<p>Taking the product of these numbers explains part of the expression given above: </p>
<p><span class="math">\($
S \times (S-1) \times (S-2) \times \dots \times (S - 2N + 1) = \dfrac{ S! }{ (S - 2N) ! }
$\)</span> </p>
<p><a name="dupes"></a></p>
<h3>Accounting for Duplicates</h3>
<p>But where did the <span class="math">\(2^N\)</span> and <span class="math">\(N!\)</span> terms come from? They come from the fact that many choices of wiring configurations are duplicates.</p>
<p>Dividing by <span class="math">\(2^N\)</span> comes from the fact that the wires are doubled up: if A connects to B, B connects to A.
This means that when we choose our pair and connect A to B using a wire, we also connect B to A. 
Even though it looks like two choices, it is only one!</p>
<p>Meanwhile, the <span class="math">\(N!\)</span> term accounts for the fact that order is not important when we select pairs and place wires -
making the choice to connect A to B and then making the choice to connect C to D 
is entirely equivalent to connecting C to D, then connecting A to B.
This means that <span class="math">\(N!\)</span> of the <span class="math">\(S!\)</span> possible solutions are duplicate configurations 
with the same connections chosen in a different order.</p>
<p><a name="moreinteresting"></a></p>
<h3>Switchboard Combinations</h3>
<p>Here's how the number of possible combinations that result when we plug in various numbers of wires in: </p>
<div class="highlight"><pre><span></span><span class="n">S</span> <span class="o">=</span> <span class="mi">2</span>       <span class="n">N</span> <span class="o">=</span> <span class="mi">1</span>       <span class="k">C</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">26</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">1</span>       <span class="k">C</span> <span class="o">=</span> <span class="mi">325</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">26</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">2</span>       <span class="k">C</span> <span class="o">=</span> <span class="mi">44</span><span class="p">,</span><span class="mi">850</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">26</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">3</span>       <span class="k">C</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span><span class="mi">453</span><span class="p">,</span><span class="mi">450</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">26</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">4</span>       <span class="k">C</span> <span class="o">=</span> <span class="mi">164</span><span class="p">,</span><span class="mi">038</span><span class="p">,</span><span class="mi">875</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">26</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">5</span>       <span class="k">C</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span><span class="mi">019</span><span class="p">,</span><span class="mi">589</span><span class="p">,</span><span class="mi">575</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">26</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">6</span>       <span class="k">C</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span><span class="mi">391</span><span class="p">,</span><span class="mi">791</span><span class="p">,</span><span class="mi">500</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">26</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">7</span>       <span class="k">C</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span><span class="mi">305</span><span class="p">,</span><span class="mi">093</span><span class="p">,</span><span class="mi">289</span><span class="p">,</span><span class="mi">500</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">26</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">8</span>       <span class="k">C</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span><span class="mi">767</span><span class="p">,</span><span class="mi">019</span><span class="p">,</span><span class="mi">638</span><span class="p">,</span><span class="mi">375</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">26</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">9</span>       <span class="k">C</span> <span class="o">=</span> <span class="mi">53</span><span class="p">,</span><span class="mi">835</span><span class="p">,</span><span class="mi">098</span><span class="p">,</span><span class="mi">191</span><span class="p">,</span><span class="mi">875</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">26</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">10</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">150</span><span class="p">,</span><span class="mi">738</span><span class="p">,</span><span class="mi">274</span><span class="p">,</span><span class="mi">937</span><span class="p">,</span><span class="mi">250</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">26</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">11</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">205</span><span class="p">,</span><span class="mi">552</span><span class="p">,</span><span class="mi">193</span><span class="p">,</span><span class="mi">096</span><span class="p">,</span><span class="mi">250</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">26</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">12</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">102</span><span class="p">,</span><span class="mi">776</span><span class="p">,</span><span class="mi">096</span><span class="p">,</span><span class="mi">548</span><span class="p">,</span><span class="mi">125</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">26</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">13</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span><span class="mi">905</span><span class="p">,</span><span class="mi">853</span><span class="p">,</span><span class="mi">580</span><span class="p">,</span><span class="mi">625</span>
</pre></div>


<p>Notice the bump in the shape of the distribution, meaning the use of 11 wires is much more secure than the use of 13 wires.
Let's explore that.</p>
<h3>More Interesting Observations About the Switchboard</h3>
<p>Notice how the switchboard expression is <em>not</em> proportional to <span class="math">\(N\)</span>,
it is inversely proportional to two different terms, each changing differently
as <span class="math">\(N\)</span> changes.</p>
<p>We are looking at the denominator of this expression:</p>
<p><span class="math">\($
C_{sw} = \dfrac{ S! }{ N! \times (S - 2N)! \times 2^N }
$\)</span></p>
<p>The term <span class="math">\(N!\)</span> on the bottom will increase as <span class="math">\(N\)</span> increases, thereby decreasing the total number of possible keys <span class="math">\(C_{sw}\)</span>.
However, the term <span class="math">\((S - 2N)!\)</span> will decrease as <span class="math">\(N\)</span> increases, thereby increasing the total number of possible keys <span class="math">\(C_{sw}\)</span>.
The tradeoff can be visualized just by printing it out - here are the total number of combinations that are possible
for an alphabet of <span class="math">\(S = 26\)</span> symbols, using <span class="math">\(N = 1 \dots 13\)</span> wires:</p>
<p>This pattern holds for other alphabet sizes. Here's a 52-character alphabet:</p>
<div class="highlight"><pre><span></span><span class="n">S</span> <span class="o">=</span> <span class="mi">52</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">1</span>       <span class="k">C</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span><span class="mi">326</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">52</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">2</span>       <span class="k">C</span> <span class="o">=</span> <span class="mi">812</span><span class="p">,</span><span class="mi">175</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">52</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">3</span>       <span class="k">C</span> <span class="o">=</span> <span class="mi">305</span><span class="p">,</span><span class="mi">377</span><span class="p">,</span><span class="mi">800</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">52</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">4</span>       <span class="k">C</span> <span class="o">=</span> <span class="mi">79</span><span class="p">,</span><span class="mi">016</span><span class="p">,</span><span class="mi">505</span><span class="p">,</span><span class="mi">750</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">52</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">5</span>       <span class="k">C</span> <span class="o">=</span> <span class="mi">14</span><span class="p">,</span><span class="mi">949</span><span class="p">,</span><span class="mi">922</span><span class="p">,</span><span class="mi">887</span><span class="p">,</span><span class="mi">900</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">52</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">6</span>       <span class="k">C</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span><span class="mi">145</span><span class="p">,</span><span class="mi">313</span><span class="p">,</span><span class="mi">934</span><span class="p">,</span><span class="mi">413</span><span class="p">,</span><span class="mi">650</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">52</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">7</span>       <span class="k">C</span> <span class="o">=</span> <span class="mi">239</span><span class="p">,</span><span class="mi">049</span><span class="p">,</span><span class="mi">266</span><span class="p">,</span><span class="mi">977</span><span class="p">,</span><span class="mi">521</span><span class="p">,</span><span class="mi">000</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">52</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">8</span>       <span class="k">C</span> <span class="o">=</span> <span class="mi">21</span><span class="p">,</span><span class="mi">006</span><span class="p">,</span><span class="mi">454</span><span class="p">,</span><span class="mi">335</span><span class="p">,</span><span class="mi">649</span><span class="p">,</span><span class="mi">657</span><span class="p">,</span><span class="mi">875</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">52</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">9</span>       <span class="k">C</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span><span class="mi">470</span><span class="p">,</span><span class="mi">451</span><span class="p">,</span><span class="mi">803</span><span class="p">,</span><span class="mi">495</span><span class="p">,</span><span class="mi">476</span><span class="p">,</span><span class="mi">051</span><span class="p">,</span><span class="mi">250</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">52</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">10</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">82</span><span class="p">,</span><span class="mi">492</span><span class="p">,</span><span class="mi">346</span><span class="p">,</span><span class="mi">176</span><span class="p">,</span><span class="mi">096</span><span class="p">,</span><span class="mi">206</span><span class="p">,</span><span class="mi">475</span><span class="p">,</span><span class="mi">125</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">52</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">11</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span><span class="mi">719</span><span class="p">,</span><span class="mi">654</span><span class="p">,</span><span class="mi">882</span><span class="p">,</span><span class="mi">122</span><span class="p">,</span><span class="mi">156</span><span class="p">,</span><span class="mi">219</span><span class="p">,</span><span class="mi">242</span><span class="p">,</span><span class="mi">000</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">52</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">12</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">134</span><span class="p">,</span><span class="mi">837</span><span class="p">,</span><span class="mi">489</span><span class="p">,</span><span class="mi">476</span><span class="p">,</span><span class="mi">928</span><span class="p">,</span><span class="mi">162</span><span class="p">,</span><span class="mi">947</span><span class="p">,</span><span class="mi">522</span><span class="p">,</span><span class="mi">500</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">52</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">13</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span><span class="mi">920</span><span class="p">,</span><span class="mi">659</span><span class="p">,</span><span class="mi">309</span><span class="p">,</span><span class="mi">406</span><span class="p">,</span><span class="mi">065</span><span class="p">,</span><span class="mi">045</span><span class="p">,</span><span class="mi">704</span><span class="p">,</span><span class="mi">885</span><span class="p">,</span><span class="mi">000</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">52</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">14</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">91</span><span class="p">,</span><span class="mi">015</span><span class="p">,</span><span class="mi">305</span><span class="p">,</span><span class="mi">396</span><span class="p">,</span><span class="mi">926</span><span class="p">,</span><span class="mi">509</span><span class="p">,</span><span class="mi">989</span><span class="p">,</span><span class="mi">577</span><span class="p">,</span><span class="mi">687</span><span class="p">,</span><span class="mi">500</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">52</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">15</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span><span class="mi">674</span><span class="p">,</span><span class="mi">681</span><span class="p">,</span><span class="mi">619</span><span class="p">,</span><span class="mi">303</span><span class="p">,</span><span class="mi">447</span><span class="p">,</span><span class="mi">783</span><span class="p">,</span><span class="mi">808</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">450</span><span class="p">,</span><span class="mi">000</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">52</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">16</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">24</span><span class="p">,</span><span class="mi">178</span><span class="p">,</span><span class="mi">215</span><span class="p">,</span><span class="mi">878</span><span class="p">,</span><span class="mi">693</span><span class="p">,</span><span class="mi">527</span><span class="p">,</span><span class="mi">378</span><span class="p">,</span><span class="mi">731</span><span class="p">,</span><span class="mi">312</span><span class="p">,</span><span class="mi">684</span><span class="p">,</span><span class="mi">375</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">52</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">17</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">270</span><span class="p">,</span><span class="mi">227</span><span class="p">,</span><span class="mi">118</span><span class="p">,</span><span class="mi">644</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">776</span><span class="p">,</span><span class="mi">585</span><span class="p">,</span><span class="mi">820</span><span class="p">,</span><span class="mi">553</span><span class="p">,</span><span class="mi">531</span><span class="p">,</span><span class="mi">250</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">52</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">18</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span><span class="mi">296</span><span class="p">,</span><span class="mi">930</span><span class="p">,</span><span class="mi">508</span><span class="p">,</span><span class="mi">475</span><span class="p">,</span><span class="mi">885</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">979</span><span class="p">,</span><span class="mi">474</span><span class="p">,</span><span class="mi">705</span><span class="p">,</span><span class="mi">015</span><span class="p">,</span><span class="mi">625</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">52</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">19</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">14</span><span class="p">,</span><span class="mi">506</span><span class="p">,</span><span class="mi">929</span><span class="p">,</span><span class="mi">527</span><span class="p">,</span><span class="mi">216</span><span class="p">,</span><span class="mi">116</span><span class="p">,</span><span class="mi">427</span><span class="p">,</span><span class="mi">238</span><span class="p">,</span><span class="mi">787</span><span class="p">,</span><span class="mi">610</span><span class="p">,</span><span class="mi">625</span><span class="p">,</span><span class="mi">000</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">52</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">20</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">66</span><span class="p">,</span><span class="mi">006</span><span class="p">,</span><span class="mi">529</span><span class="p">,</span><span class="mi">348</span><span class="p">,</span><span class="mi">833</span><span class="p">,</span><span class="mi">329</span><span class="p">,</span><span class="mi">743</span><span class="p">,</span><span class="mi">936</span><span class="p">,</span><span class="mi">483</span><span class="p">,</span><span class="mi">628</span><span class="p">,</span><span class="mi">343</span><span class="p">,</span><span class="mi">750</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">52</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">21</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">207</span><span class="p">,</span><span class="mi">449</span><span class="p">,</span><span class="mi">092</span><span class="p">,</span><span class="mi">239</span><span class="p">,</span><span class="mi">190</span><span class="p">,</span><span class="mi">464</span><span class="p">,</span><span class="mi">909</span><span class="p">,</span><span class="mi">514</span><span class="p">,</span><span class="mi">662</span><span class="p">,</span><span class="mi">831</span><span class="p">,</span><span class="mi">937</span><span class="p">,</span><span class="mi">500</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">52</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">22</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">424</span><span class="p">,</span><span class="mi">327</span><span class="p">,</span><span class="mi">688</span><span class="p">,</span><span class="mi">671</span><span class="p">,</span><span class="mi">071</span><span class="p">,</span><span class="mi">405</span><span class="p">,</span><span class="mi">496</span><span class="p">,</span><span class="mi">734</span><span class="p">,</span><span class="mi">537</span><span class="p">,</span><span class="mi">610</span><span class="p">,</span><span class="mi">781</span><span class="p">,</span><span class="mi">250</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">52</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">23</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">516</span><span class="p">,</span><span class="mi">572</span><span class="p">,</span><span class="mi">838</span><span class="p">,</span><span class="mi">382</span><span class="p">,</span><span class="mi">173</span><span class="p">,</span><span class="mi">884</span><span class="p">,</span><span class="mi">952</span><span class="p">,</span><span class="mi">546</span><span class="p">,</span><span class="mi">393</span><span class="p">,</span><span class="mi">613</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">000</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">52</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">24</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">322</span><span class="p">,</span><span class="mi">858</span><span class="p">,</span><span class="mi">023</span><span class="p">,</span><span class="mi">988</span><span class="p">,</span><span class="mi">858</span><span class="p">,</span><span class="mi">678</span><span class="p">,</span><span class="mi">095</span><span class="p">,</span><span class="mi">341</span><span class="p">,</span><span class="mi">496</span><span class="p">,</span><span class="mi">008</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">125</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">52</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">25</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">77</span><span class="p">,</span><span class="mi">485</span><span class="p">,</span><span class="mi">925</span><span class="p">,</span><span class="mi">757</span><span class="p">,</span><span class="mi">326</span><span class="p">,</span><span class="mi">082</span><span class="p">,</span><span class="mi">742</span><span class="p">,</span><span class="mi">881</span><span class="p">,</span><span class="mi">959</span><span class="p">,</span><span class="mi">041</span><span class="p">,</span><span class="mi">968</span><span class="p">,</span><span class="mi">750</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">52</span>      <span class="n">N</span> <span class="o">=</span> <span class="mi">26</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span><span class="mi">980</span><span class="p">,</span><span class="mi">227</span><span class="p">,</span><span class="mi">913</span><span class="p">,</span><span class="mi">743</span><span class="p">,</span><span class="mi">310</span><span class="p">,</span><span class="mi">874</span><span class="p">,</span><span class="mi">726</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">193</span><span class="p">,</span><span class="mi">921</span><span class="p">,</span><span class="mi">875</span>
</pre></div>


<p>For a 52-symbol alphabet the optimum number of pairs is 23 keys.</p>
<p>Okay, here we go with an alphabet of 100 characters:</p>
<div class="highlight"><pre><span></span><span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">1</span>       <span class="k">C</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span><span class="mi">950</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">2</span>       <span class="k">C</span> <span class="o">=</span> <span class="mi">11</span><span class="p">,</span><span class="mi">763</span><span class="p">,</span><span class="mi">675</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">3</span>       <span class="k">C</span> <span class="o">=</span> <span class="mi">17</span><span class="p">,</span><span class="mi">880</span><span class="p">,</span><span class="mi">786</span><span class="p">,</span><span class="mi">000</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">4</span>       <span class="k">C</span> <span class="o">=</span> <span class="mi">19</span><span class="p">,</span><span class="mi">539</span><span class="p">,</span><span class="mi">228</span><span class="p">,</span><span class="mi">901</span><span class="p">,</span><span class="mi">500</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">5</span>       <span class="k">C</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span><span class="mi">358</span><span class="p">,</span><span class="mi">242</span><span class="p">,</span><span class="mi">436</span><span class="p">,</span><span class="mi">335</span><span class="p">,</span><span class="mi">800</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">6</span>       <span class="k">C</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span><span class="mi">919</span><span class="p">,</span><span class="mi">126</span><span class="p">,</span><span class="mi">826</span><span class="p">,</span><span class="mi">254</span><span class="p">,</span><span class="mi">146</span><span class="p">,</span><span class="mi">500</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">7</span>       <span class="k">C</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span><span class="mi">971</span><span class="p">,</span><span class="mi">202</span><span class="p">,</span><span class="mi">498</span><span class="p">,</span><span class="mi">700</span><span class="p">,</span><span class="mi">124</span><span class="p">,</span><span class="mi">686</span><span class="p">,</span><span class="mi">000</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">8</span>       <span class="k">C</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span><span class="mi">728</span><span class="p">,</span><span class="mi">093</span><span class="p">,</span><span class="mi">141</span><span class="p">,</span><span class="mi">593</span><span class="p">,</span><span class="mi">619</span><span class="p">,</span><span class="mi">465</span><span class="p">,</span><span class="mi">916</span><span class="p">,</span><span class="mi">250</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">9</span>       <span class="k">C</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span><span class="mi">056</span><span class="p">,</span><span class="mi">681</span><span class="p">,</span><span class="mi">410</span><span class="p">,</span><span class="mi">177</span><span class="p">,</span><span class="mi">261</span><span class="p">,</span><span class="mi">939</span><span class="p">,</span><span class="mi">798</span><span class="p">,</span><span class="mi">227</span><span class="p">,</span><span class="mi">500</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">10</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">350</span><span class="p">,</span><span class="mi">923</span><span class="p">,</span><span class="mi">896</span><span class="p">,</span><span class="mi">319</span><span class="p">,</span><span class="mi">868</span><span class="p">,</span><span class="mi">690</span><span class="p">,</span><span class="mi">206</span><span class="p">,</span><span class="mi">991</span><span class="p">,</span><span class="mi">352</span><span class="p">,</span><span class="mi">750</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">11</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span><span class="mi">810</span><span class="p">,</span><span class="mi">864</span><span class="p">,</span><span class="mi">760</span><span class="p">,</span><span class="mi">980</span><span class="p">,</span><span class="mi">460</span><span class="p">,</span><span class="mi">095</span><span class="p">,</span><span class="mi">826</span><span class="p">,</span><span class="mi">606</span><span class="p">,</span><span class="mi">790</span><span class="p">,</span><span class="mi">000</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">12</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span><span class="mi">227</span><span class="p">,</span><span class="mi">918</span><span class="p">,</span><span class="mi">906</span><span class="p">,</span><span class="mi">435</span><span class="p">,</span><span class="mi">360</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">980</span><span class="p">,</span><span class="mi">608</span><span class="p">,</span><span class="mi">349</span><span class="p">,</span><span class="mi">197</span><span class="p">,</span><span class="mi">500</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">13</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span><span class="mi">530</span><span class="p">,</span><span class="mi">736</span><span class="p">,</span><span class="mi">067</span><span class="p">,</span><span class="mi">949</span><span class="p">,</span><span class="mi">290</span><span class="p">,</span><span class="mi">492</span><span class="p">,</span><span class="mi">007</span><span class="p">,</span><span class="mi">287</span><span class="p">,</span><span class="mi">215</span><span class="p">,</span><span class="mi">016</span><span class="p">,</span><span class="mi">375</span><span class="p">,</span><span class="mi">000</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">14</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span><span class="mi">067</span><span class="p">,</span><span class="mi">037</span><span class="p">,</span><span class="mi">008</span><span class="p">,</span><span class="mi">537</span><span class="p">,</span><span class="mi">930</span><span class="p">,</span><span class="mi">972</span><span class="p">,</span><span class="mi">779</span><span class="p">,</span><span class="mi">405</span><span class="p">,</span><span class="mi">911</span><span class="p">,</span><span class="mi">982</span><span class="p">,</span><span class="mi">802</span><span class="p">,</span><span class="mi">062</span><span class="p">,</span><span class="mi">500</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">15</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">181</span><span class="p">,</span><span class="mi">823</span><span class="p">,</span><span class="mi">106</span><span class="p">,</span><span class="mi">254</span><span class="p">,</span><span class="mi">863</span><span class="p">,</span><span class="mi">437</span><span class="p">,</span><span class="mi">761</span><span class="p">,</span><span class="mi">610</span><span class="p">,</span><span class="mi">767</span><span class="p">,</span><span class="mi">401</span><span class="p">,</span><span class="mi">869</span><span class="p">,</span><span class="mi">471</span><span class="p">,</span><span class="mi">450</span><span class="p">,</span><span class="mi">000</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">16</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">27</span><span class="p">,</span><span class="mi">443</span><span class="p">,</span><span class="mi">925</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">343</span><span class="p">,</span><span class="mi">450</span><span class="p">,</span><span class="mi">137</span><span class="p">,</span><span class="mi">143</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">204</span><span class="p">,</span><span class="mi">719</span><span class="p">,</span><span class="mi">673</span><span class="p">,</span><span class="mi">346</span><span class="p">,</span><span class="mi">984</span><span class="p">,</span><span class="mi">375</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">17</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span><span class="mi">677</span><span class="p">,</span><span class="mi">485</span><span class="p">,</span><span class="mi">963</span><span class="p">,</span><span class="mi">446</span><span class="p">,</span><span class="mi">022</span><span class="p">,</span><span class="mi">318</span><span class="p">,</span><span class="mi">377</span><span class="p">,</span><span class="mi">178</span><span class="p">,</span><span class="mi">777</span><span class="p">,</span><span class="mi">432</span><span class="p">,</span><span class="mi">436</span><span class="p">,</span><span class="mi">228</span><span class="p">,</span><span class="mi">495</span><span class="p">,</span><span class="mi">906</span><span class="p">,</span><span class="mi">250</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">18</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">438</span><span class="p">,</span><span class="mi">233</span><span class="p">,</span><span class="mi">743</span><span class="p">,</span><span class="mi">977</span><span class="p">,</span><span class="mi">317</span><span class="p">,</span><span class="mi">659</span><span class="p">,</span><span class="mi">606</span><span class="p">,</span><span class="mi">613</span><span class="p">,</span><span class="mi">804</span><span class="p">,</span><span class="mi">310</span><span class="p">,</span><span class="mi">698</span><span class="p">,</span><span class="mi">650</span><span class="p">,</span><span class="mi">562</span><span class="p">,</span><span class="mi">428</span><span class="p">,</span><span class="mi">828</span><span class="p">,</span><span class="mi">125</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">19</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">46</span><span class="p">,</span><span class="mi">498</span><span class="p">,</span><span class="mi">906</span><span class="p">,</span><span class="mi">729</span><span class="p">,</span><span class="mi">382</span><span class="p">,</span><span class="mi">757</span><span class="p">,</span><span class="mi">987</span><span class="p">,</span><span class="mi">733</span><span class="p">,</span><span class="mi">338</span><span class="p">,</span><span class="mi">394</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">919</span><span class="p">,</span><span class="mi">975</span><span class="p">,</span><span class="mi">466</span><span class="p">,</span><span class="mi">132</span><span class="p">,</span><span class="mi">500</span><span class="p">,</span><span class="mi">000</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">20</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span><span class="mi">396</span><span class="p">,</span><span class="mi">471</span><span class="p">,</span><span class="mi">631</span><span class="p">,</span><span class="mi">263</span><span class="p">,</span><span class="mi">139</span><span class="p">,</span><span class="mi">767</span><span class="p">,</span><span class="mi">740</span><span class="p">,</span><span class="mi">187</span><span class="p">,</span><span class="mi">145</span><span class="p">,</span><span class="mi">174</span><span class="p">,</span><span class="mi">438</span><span class="p">,</span><span class="mi">933</span><span class="p">,</span><span class="mi">680</span><span class="p">,</span><span class="mi">322</span><span class="p">,</span><span class="mi">827</span><span class="p">,</span><span class="mi">875</span><span class="p">,</span><span class="mi">000</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">21</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">370</span><span class="p">,</span><span class="mi">559</span><span class="p">,</span><span class="mi">751</span><span class="p">,</span><span class="mi">777</span><span class="p">,</span><span class="mi">893</span><span class="p">,</span><span class="mi">208</span><span class="p">,</span><span class="mi">995</span><span class="p">,</span><span class="mi">244</span><span class="p">,</span><span class="mi">345</span><span class="p">,</span><span class="mi">093</span><span class="p">,</span><span class="mi">274</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">695</span><span class="p">,</span><span class="mi">912</span><span class="p">,</span><span class="mi">924</span><span class="p">,</span><span class="mi">063</span><span class="p">,</span><span class="mi">750</span><span class="p">,</span><span class="mi">000</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">22</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">27</span><span class="p">,</span><span class="mi">842</span><span class="p">,</span><span class="mi">512</span><span class="p">,</span><span class="mi">258</span><span class="p">,</span><span class="mi">584</span><span class="p">,</span><span class="mi">430</span><span class="p">,</span><span class="mi">657</span><span class="p">,</span><span class="mi">688</span><span class="p">,</span><span class="mi">131</span><span class="p">,</span><span class="mi">929</span><span class="p">,</span><span class="mi">053</span><span class="p">,</span><span class="mi">734</span><span class="p">,</span><span class="mi">148</span><span class="p">,</span><span class="mi">379</span><span class="p">,</span><span class="mi">275</span><span class="p">,</span><span class="mi">612</span><span class="p">,</span><span class="mi">608</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">000</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">23</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span><span class="mi">864</span><span class="p">,</span><span class="mi">237</span><span class="p">,</span><span class="mi">777</span><span class="p">,</span><span class="mi">313</span><span class="p">,</span><span class="mi">914</span><span class="p">,</span><span class="mi">052</span><span class="p">,</span><span class="mi">732</span><span class="p">,</span><span class="mi">161</span><span class="p">,</span><span class="mi">876</span><span class="p">,</span><span class="mi">988</span><span class="p">,</span><span class="mi">815</span><span class="p">,</span><span class="mi">242</span><span class="p">,</span><span class="mi">978</span><span class="p">,</span><span class="mi">438</span><span class="p">,</span><span class="mi">454</span><span class="p">,</span><span class="mi">061</span><span class="p">,</span><span class="mi">587</span><span class="p">,</span><span class="mi">500</span><span class="p">,</span><span class="mi">000</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">24</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">111</span><span class="p">,</span><span class="mi">155</span><span class="p">,</span><span class="mi">177</span><span class="p">,</span><span class="mi">472</span><span class="p">,</span><span class="mi">342</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">394</span><span class="p">,</span><span class="mi">155</span><span class="p">,</span><span class="mi">151</span><span class="p">,</span><span class="mi">915</span><span class="p">,</span><span class="mi">458</span><span class="p">,</span><span class="mi">108</span><span class="p">,</span><span class="mi">862</span><span class="p">,</span><span class="mi">589</span><span class="p">,</span><span class="mi">392</span><span class="p">,</span><span class="mi">823</span><span class="p">,</span><span class="mi">422</span><span class="p">,</span><span class="mi">154</span><span class="p">,</span><span class="mi">687</span><span class="p">,</span><span class="mi">500</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">25</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span><span class="mi">895</span><span class="p">,</span><span class="mi">670</span><span class="p">,</span><span class="mi">613</span><span class="p">,</span><span class="mi">133</span><span class="p">,</span><span class="mi">026</span><span class="p">,</span><span class="mi">330</span><span class="p">,</span><span class="mi">905</span><span class="p">,</span><span class="mi">989</span><span class="p">,</span><span class="mi">257</span><span class="p">,</span><span class="mi">595</span><span class="p">,</span><span class="mi">898</span><span class="p">,</span><span class="mi">094</span><span class="p">,</span><span class="mi">071</span><span class="p">,</span><span class="mi">741</span><span class="p">,</span><span class="mi">395</span><span class="p">,</span><span class="mi">354</span><span class="p">,</span><span class="mi">311</span><span class="p">,</span><span class="mi">084</span><span class="p">,</span><span class="mi">625</span><span class="p">,</span><span class="mi">000</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">26</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">277</span><span class="p">,</span><span class="mi">776</span><span class="p">,</span><span class="mi">788</span><span class="p">,</span><span class="mi">503</span><span class="p">,</span><span class="mi">382</span><span class="p">,</span><span class="mi">971</span><span class="p">,</span><span class="mi">359</span><span class="p">,</span><span class="mi">993</span><span class="p">,</span><span class="mi">724</span><span class="p">,</span><span class="mi">636</span><span class="p">,</span><span class="mi">729</span><span class="p">,</span><span class="mi">814</span><span class="p">,</span><span class="mi">047</span><span class="p">,</span><span class="mi">610</span><span class="p">,</span><span class="mi">892</span><span class="p">,</span><span class="mi">665</span><span class="p">,</span><span class="mi">731</span><span class="p">,</span><span class="mi">964</span><span class="p">,</span><span class="mi">564</span><span class="p">,</span><span class="mi">062</span><span class="p">,</span><span class="mi">500</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">27</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">11</span><span class="p">,</span><span class="mi">604</span><span class="p">,</span><span class="mi">896</span><span class="p">,</span><span class="mi">941</span><span class="p">,</span><span class="mi">919</span><span class="p">,</span><span class="mi">110</span><span class="p">,</span><span class="mi">803</span><span class="p">,</span><span class="mi">484</span><span class="p">,</span><span class="mi">182</span><span class="p">,</span><span class="mi">273</span><span class="p">,</span><span class="mi">712</span><span class="p">,</span><span class="mi">267</span><span class="p">,</span><span class="mi">786</span><span class="p">,</span><span class="mi">877</span><span class="p">,</span><span class="mi">966</span><span class="p">,</span><span class="mi">182</span><span class="p">,</span><span class="mi">479</span><span class="p">,</span><span class="mi">468</span><span class="p">,</span><span class="mi">741</span><span class="p">,</span><span class="mi">787</span><span class="p">,</span><span class="mi">500</span><span class="p">,</span><span class="mi">000</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">28</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">428</span><span class="p">,</span><span class="mi">966</span><span class="p">,</span><span class="mi">726</span><span class="p">,</span><span class="mi">245</span><span class="p">,</span><span class="mi">938</span><span class="p">,</span><span class="mi">560</span><span class="p">,</span><span class="mi">057</span><span class="p">,</span><span class="mi">361</span><span class="p">,</span><span class="mi">737</span><span class="p">,</span><span class="mi">617</span><span class="p">,</span><span class="mi">578</span><span class="p">,</span><span class="mi">469</span><span class="p">,</span><span class="mi">979</span><span class="p">,</span><span class="mi">239</span><span class="p">,</span><span class="mi">107</span><span class="p">,</span><span class="mi">102</span><span class="p">,</span><span class="mi">366</span><span class="p">,</span><span class="mi">076</span><span class="p">,</span><span class="mi">705</span><span class="p">,</span><span class="mi">359</span><span class="p">,</span><span class="mi">375</span><span class="p">,</span><span class="mi">000</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">29</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">13</span><span class="p">,</span><span class="mi">993</span><span class="p">,</span><span class="mi">190</span><span class="p">,</span><span class="mi">449</span><span class="p">,</span><span class="mi">264</span><span class="p">,</span><span class="mi">064</span><span class="p">,</span><span class="mi">752</span><span class="p">,</span><span class="mi">216</span><span class="p">,</span><span class="mi">007</span><span class="p">,</span><span class="mi">027</span><span class="p">,</span><span class="mi">111</span><span class="p">,</span><span class="mi">352</span><span class="p">,</span><span class="mi">848</span><span class="p">,</span><span class="mi">288</span><span class="p">,</span><span class="mi">282</span><span class="p">,</span><span class="mi">597</span><span class="p">,</span><span class="mi">201</span><span class="p">,</span><span class="mi">320</span><span class="p">,</span><span class="mi">984</span><span class="p">,</span><span class="mi">940</span><span class="p">,</span><span class="mi">343</span><span class="p">,</span><span class="mi">750</span><span class="p">,</span><span class="mi">000</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">30</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">401</span><span class="p">,</span><span class="mi">604</span><span class="p">,</span><span class="mi">565</span><span class="p">,</span><span class="mi">893</span><span class="p">,</span><span class="mi">878</span><span class="p">,</span><span class="mi">658</span><span class="p">,</span><span class="mi">388</span><span class="p">,</span><span class="mi">599</span><span class="p">,</span><span class="mi">401</span><span class="p">,</span><span class="mi">678</span><span class="p">,</span><span class="mi">095</span><span class="p">,</span><span class="mi">826</span><span class="p">,</span><span class="mi">745</span><span class="p">,</span><span class="mi">873</span><span class="p">,</span><span class="mi">710</span><span class="p">,</span><span class="mi">539</span><span class="p">,</span><span class="mi">677</span><span class="p">,</span><span class="mi">912</span><span class="p">,</span><span class="mi">267</span><span class="p">,</span><span class="mi">787</span><span class="p">,</span><span class="mi">865</span><span class="p">,</span><span class="mi">625</span><span class="p">,</span><span class="mi">000</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">31</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span><span class="mi">104</span><span class="p">,</span><span class="mi">889</span><span class="p">,</span><span class="mi">077</span><span class="p">,</span><span class="mi">329</span><span class="p">,</span><span class="mi">850</span><span class="p">,</span><span class="mi">114</span><span class="p">,</span><span class="mi">293</span><span class="p">,</span><span class="mi">791</span><span class="p">,</span><span class="mi">397</span><span class="p">,</span><span class="mi">061</span><span class="p">,</span><span class="mi">765</span><span class="p">,</span><span class="mi">963</span><span class="p">,</span><span class="mi">283</span><span class="p">,</span><span class="mi">274</span><span class="p">,</span><span class="mi">007</span><span class="p">,</span><span class="mi">127</span><span class="p">,</span><span class="mi">379</span><span class="p">,</span><span class="mi">728</span><span class="p">,</span><span class="mi">028</span><span class="p">,</span><span class="mi">210</span><span class="p">,</span><span class="mi">812</span><span class="p">,</span><span class="mi">500</span><span class="p">,</span><span class="mi">000</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">32</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">221</span><span class="p">,</span><span class="mi">991</span><span class="p">,</span><span class="mi">781</span><span class="p">,</span><span class="mi">917</span><span class="p">,</span><span class="mi">590</span><span class="p">,</span><span class="mi">144</span><span class="p">,</span><span class="mi">698</span><span class="p">,</span><span class="mi">391</span><span class="p">,</span><span class="mi">729</span><span class="p">,</span><span class="mi">754</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">671</span><span class="p">,</span><span class="mi">005</span><span class="p">,</span><span class="mi">879</span><span class="p">,</span><span class="mi">425</span><span class="p">,</span><span class="mi">844</span><span class="p">,</span><span class="mi">079</span><span class="p">,</span><span class="mi">623</span><span class="p">,</span><span class="mi">400</span><span class="p">,</span><span class="mi">119</span><span class="p">,</span><span class="mi">756</span><span class="p">,</span><span class="mi">287</span><span class="p">,</span><span class="mi">109</span><span class="p">,</span><span class="mi">375</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">33</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span><span class="mi">238</span><span class="p">,</span><span class="mi">024</span><span class="p">,</span><span class="mi">927</span><span class="p">,</span><span class="mi">517</span><span class="p">,</span><span class="mi">630</span><span class="p">,</span><span class="mi">035</span><span class="p">,</span><span class="mi">151</span><span class="p">,</span><span class="mi">114</span><span class="p">,</span><span class="mi">840</span><span class="p">,</span><span class="mi">762</span><span class="p">,</span><span class="mi">012</span><span class="p">,</span><span class="mi">810</span><span class="p">,</span><span class="mi">112</span><span class="p">,</span><span class="mi">243</span><span class="p">,</span><span class="mi">584</span><span class="p">,</span><span class="mi">296</span><span class="p">,</span><span class="mi">065</span><span class="p">,</span><span class="mi">537</span><span class="p">,</span><span class="mi">638</span><span class="p">,</span><span class="mi">649</span><span class="p">,</span><span class="mi">892</span><span class="p">,</span><span class="mi">753</span><span class="p">,</span><span class="mi">906</span><span class="p">,</span><span class="mi">250</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">34</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">69</span><span class="p">,</span><span class="mi">927</span><span class="p">,</span><span class="mi">411</span><span class="p">,</span><span class="mi">304</span><span class="p">,</span><span class="mi">040</span><span class="p">,</span><span class="mi">895</span><span class="p">,</span><span class="mi">579</span><span class="p">,</span><span class="mi">993</span><span class="p">,</span><span class="mi">394</span><span class="p">,</span><span class="mi">872</span><span class="p">,</span><span class="mi">573</span><span class="p">,</span><span class="mi">211</span><span class="p">,</span><span class="mi">366</span><span class="p">,</span><span class="mi">852</span><span class="p">,</span><span class="mi">019</span><span class="p">,</span><span class="mi">140</span><span class="p">,</span><span class="mi">885</span><span class="p">,</span><span class="mi">081</span><span class="p">,</span><span class="mi">371</span><span class="p">,</span><span class="mi">037</span><span class="p">,</span><span class="mi">723</span><span class="p">,</span><span class="mi">230</span><span class="p">,</span><span class="mi">439</span><span class="p">,</span><span class="mi">453</span><span class="p">,</span><span class="mi">125</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">35</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">990</span><span class="p">,</span><span class="mi">971</span><span class="p">,</span><span class="mi">314</span><span class="p">,</span><span class="mi">480</span><span class="p">,</span><span class="mi">122</span><span class="p">,</span><span class="mi">405</span><span class="p">,</span><span class="mi">933</span><span class="p">,</span><span class="mi">620</span><span class="p">,</span><span class="mi">681</span><span class="p">,</span><span class="mi">622</span><span class="p">,</span><span class="mi">751</span><span class="p">,</span><span class="mi">795</span><span class="p">,</span><span class="mi">370</span><span class="p">,</span><span class="mi">245</span><span class="p">,</span><span class="mi">756</span><span class="p">,</span><span class="mi">967</span><span class="p">,</span><span class="mi">971</span><span class="p">,</span><span class="mi">438</span><span class="p">,</span><span class="mi">858</span><span class="p">,</span><span class="mi">134</span><span class="p">,</span><span class="mi">592</span><span class="p">,</span><span class="mi">065</span><span class="p">,</span><span class="mi">656</span><span class="p">,</span><span class="mi">250</span><span class="p">,</span><span class="mi">000</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">36</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">11</span><span class="p">,</span><span class="mi">974</span><span class="p">,</span><span class="mi">236</span><span class="p">,</span><span class="mi">716</span><span class="p">,</span><span class="mi">634</span><span class="p">,</span><span class="mi">812</span><span class="p">,</span><span class="mi">405</span><span class="p">,</span><span class="mi">031</span><span class="p">,</span><span class="mi">249</span><span class="p">,</span><span class="mi">902</span><span class="p">,</span><span class="mi">941</span><span class="p">,</span><span class="mi">584</span><span class="p">,</span><span class="mi">194</span><span class="p">,</span><span class="mi">057</span><span class="p">,</span><span class="mi">136</span><span class="p">,</span><span class="mi">230</span><span class="p">,</span><span class="mi">029</span><span class="p">,</span><span class="mi">654</span><span class="p">,</span><span class="mi">886</span><span class="p">,</span><span class="mi">202</span><span class="p">,</span><span class="mi">459</span><span class="p">,</span><span class="mi">654</span><span class="p">,</span><span class="mi">126</span><span class="p">,</span><span class="mi">679</span><span class="p">,</span><span class="mi">687</span><span class="p">,</span><span class="mi">500</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">37</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">122</span><span class="p">,</span><span class="mi">331</span><span class="p">,</span><span class="mi">391</span><span class="p">,</span><span class="mi">321</span><span class="p">,</span><span class="mi">296</span><span class="p">,</span><span class="mi">191</span><span class="p">,</span><span class="mi">597</span><span class="p">,</span><span class="mi">346</span><span class="p">,</span><span class="mi">282</span><span class="p">,</span><span class="mi">792</span><span class="p">,</span><span class="mi">214</span><span class="p">,</span><span class="mi">022</span><span class="p">,</span><span class="mi">306</span><span class="p">,</span><span class="mi">853</span><span class="p">,</span><span class="mi">986</span><span class="p">,</span><span class="mi">350</span><span class="p">,</span><span class="mi">032</span><span class="p">,</span><span class="mi">690</span><span class="p">,</span><span class="mi">459</span><span class="p">,</span><span class="mi">041</span><span class="p">,</span><span class="mi">344</span><span class="p">,</span><span class="mi">574</span><span class="p">,</span><span class="mi">591</span><span class="p">,</span><span class="mi">484</span><span class="p">,</span><span class="mi">375</span><span class="p">,</span><span class="mi">000</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">38</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span><span class="mi">046</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">320</span><span class="p">,</span><span class="mi">511</span><span class="p">,</span><span class="mi">085</span><span class="p">,</span><span class="mi">849</span><span class="p">,</span><span class="mi">187</span><span class="p">,</span><span class="mi">830</span><span class="p">,</span><span class="mi">050</span><span class="p">,</span><span class="mi">196</span><span class="p">,</span><span class="mi">567</span><span class="p">,</span><span class="mi">296</span><span class="p">,</span><span class="mi">045</span><span class="p">,</span><span class="mi">461</span><span class="p">,</span><span class="mi">725</span><span class="p">,</span><span class="mi">362</span><span class="p">,</span><span class="mi">121</span><span class="p">,</span><span class="mi">694</span><span class="p">,</span><span class="mi">715</span><span class="p">,</span><span class="mi">485</span><span class="p">,</span><span class="mi">183</span><span class="p">,</span><span class="mi">861</span><span class="p">,</span><span class="mi">637</span><span class="p">,</span><span class="mi">695</span><span class="p">,</span><span class="mi">312</span><span class="p">,</span><span class="mi">500</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">39</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span><span class="mi">404</span><span class="p">,</span><span class="mi">268</span><span class="p">,</span><span class="mi">422</span><span class="p">,</span><span class="mi">078</span><span class="p">,</span><span class="mi">453</span><span class="p">,</span><span class="mi">701</span><span class="p">,</span><span class="mi">944</span><span class="p">,</span><span class="mi">643</span><span class="p">,</span><span class="mi">432</span><span class="p">,</span><span class="mi">160</span><span class="p">,</span><span class="mi">322</span><span class="p">,</span><span class="mi">402</span><span class="p">,</span><span class="mi">783</span><span class="p">,</span><span class="mi">267</span><span class="p">,</span><span class="mi">594</span><span class="p">,</span><span class="mi">870</span><span class="p">,</span><span class="mi">399</span><span class="p">,</span><span class="mi">685</span><span class="p">,</span><span class="mi">678</span><span class="p">,</span><span class="mi">818</span><span class="p">,</span><span class="mi">224</span><span class="p">,</span><span class="mi">251</span><span class="p">,</span><span class="mi">589</span><span class="p">,</span><span class="mi">843</span><span class="p">,</span><span class="mi">750</span><span class="p">,</span><span class="mi">000</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">40</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">42</span><span class="p">,</span><span class="mi">759</span><span class="p">,</span><span class="mi">650</span><span class="p">,</span><span class="mi">137</span><span class="p">,</span><span class="mi">503</span><span class="p">,</span><span class="mi">070</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">730</span><span class="p">,</span><span class="mi">315</span><span class="p">,</span><span class="mi">820</span><span class="p">,</span><span class="mi">725</span><span class="p">,</span><span class="mi">861</span><span class="p">,</span><span class="mi">876</span><span class="p">,</span><span class="mi">073</span><span class="p">,</span><span class="mi">370</span><span class="p">,</span><span class="mi">360</span><span class="p">,</span><span class="mi">376</span><span class="p">,</span><span class="mi">558</span><span class="p">,</span><span class="mi">184</span><span class="p">,</span><span class="mi">795</span><span class="p">,</span><span class="mi">175</span><span class="p">,</span><span class="mi">245</span><span class="p">,</span><span class="mi">052</span><span class="p">,</span><span class="mi">931</span><span class="p">,</span><span class="mi">347</span><span class="p">,</span><span class="mi">656</span><span class="p">,</span><span class="mi">250</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">41</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">198</span><span class="p">,</span><span class="mi">154</span><span class="p">,</span><span class="mi">476</span><span class="p">,</span><span class="mi">246</span><span class="p">,</span><span class="mi">965</span><span class="p">,</span><span class="mi">446</span><span class="p">,</span><span class="mi">938</span><span class="p">,</span><span class="mi">018</span><span class="p">,</span><span class="mi">536</span><span class="p">,</span><span class="mi">730</span><span class="p">,</span><span class="mi">193</span><span class="p">,</span><span class="mi">018</span><span class="p">,</span><span class="mi">450</span><span class="p">,</span><span class="mi">096</span><span class="p">,</span><span class="mi">106</span><span class="p">,</span><span class="mi">548</span><span class="p">,</span><span class="mi">086</span><span class="p">,</span><span class="mi">489</span><span class="p">,</span><span class="mi">149</span><span class="p">,</span><span class="mi">050</span><span class="p">,</span><span class="mi">812</span><span class="p">,</span><span class="mi">111</span><span class="p">,</span><span class="mi">220</span><span class="p">,</span><span class="mi">901</span><span class="p">,</span><span class="mi">367</span><span class="p">,</span><span class="mi">187</span><span class="p">,</span><span class="mi">500</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">42</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">721</span><span class="p">,</span><span class="mi">848</span><span class="p">,</span><span class="mi">449</span><span class="p">,</span><span class="mi">185</span><span class="p">,</span><span class="mi">374</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">131</span><span class="p">,</span><span class="mi">353</span><span class="p">,</span><span class="mi">240</span><span class="p">,</span><span class="mi">945</span><span class="p">,</span><span class="mi">703</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">639</span><span class="p">,</span><span class="mi">635</span><span class="p">,</span><span class="mi">816</span><span class="p">,</span><span class="mi">710</span><span class="p">,</span><span class="mi">886</span><span class="p">,</span><span class="mi">496</span><span class="p">,</span><span class="mi">185</span><span class="p">,</span><span class="mi">827</span><span class="p">,</span><span class="mi">958</span><span class="p">,</span><span class="mi">405</span><span class="p">,</span><span class="mi">161</span><span class="p">,</span><span class="mi">854</span><span class="p">,</span><span class="mi">980</span><span class="p">,</span><span class="mi">468</span><span class="p">,</span><span class="mi">750</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">43</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span><span class="mi">014</span><span class="p">,</span><span class="mi">460</span><span class="p">,</span><span class="mi">788</span><span class="p">,</span><span class="mi">424</span><span class="p">,</span><span class="mi">299</span><span class="p">,</span><span class="mi">892</span><span class="p">,</span><span class="mi">459</span><span class="p">,</span><span class="mi">590</span><span class="p">,</span><span class="mi">439</span><span class="p">,</span><span class="mi">848</span><span class="p">,</span><span class="mi">473</span><span class="p">,</span><span class="mi">875</span><span class="p">,</span><span class="mi">273</span><span class="p">,</span><span class="mi">402</span><span class="p">,</span><span class="mi">279</span><span class="p">,</span><span class="mi">193</span><span class="p">,</span><span class="mi">171</span><span class="p">,</span><span class="mi">617</span><span class="p">,</span><span class="mi">262</span><span class="p">,</span><span class="mi">775</span><span class="p">,</span><span class="mi">697</span><span class="p">,</span><span class="mi">874</span><span class="p">,</span><span class="mi">870</span><span class="p">,</span><span class="mi">292</span><span class="p">,</span><span class="mi">968</span><span class="p">,</span><span class="mi">750</span><span class="p">,</span><span class="mi">000</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">44</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span><span class="mi">166</span><span class="p">,</span><span class="mi">271</span><span class="p">,</span><span class="mi">176</span><span class="p">,</span><span class="mi">059</span><span class="p">,</span><span class="mi">347</span><span class="p">,</span><span class="mi">504</span><span class="p">,</span><span class="mi">859</span><span class="p">,</span><span class="mi">607</span><span class="p">,</span><span class="mi">500</span><span class="p">,</span><span class="mi">595</span><span class="p">,</span><span class="mi">707</span><span class="p">,</span><span class="mi">332</span><span class="p">,</span><span class="mi">951</span><span class="p">,</span><span class="mi">809</span><span class="p">,</span><span class="mi">259</span><span class="p">,</span><span class="mi">240</span><span class="p">,</span><span class="mi">423</span><span class="p">,</span><span class="mi">117</span><span class="p">,</span><span class="mi">520</span><span class="p">,</span><span class="mi">740</span><span class="p">,</span><span class="mi">647</span><span class="p">,</span><span class="mi">877</span><span class="p">,</span><span class="mi">572</span><span class="p">,</span><span class="mi">651</span><span class="p">,</span><span class="mi">367</span><span class="p">,</span><span class="mi">187</span><span class="p">,</span><span class="mi">500</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">45</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span><span class="mi">110</span><span class="p">,</span><span class="mi">531</span><span class="p">,</span><span class="mi">058</span><span class="p">,</span><span class="mi">220</span><span class="p">,</span><span class="mi">376</span><span class="p">,</span><span class="mi">340</span><span class="p">,</span><span class="mi">460</span><span class="p">,</span><span class="mi">757</span><span class="p">,</span><span class="mi">667</span><span class="p">,</span><span class="mi">540</span><span class="p">,</span><span class="mi">370</span><span class="p">,</span><span class="mi">754</span><span class="p">,</span><span class="mi">995</span><span class="p">,</span><span class="mi">986</span><span class="p">,</span><span class="mi">913</span><span class="p">,</span><span class="mi">552</span><span class="p">,</span><span class="mi">620</span><span class="p">,</span><span class="mi">572</span><span class="p">,</span><span class="mi">363</span><span class="p">,</span><span class="mi">752</span><span class="p">,</span><span class="mi">950</span><span class="p">,</span><span class="mi">220</span><span class="p">,</span><span class="mi">439</span><span class="p">,</span><span class="mi">888</span><span class="p">,</span><span class="mi">671</span><span class="p">,</span><span class="mi">875</span><span class="p">,</span><span class="mi">000</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">46</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span><span class="mi">977</span><span class="p">,</span><span class="mi">693</span><span class="p">,</span><span class="mi">426</span><span class="p">,</span><span class="mi">519</span><span class="p">,</span><span class="mi">933</span><span class="p">,</span><span class="mi">376</span><span class="p">,</span><span class="mi">537</span><span class="p">,</span><span class="mi">697</span><span class="p">,</span><span class="mi">718</span><span class="p">,</span><span class="mi">246</span><span class="p">,</span><span class="mi">014</span><span class="p">,</span><span class="mi">869</span><span class="p">,</span><span class="mi">017</span><span class="p">,</span><span class="mi">813</span><span class="p">,</span><span class="mi">284</span><span class="p">,</span><span class="mi">997</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">820</span><span class="p">,</span><span class="mi">790</span><span class="p">,</span><span class="mi">627</span><span class="p">,</span><span class="mi">886</span><span class="p">,</span><span class="mi">085</span><span class="p">,</span><span class="mi">212</span><span class="p">,</span><span class="mi">934</span><span class="p">,</span><span class="mi">570</span><span class="p">,</span><span class="mi">312</span><span class="p">,</span><span class="mi">500</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">47</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span><span class="mi">561</span><span class="p">,</span><span class="mi">179</span><span class="p">,</span><span class="mi">062</span><span class="p">,</span><span class="mi">607</span><span class="p">,</span><span class="mi">619</span><span class="p">,</span><span class="mi">883</span><span class="p">,</span><span class="mi">894</span><span class="p">,</span><span class="mi">798</span><span class="p">,</span><span class="mi">640</span><span class="p">,</span><span class="mi">657</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">347</span><span class="p">,</span><span class="mi">499</span><span class="p">,</span><span class="mi">973</span><span class="p">,</span><span class="mi">871</span><span class="p">,</span><span class="mi">913</span><span class="p">,</span><span class="mi">183</span><span class="p">,</span><span class="mi">127</span><span class="p">,</span><span class="mi">279</span><span class="p">,</span><span class="mi">522</span><span class="p">,</span><span class="mi">995</span><span class="p">,</span><span class="mi">965</span><span class="p">,</span><span class="mi">658</span><span class="p">,</span><span class="mi">769</span><span class="p">,</span><span class="mi">531</span><span class="p">,</span><span class="mi">250</span><span class="p">,</span><span class="mi">000</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">48</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span><span class="mi">112</span><span class="p">,</span><span class="mi">868</span><span class="p">,</span><span class="mi">457</span><span class="p">,</span><span class="mi">064</span><span class="p">,</span><span class="mi">881</span><span class="p">,</span><span class="mi">213</span><span class="p">,</span><span class="mi">717</span><span class="p">,</span><span class="mi">124</span><span class="p">,</span><span class="mi">575</span><span class="p">,</span><span class="mi">205</span><span class="p">,</span><span class="mi">375</span><span class="p">,</span><span class="mi">108</span><span class="p">,</span><span class="mi">593</span><span class="p">,</span><span class="mi">741</span><span class="p">,</span><span class="mi">834</span><span class="p">,</span><span class="mi">972</span><span class="p">,</span><span class="mi">869</span><span class="p">,</span><span class="mi">727</span><span class="p">,</span><span class="mi">274</span><span class="p">,</span><span class="mi">850</span><span class="p">,</span><span class="mi">936</span><span class="p">,</span><span class="mi">239</span><span class="p">,</span><span class="mi">268</span><span class="p">,</span><span class="mi">365</span><span class="p">,</span><span class="mi">478</span><span class="p">,</span><span class="mi">515</span><span class="p">,</span><span class="mi">625</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">49</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">136</span><span class="p">,</span><span class="mi">269</span><span class="p">,</span><span class="mi">606</span><span class="p">,</span><span class="mi">987</span><span class="p">,</span><span class="mi">536</span><span class="p">,</span><span class="mi">475</span><span class="p">,</span><span class="mi">149</span><span class="p">,</span><span class="mi">035</span><span class="p">,</span><span class="mi">662</span><span class="p">,</span><span class="mi">270</span><span class="p">,</span><span class="mi">045</span><span class="p">,</span><span class="mi">931</span><span class="p">,</span><span class="mi">664</span><span class="p">,</span><span class="mi">539</span><span class="p">,</span><span class="mi">816</span><span class="p">,</span><span class="mi">527</span><span class="p">,</span><span class="mi">290</span><span class="p">,</span><span class="mi">170</span><span class="p">,</span><span class="mi">686</span><span class="p">,</span><span class="mi">716</span><span class="p">,</span><span class="mi">441</span><span class="p">,</span><span class="mi">172</span><span class="p">,</span><span class="mi">155</span><span class="p">,</span><span class="mi">310</span><span class="p">,</span><span class="mi">058</span><span class="p">,</span><span class="mi">593</span><span class="p">,</span><span class="mi">750</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">100</span>     <span class="n">N</span> <span class="o">=</span> <span class="mi">50</span>      <span class="k">C</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span><span class="mi">725</span><span class="p">,</span><span class="mi">392</span><span class="p">,</span><span class="mi">139</span><span class="p">,</span><span class="mi">750</span><span class="p">,</span><span class="mi">729</span><span class="p">,</span><span class="mi">502</span><span class="p">,</span><span class="mi">980</span><span class="p">,</span><span class="mi">713</span><span class="p">,</span><span class="mi">245</span><span class="p">,</span><span class="mi">400</span><span class="p">,</span><span class="mi">918</span><span class="p">,</span><span class="mi">633</span><span class="p">,</span><span class="mi">290</span><span class="p">,</span><span class="mi">796</span><span class="p">,</span><span class="mi">330</span><span class="p">,</span><span class="mi">545</span><span class="p">,</span><span class="mi">803</span><span class="p">,</span><span class="mi">413</span><span class="p">,</span><span class="mi">734</span><span class="p">,</span><span class="mi">328</span><span class="p">,</span><span class="mi">823</span><span class="p">,</span><span class="mi">443</span><span class="p">,</span><span class="mi">106</span><span class="p">,</span><span class="mi">201</span><span class="p">,</span><span class="mi">171</span><span class="p">,</span><span class="mi">875</span>
</pre></div>


<p>Optimum number of pairs? 45.</p>
<p><a name="finalswitchboard"></a></p>
<h3>Final Combination Count Switchboard</h3>
<p>For a switchboard with holes for each of <span class="math">\(S\)</span> symbols, with <span class="math">\(N\)</span> unique pairs of letters chosen from among the symbols to be swapped by the switchboard,
the number of possible combinations of ciphers with <span class="math">\(N\)</span> wires is:</p>
<p><span class="math">\($
C_{sw} = \dfrac{ S! }{ N! \times (S - 2N)! \times 2^N }
$\)</span></p>
<p><a name="rotors"></a></p>
<h2>The Rotors</h2>
<p>Typical Enigma machines had three rotors, with each rotor implementing a different scrambled alphabet.
Assuming there are P possible rotors to choose from, the number of choices
when selecting R rotors from P possible rotors is given by:</p>
<p><span class="math">\($
C_{rot} = \dfrac{P!}{(P-R)!}
$\)</span></p>
<p>If the rotors are known, <span class="math">\(P\)</span> and <span class="math">\(R\)</span> are small numbers like 8 and 3, 
yielding a modest number of possible rotor combinations (336).
If the number of rotors is unknown, however, P becomes the set of all possible rotors
(the set of all possible alphabet scrambles), which is S!. Then we take the factorial of this number,</p>
<p><span class="math">\($
C_{rot} = \frac{(S!)!}{(S!-R)!}
$\)</span></p>
<p>Note that the numerator <span class="math">\((S!)!\)</span> is a double factorial. <a href="http://www.wolframalpha.com/input/?i=(26!)!">Here's how Wolfram Alpha describes 26 double-factorial (26!)!</a></p>
<p><span class="math">\($
10^{10^{28}}
$\)</span></p>
<p>This can also be written as <span class="math">\(403291461126605635584000000!\)</span>.
This is a number with 10^28 digits. That's <em>probably</em> the biggest number you've ever seen in your life. 
The denominator is also pretty big, though. For small values of R, this is approximately <span class="math">\((S!)^R\)</span>.
For a 26-character alphabet with 3 rotors, that is approximately</p>
<p><span class="math">\($
(403,291,461,126,605,635,584,000,000)^3 
$\)</span></p>
<p>or</p>
<p><span class="math">\($
65,592,937,459,144,468,297,405,473,968,303,761,468,794,234,820,105,359,750,856,704,000,000,000,000,000,000
$\)</span></p>
<p>which is a key space with more keys than there are <a href="https://en.wikipedia.org/wiki/Eddington_number">protons in the universe (the Eddington number)</a>.</p>
<p>In addition, each wheel had notches at different locations. The notches change the path the Enigma takes through the key space. 
For <span class="math">\(R\)</span> rotors containing <span class="math">\(S\)</span> symbols, the total combinations increases by a factor of <span class="math">\({S}^{R-1}\)</span>.
If each wheel has <span class="math">\(M\)</span> notches, that factor is <span class="math">\({(MS)}^{R-1}\)</span>.
(The <span class="math">\(R-1\)</span> comes from the fact that the location of the notch on the last wheel has no effect.)</p>
<p><a name="finalrotors"></a></p>
<h3>Final Combination Count for Rotors</h3>
<p>The total number of combinations for <span class="math">\(R\)</span> rotors with <span class="math">\(S\)</span> symbols and <span class="math">\(M\)</span> notches (which advance the neighboring left wheel by one), 
chosen from among <span class="math">\(P\)</span> possible choices of rotors, is given by:</p>
<p><span class="math">\($
C_{rot} = S^{R-1} \dfrac{P!}{(P-R)!}
$\)</span></p>
<p><strong>NOTE:</strong> For a very large set of possible rotors <span class="math">\(P\)</span>, (<span class="math">\(P &gt;&gt; R\)</span>), </p>
<p><span class="math">\($
\dfrac{P!}{(P-R)!} \approx P^R
$\)</span></p>
<p>so it follows that </p>
<p><span class="math">\($
C_{rot} \approx S^{R-1} P^R \qquad P &gt;&gt; R
$\)</span></p>
<p>(For example, if <span class="math">\(P = S!\)</span>, the set of all possible rotors.)</p>
<p><a name="reflector"></a></p>
<h2>Reflector</h2>
<p>Like the switchboard on the front of the Enigma, the reflector connected pairs of letters.
It could only be changed by swapping it out like a rotor, so there were a small number of mechanically produced reflectors
chosen from the set of all possible reflectors.</p>
<p>If a reflector pairs all letters with another letter, it makes <span class="math">\(N = \frac{S}{2}\)</span> possible pairs. 
Using the analysis we performed above for the switchboard, and plugging that in, and using <span class="math">\(0!=1\)</span>:</p>
<p><span class="math">\($
C_{rfl} = \dfrac{ S! }{ (\frac{S}{2})! \times (S - 2(\frac{S}{2}))! \times 2^S } = \dfrac{S!}{(\frac{S}{2})! 2^S}
$\)</span></p>
<p>For the 26 characters in the English alphabet, that's:</p>
<p><span class="math">\($
C_{rfl} = \frac{26!}{13! * 2^26 } = 965,070,017
$\)</span></p>
<p>This is the total number of <em>possible</em> reflectors. (Curiously enough, the number of possible keys goes down as N goes from 11 to 12 and 12 to 13, 
making the switchboard on the front, which swapped 10 pairs of letters, more secure than the rotor, which swapped 13 pairs of letters.</p>
<p>However, like the rotors, there were a finite number of reflectors in use.
Supposing there were Q reflectors in use, that would make for Q possible sets of the 13 letter pairings.
Since the reflectors did not rotate, this would lead to only 1 possible reflector position, meaning a choice from among
Q reflectors only multiplied the number of possible combinations by Q.</p>
<p><a name="finalreflector"></a></p>
<h3>Final Combination Count for Reflector</h3>
<p>Here is the final expression for the total number of combinations resulting from all possible rotors:</p>
<p><span class="math">\($ 
C_{rfl} = \dfrac{S!}{(\frac{S}{2})! 2^S} 
$\)</span> </p>
<p>and here is the final expression for the total number of combinations if there is 1 rotor chosen from among <span class="math">\(Q\)</span> rotors:</p>
<p><span class="math">\($
C_{rfl} = Q
$\)</span></p>
<p><a name="finalcount"></a></p>
<h2>Final Enigma Combination Count</h2>
<p>Putting all of this together results in the following monstrosity of an expression for the Enigma's <em>complete</em> key space:</p>
<p><span class="math">\($
C_{enigma-full} = 
\left( \dfrac{S!}{N! (S-2N)! 2^N} \right) 
\left( \dfrac{(S!)!}{(S!-R)!} \right) 
\left( \dfrac{ S! }{ \left( \dfrac{S}{2} \right)! 2^S } \right)
$\)</span></p>
<p>Note that this assumes the attacker has no idea which rotors or reflectors are actually used. If instead the attacker has knowledge that <span class="math">\(R\)</span> rotors out of <span class="math">\(P\)</span> possible rotors 
and 1 reflector out of <span class="math">\(Q\)</span> possible reflectors are being used, this key space reduces to:</p>
<p><span class="math">\($
C_{enigma-small} = \left( \dfrac{S!}{N! (S-2N)! 2^N} \right) \left( S^{R-1} \dfrac{P!}{(P-R)!} \right) Q
$\)</span></p>
<p>When you evaluate the above expressions for the following values of <span class="math">\(N\)</span>, <span class="math">\(P\)</span>, <span class="math">\(Q\)</span>, <span class="math">\(R\)</span>, and <span class="math">\(S\)</span>, 
here are the actual numbers you get:</p>
<div class="highlight"><pre><span></span><span class="n">N</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span> <span class="o">//</span> <span class="nb">number</span> <span class="k">of</span> <span class="n">switchboard</span> <span class="n">wires</span>
<span class="n">P</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>  <span class="o">//</span> <span class="nb">number</span> <span class="k">of</span> <span class="n">possible</span> <span class="n">rotors</span>
<span class="n">Q</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>  <span class="o">//</span> <span class="nb">number</span> <span class="k">of</span> <span class="n">possible</span> <span class="n">reflectors</span>
<span class="n">R</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>  <span class="o">//</span> <span class="nb">number</span> <span class="k">of</span> <span class="n">rotors</span>
<span class="n">S</span> <span class="o">=</span> <span class="mi">26</span><span class="p">;</span> <span class="o">//</span> <span class="nb">number</span> <span class="k">of</span> <span class="n">symbols</span>
</pre></div>


<p>For the case of utilizing the <span class="math">\(P\)</span> known rotors and <span class="math">\(Q\)</span> known reflectors, the key space is:</p>
<p><span class="math">\($
C_{enigma-small} = 537,293,436,636,253,096,800,000
$\)</span></p>
<p>For the completely unknown case of all possible rotors and reflectors, the key space increases to an astronomical number:</p>
<p><span class="math">\($
C_{enigma-full} = 422,732,921,460,335,478,939,047,043,039,799,222,455,533,136,281,221,092,624,796,865,514,111,348,059,884,989,972,480,000,000,000,000,000,000,000,000
$\)</span></p>
<p>There are plenty of additional big numbers related to the Enigma, and more math around the weaknesses in the system and how it was cracked.
There is also yet more math around how Alan Turing managed to crack the German Navy's Enigma cipher, which utilized various protective steps like bigram replacement
that made cracking via frequency analysis much more difficult.</p>
<p>But that's enough for one post!</p>
<p>Below you can find a Java program that uses the BigInteger class, part of the Java API, to perform calculations with extremely large numbers.</p>
<p><a name="javabigint"></a></p>
<h3>Java BigInteger Program</h3>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">java.math.BigInteger</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.text.*</span><span class="o">;</span>

<span class="cm">/** Cryptanalysis of the Enigma Machine.</span>
<span class="cm"> *</span>
<span class="cm"> * This program uses combinatorics and big integers</span>
<span class="cm"> * to analyze the cryptographic strength of the Enigma machine.</span>
<span class="cm"> *</span>
<span class="cm"> * Author: Charles Reid</span>
<span class="cm"> * Date: March 2017</span>
<span class="cm"> */</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Combos</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span> 

        <span class="c1">// This involves a double factorial. PREPARE YOUR CPU</span>
        <span class="kt">boolean</span> <span class="n">doBig</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>



        <span class="c1">/////////////////////////////////</span>
        <span class="c1">// Git Ready</span>

        <span class="n">DecimalFormat</span> <span class="n">formatter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DecimalFormat</span><span class="o">(</span><span class="s">&quot;#,###&quot;</span><span class="o">);</span>

        <span class="n">BigInteger</span> <span class="n">small_combos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="s">&quot;1&quot;</span><span class="o">);</span>
        <span class="n">BigInteger</span> <span class="n">big_combos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="s">&quot;1&quot;</span><span class="o">);</span>

        <span class="c1">/// Useful temp variable </span>
        <span class="n">BigInteger</span> <span class="n">next</span><span class="o">;</span>



        <span class="c1">/////////////////////////////////</span>
        <span class="c1">// Constants</span>

        <span class="kt">int</span> <span class="n">N</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span> <span class="c1">// number of switchboard wires</span>
        <span class="kt">int</span> <span class="n">P</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span>  <span class="c1">// number of possible rotors</span>
        <span class="kt">int</span> <span class="n">Q</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span>  <span class="c1">// number of possible reflectors</span>
        <span class="kt">int</span> <span class="n">R</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span>  <span class="c1">// number of rotors</span>
        <span class="kt">int</span> <span class="n">S</span> <span class="o">=</span> <span class="mi">26</span><span class="o">;</span> <span class="c1">// number of symbols</span>




        <span class="c1">/////////////////////////////////</span>
        <span class="c1">// Plugboard combinations</span>

        <span class="n">BigInteger</span> <span class="n">plugboard</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="s">&quot;1&quot;</span><span class="o">);</span>

        <span class="c1">// S!/(S-2N)!</span>
        <span class="n">BigInteger</span> <span class="n">num</span> <span class="o">=</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">S</span><span class="o">;</span> <span class="n">i</span><span class="o">&gt;(</span><span class="n">S</span><span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">N</span><span class="o">);</span> <span class="n">i</span><span class="o">--)</span> <span class="o">{</span>
            <span class="n">next</span> <span class="o">=</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
            <span class="n">num</span> <span class="o">=</span> <span class="n">num</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">next</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="c1">// divided by 2^N</span>
        <span class="n">BigInteger</span> <span class="n">pdenom</span> <span class="o">=</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span>
        <span class="n">pdenom</span> <span class="o">=</span> <span class="n">pdenom</span><span class="o">.</span><span class="na">pow</span><span class="o">(</span><span class="n">N</span><span class="o">);</span>

        <span class="c1">// divided by N!</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">N</span><span class="o">;</span> <span class="n">j</span><span class="o">&gt;</span><span class="mi">1</span><span class="o">;</span> <span class="n">j</span><span class="o">--)</span> <span class="o">{</span> 
            <span class="n">next</span> <span class="o">=</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">j</span><span class="o">);</span>
            <span class="n">pdenom</span> <span class="o">=</span> <span class="n">pdenom</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">next</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="n">plugboard</span> <span class="o">=</span> <span class="n">num</span><span class="o">.</span><span class="na">divide</span><span class="o">(</span><span class="n">pdenom</span><span class="o">);</span>



        <span class="c1">/////////////////////////////////</span>
        <span class="c1">// Rotor combinations</span>

        <span class="n">BigInteger</span> <span class="n">small_rotors</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="s">&quot;1&quot;</span><span class="o">);</span>
        <span class="n">BigInteger</span> <span class="n">big_rotors</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="s">&quot;1&quot;</span><span class="o">);</span>

        <span class="c1">// -----------------</span>
        <span class="c1">// Small case:</span>
        <span class="c1">// R rotors selected from P possible known rotors</span>

        <span class="c1">// Rotor wheel combinations</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="n">P</span><span class="o">;</span> <span class="n">j</span><span class="o">&gt;(</span><span class="n">P</span><span class="o">-</span><span class="n">R</span><span class="o">);</span> <span class="n">j</span><span class="o">--)</span> <span class="o">{</span> 
            <span class="n">next</span> <span class="o">=</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">j</span><span class="o">);</span>
            <span class="n">small_rotors</span> <span class="o">=</span> <span class="n">small_rotors</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">next</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="c1">// Rotor wheel notch positions (assume 1 per wheel). </span>
        <span class="c1">// Ignore left-most wheel.</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">k</span><span class="o">&lt;(</span><span class="n">R</span><span class="o">-</span><span class="mi">1</span><span class="o">);</span> <span class="n">k</span><span class="o">++</span> <span class="o">)</span> <span class="o">{</span>
            <span class="n">next</span> <span class="o">=</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">S</span><span class="o">);</span>
            <span class="n">small_rotors</span> <span class="o">=</span> <span class="n">small_rotors</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">next</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="c1">// Rotor wheel starting positions</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">k</span><span class="o">&lt;</span><span class="n">R</span><span class="o">;</span> <span class="n">k</span><span class="o">++</span> <span class="o">)</span> <span class="o">{</span>
            <span class="n">next</span> <span class="o">=</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">S</span><span class="o">);</span>
            <span class="n">small_rotors</span> <span class="o">=</span> <span class="n">small_rotors</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">next</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="c1">// -----------------</span>
        <span class="c1">// Big case:</span>
        <span class="c1">// R rotors selected from S! possible rotors</span>

        <span class="k">if</span><span class="o">(</span><span class="n">doBig</span><span class="o">)</span> <span class="o">{</span> 
            <span class="n">BigInteger</span> <span class="n">s_rm1</span> <span class="o">=</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">S</span><span class="o">).</span><span class="na">pow</span><span class="o">(</span><span class="n">R</span><span class="o">-</span><span class="mi">1</span><span class="o">);</span>
            <span class="n">BigInteger</span> <span class="n">sfact_r</span> <span class="o">=</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
            <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="n">S</span><span class="o">;</span> <span class="n">j</span><span class="o">&gt;=</span><span class="mi">1</span><span class="o">;</span> <span class="n">j</span><span class="o">--)</span> <span class="o">{</span> 
                <span class="n">next</span> <span class="o">=</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">j</span><span class="o">);</span>
                <span class="n">sfact_r</span> <span class="o">=</span> <span class="n">sfact_r</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">next</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">sfact_r</span> <span class="o">=</span> <span class="n">sfact_r</span><span class="o">.</span><span class="na">pow</span><span class="o">(</span><span class="n">R</span><span class="o">);</span>
            <span class="n">big_rotors</span> <span class="o">=</span> <span class="n">s_rm1</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">sfact_r</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="c1">/////////////////////////////////</span>
        <span class="c1">// Reflector combinations</span>

        <span class="n">BigInteger</span> <span class="n">small_reflector</span> <span class="o">=</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">Q</span><span class="o">);</span>
        <span class="n">BigInteger</span> <span class="n">big_reflector</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="s">&quot;1&quot;</span><span class="o">);</span>

        <span class="c1">// (S!)/((S/2)!)</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="n">S</span><span class="o">;</span> <span class="n">j</span><span class="o">&gt;(</span><span class="n">S</span><span class="o">/</span><span class="mi">2</span><span class="o">);</span> <span class="n">j</span><span class="o">--)</span> <span class="o">{</span>
            <span class="n">next</span> <span class="o">=</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">j</span><span class="o">);</span>
            <span class="n">big_reflector</span> <span class="o">=</span> <span class="n">big_reflector</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">next</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="c1">// divided by 2^N</span>
        <span class="n">BigInteger</span> <span class="n">rfldenom</span> <span class="o">=</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span>
        <span class="n">rfldenom</span> <span class="o">=</span> <span class="n">rfldenom</span><span class="o">.</span><span class="na">pow</span><span class="o">(</span><span class="n">N</span><span class="o">);</span>

        <span class="k">if</span><span class="o">(</span><span class="n">doBig</span><span class="o">)</span> <span class="o">{</span> 
            <span class="n">big_reflector</span> <span class="o">=</span> <span class="n">big_reflector</span><span class="o">.</span><span class="na">divide</span><span class="o">(</span><span class="n">rfldenom</span><span class="o">);</span>
        <span class="o">}</span>



        <span class="c1">/////////////////////////////////</span>
        <span class="c1">// Final combinations</span>

        <span class="n">small_combos</span> <span class="o">=</span> <span class="n">small_combos</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">plugboard</span><span class="o">);</span>
        <span class="n">small_combos</span> <span class="o">=</span> <span class="n">small_combos</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">small_rotors</span><span class="o">);</span>
        <span class="n">small_combos</span> <span class="o">=</span> <span class="n">small_combos</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">small_reflector</span><span class="o">);</span>

        <span class="k">if</span><span class="o">(</span><span class="n">doBig</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">big_combos</span> <span class="o">=</span> <span class="n">big_combos</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">plugboard</span><span class="o">);</span>
            <span class="n">big_combos</span> <span class="o">=</span> <span class="n">big_combos</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">big_rotors</span><span class="o">);</span>
            <span class="n">big_combos</span> <span class="o">=</span> <span class="n">big_combos</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">big_reflector</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Final number of (small) Enigma combinations: &quot;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">formatter</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">small_combos</span><span class="o">));</span>

        <span class="k">if</span><span class="o">(</span><span class="n">doBig</span><span class="o">)</span> <span class="o">{</span> 
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Final number of (big) Enigma combinations: &quot;</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">formatter</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">big_combos</span><span class="o">));</span>
        <span class="o">}</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>Output of the program:</p>
<div class="highlight"><pre><span></span><span class="k">Final</span> <span class="nb">number</span> <span class="k">of</span> <span class="p">(</span><span class="n">small</span><span class="p">)</span> <span class="n">Enigma</span> <span class="n">combinations</span><span class="p">:</span>
<span class="mi">537</span><span class="p">,</span><span class="mi">293</span><span class="p">,</span><span class="mi">436</span><span class="p">,</span><span class="mi">636</span><span class="p">,</span><span class="mi">253</span><span class="p">,</span><span class="mi">096</span><span class="p">,</span><span class="mi">800</span><span class="p">,</span><span class="mi">000</span>
<span class="k">Final</span> <span class="nb">number</span> <span class="k">of</span> <span class="p">(</span><span class="n">big</span><span class="p">)</span> <span class="n">Enigma</span> <span class="n">combinations</span><span class="p">:</span>
<span class="mi">422</span><span class="p">,</span><span class="mi">732</span><span class="p">,</span><span class="mi">921</span><span class="p">,</span><span class="mi">460</span><span class="p">,</span><span class="mi">335</span><span class="p">,</span><span class="mi">478</span><span class="p">,</span><span class="mi">939</span><span class="p">,</span><span class="mi">047</span><span class="p">,</span><span class="mi">043</span><span class="p">,</span><span class="mi">039</span><span class="p">,</span><span class="mi">799</span><span class="p">,</span><span class="mi">222</span><span class="p">,</span><span class="mi">455</span><span class="p">,</span><span class="mi">533</span><span class="p">,</span><span class="mi">136</span><span class="p">,</span><span class="mi">281</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">092</span><span class="p">,</span><span class="mi">624</span><span class="p">,</span><span class="mi">796</span><span class="p">,</span><span class="mi">865</span><span class="p">,</span><span class="mi">514</span><span class="p">,</span><span class="mi">111</span><span class="p">,</span><span class="mi">348</span><span class="p">,</span><span class="mi">059</span><span class="p">,</span><span class="mi">884</span><span class="p">,</span><span class="mi">989</span><span class="p">,</span><span class="mi">972</span><span class="p">,</span><span class="mi">480</span><span class="p">,</span><span class="mi">000</span><span class="p">,</span><span class="mi">000</span><span class="p">,</span><span class="mi">000</span><span class="p">,</span><span class="mi">000</span><span class="p">,</span><span class="mi">000</span><span class="p">,</span><span class="mi">000</span><span class="p">,</span><span class="mi">000</span><span class="p">,</span><span class="mi">000</span>
</pre></div>


<p><a name="sources"></a></p>
<h2>Sources</h2>
<ol>
<li>
<p>"The Enigma Cipher". Tony Sale and Andrew Hodges. Publication date unknown. Accessed 18 March 2017.
&lt;<a href="https://web.archive.org/web/20170320081639/http://www.codesandciphers.org.uk/enigma/index.htm">https://web.archive.org/web/20170320081639/http://www.codesandciphers.org.uk/enigma/index.htm</a>&gt;</p>
</li>
<li>
<p>"BigInteger". Oracle Corporation. Copyright 1993-2016, Publication date unknown. Accessed 22 March 2017.
&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/math/BigInteger.html">https://docs.oracle.com/javase/8/docs/api/java/math/BigInteger.html</a>&gt;</p>
</li>
</ol>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script></div>

    </div>
</div>

<div class="v20"></div>

<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="tags">
            <p>Tags:&nbsp;&nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/ciphers.html">ciphers</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/enigma.html">enigma</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/encryption.html">encryption</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/java.html">java</a>
                    &nbsp;&nbsp;
        </div>

    </div>
</div>


<div class="v200"></div>
  	            	</article>
  	            	<article>
<header>
<div class="row">


    <div class="col-md-12">
        <div class="headtext" style="text-align: center;">
            <h1><b>
                Enigma Cipher Implementation: Part 3: Enigma in Java Without Objects
            </b></h1>
        
            <p class="lead">
                Posted 
                <time datetime="2017-03-22T18:00:00-07:00" pubdate>Wednesday 03/22/2017</time>
                in 
                <a href="https://charlesreid1.github.io/category/enigma.html">Enigma</a>
                </p>
            <p>
            <span style="font-size: 14px">
                <a href="https://charlesreid1.github.io/enigma-cipher-implementation-part-3-enigma-in-java-without-objects.html">permalink</a>
            </span>
            </p>
        </div>

    </div>

</div>
</header>


<div class="v50"></div>


<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="entry-content"><p>As the title suggests, we're continuing with the third in a series of posts 
exploring a verb-oriented approach to programming - 
in an attempt to free ourselves from the fetishization of objects,
we are attempting to learn how to use languages against their will.</p>
<p>This is all inspired by <a href="http://steve-yegge.blogspot.com/2006/03/execution-in-kingdom-of-nouns.html">Steve Yegge's 2006 blog post</a>,
"Execution in the Kingdom of Nouns," an excellent read that inspired me to 
explore the subject more deeply. </p>
<h2>Java Pseudocode</h2>
<p>In the last post, we ran through the pseudocode for an Enigma machine 
based entirely upon Strings, iterators, and integer indexes, 
leading to a vastly simpler abstraction of the Enigma machine
than would have resulted if we had implicitly chosen a noun-centric approach,
divided the entire Enigma encryption process into its component nouns like rotor wheels and reflectors,
and implemented each as an object.</p>
<p>Here was the pseudocode:</p>
<div class="highlight"><pre><span></span><span class="nv">define</span> <span class="nv">plaintext</span> <span class="nv">message</span>
<span class="nv">define</span> <span class="nv">normal</span> <span class="nv">alphabet</span> <span class="nv">and</span> <span class="nv">scrambled</span> <span class="nv">alphabets</span>
<span class="nv">define</span> <span class="nv">list</span> <span class="nv">of</span> <span class="nv">switchboard</span> <span class="nv">swap</span> <span class="nv">pairs</span>
<span class="nv">define</span> <span class="nv">list</span> <span class="nv">of</span> <span class="nv">reflector</span> <span class="nv">swap</span> <span class="nv">pairs</span>
<span class="k">for</span> <span class="nv">each</span> <span class="nv">character</span> <span class="nv">in</span> <span class="nv">plaintext</span> <span class="nv">message</span>:

    # <span class="nv">Apply</span> <span class="nv">switchboard</span> <span class="nv">transformation</span>
    <span class="k">for</span> <span class="nv">each</span> <span class="nv">pair</span> <span class="nv">in</span> <span class="nv">switchboard</span> <span class="nv">swap</span> <span class="nv">pairs</span>:
        <span class="k">if</span> <span class="nv">character</span> <span class="nv">in</span> <span class="nv">swap</span> <span class="nv">pair</span>, <span class="nv">swap</span> <span class="nv">its</span> <span class="nv">value</span>

    # <span class="nv">Apply</span> <span class="nv">forward</span> <span class="nv">rotor</span> <span class="nv">transformation</span>
    <span class="k">for</span> <span class="nv">each</span> <span class="nv">scrambled</span> <span class="nv">alphabet</span>:
        <span class="nv">get</span> <span class="nv">index</span> <span class="nv">of</span> <span class="nv">character</span> <span class="nv">in</span> <span class="nv">normal</span> <span class="nv">alphabet</span>
        <span class="nv">get</span> <span class="nv">new</span> <span class="nv">character</span> <span class="nv">at</span> <span class="nv">that</span> <span class="nv">index</span> <span class="nv">in</span> <span class="nv">scrambled</span> <span class="nv">alphabet</span>
        <span class="nv">replace</span> <span class="nv">character</span> <span class="nv">with</span> <span class="nv">new</span> <span class="nv">character</span> 

    # <span class="nv">Apply</span> <span class="nv">reflector</span> <span class="nv">transformation</span>
    <span class="k">for</span> <span class="nv">each</span> <span class="nv">pair</span> <span class="nv">in</span> <span class="nv">reflector</span> <span class="nv">swap</span> <span class="nv">pairs</span>:
        <span class="k">if</span> <span class="nv">character</span> <span class="nv">in</span> <span class="nv">swap</span> <span class="nv">pair</span>, <span class="nv">swap</span> <span class="nv">its</span> <span class="nv">value</span>

    # <span class="nv">Apply</span> <span class="nv">reverse</span> <span class="nv">rotor</span> <span class="nv">transformation</span>
    <span class="k">for</span> <span class="nv">each</span> <span class="nv">scrambled</span> <span class="nv">alphabet</span>:
        <span class="nv">get</span> <span class="nv">index</span> <span class="nv">of</span> <span class="nv">input</span> <span class="nv">character</span> <span class="nv">in</span> <span class="nv">scrambled</span> <span class="nv">alphabet</span>
        <span class="nv">get</span> <span class="nv">new</span> <span class="nv">character</span> <span class="nv">at</span> <span class="nv">that</span> <span class="nv">index</span> <span class="nv">in</span> <span class="nv">normal</span> <span class="nv">alphabet</span>
        <span class="nv">replace</span> <span class="nv">character</span> <span class="nv">with</span> <span class="nv">new</span> <span class="nv">character</span> 

    # <span class="nv">Apply</span> <span class="nv">switchboard</span> <span class="nv">transformation</span>
    <span class="k">for</span> <span class="nv">each</span> <span class="nv">pair</span> <span class="nv">in</span> <span class="nv">switchboard</span> <span class="nv">swap</span> <span class="nv">pairs</span>:
        <span class="k">if</span> <span class="nv">character</span> <span class="nv">in</span> <span class="nv">swap</span> <span class="nv">pair</span>, <span class="nv">swap</span> <span class="nv">its</span> <span class="nv">value</span>

    <span class="nv">concatenate</span> <span class="nv">transformed</span> <span class="nv">input</span> <span class="nv">character</span> <span class="nv">to</span> <span class="nv">ciphertext</span> <span class="nv">message</span> 

    # <span class="nv">Increment</span> <span class="nv">rotor</span> <span class="nv">wheels</span>
    <span class="k">for</span> <span class="nv">each</span> <span class="nv">rotor</span><span class="o">/</span><span class="nv">scrambled</span> <span class="nv">alphabet</span>, <span class="nv">left</span> <span class="nv">to</span> <span class="nv">right</span>:
        <span class="nv">get</span> <span class="nv">index</span> <span class="nv">of</span> <span class="nv">left</span> <span class="nv">notch</span> <span class="nv">in</span> <span class="nv">left</span> <span class="nv">alphabet</span>
        <span class="nv">get</span> <span class="nv">index</span> <span class="nv">of</span> <span class="nv">right</span> <span class="nv">notch</span> <span class="nv">in</span> <span class="nv">right</span> <span class="nv">alphabet</span>
        <span class="k">if</span> <span class="nv">left</span> <span class="nv">index</span> <span class="nv">equals</span> <span class="nv">right</span> <span class="nv">index</span>:
            <span class="nv">cycle</span> <span class="nv">left</span> <span class="nv">alphabet</span> <span class="nv">forward</span> <span class="mi">1</span> <span class="nv">character</span>
    <span class="nv">cycle</span> <span class="nv">right</span><span class="o">-</span><span class="nv">most</span> <span class="nv">alphabet</span> <span class="nv">forward</span> <span class="mi">1</span> <span class="nv">character</span>
</pre></div>


<h2>Java Code</h2>
<p>The Enigma code is defined in the Java program as follows:</p>
<ul>
<li>The Enigma class defines a set of constants for historically accurate cipher settings.</li>
<li>The main method contains the encryption procedure.</li>
<li>There is one static helper method called rotateString.</li>
</ul>
<p>Everything is in a public class. Starting with the definitions of constants:</p>
<div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Enigma</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">ALPHA</span> <span class="o">=</span> <span class="s">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;</span><span class="o">;</span>

    <span class="c1">// Historically accurate rotor scrambles</span>
    <span class="c1">// See http://www.codesandciphers.org.uk/enigma/rotorspec.htm</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">WHEEL</span> <span class="o">=</span> <span class="o">{</span> <span class="n">ALPHA</span><span class="o">,</span>
                        <span class="s">&quot;EKMFLGDQVZNTOWYHXUSPAIBRCJ&quot;</span><span class="o">,</span> <span class="c1">// Rotor I    - Royal</span>
                        <span class="s">&quot;AJDKSIRUXBLHWTMCQGZNPYFVOE&quot;</span><span class="o">,</span> <span class="c1">// Rotor II   - Flags</span>
                        <span class="s">&quot;BDFHJLCPRTXVZNYEIWGAKMUSQO&quot;</span><span class="o">,</span> <span class="c1">// Rotor III  - Wave</span>
                        <span class="s">&quot;ESOVPZJAYQUIRHXLNFTGKDCMWB&quot;</span><span class="o">,</span> <span class="c1">// Rotor IV   - Kings</span>
                        <span class="s">&quot;VZBRGITYUPSDNHLXAWMJQOFECK&quot;</span><span class="o">,</span> <span class="c1">// Rotor V    - Above</span>
                        <span class="s">&quot;JPGVOUMFYQBENHZRDKASXLICTW&quot;</span><span class="o">,</span>
                        <span class="s">&quot;NZJHGRCXMYSWBOUFAIVLPEKQDT&quot;</span><span class="o">,</span>
                        <span class="s">&quot;FKQHTLXOCBJSPDZRAMEWNIUYGV&quot;</span><span class="o">};</span>

    <span class="c1">// Knocking (notch and clasp) advances the wheel to the left</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">NOTCH</span> <span class="o">=</span> <span class="o">{</span><span class="s">&quot;&quot;</span><span class="o">,</span>  <span class="c1">// No notch</span>
                                          <span class="s">&quot;R&quot;</span><span class="o">,</span> <span class="c1">// Royal</span>
                                          <span class="s">&quot;F&quot;</span><span class="o">,</span> <span class="c1">// Flags</span>
                                          <span class="s">&quot;W&quot;</span><span class="o">,</span> <span class="c1">// Wave</span>
                                          <span class="s">&quot;K&quot;</span><span class="o">,</span> <span class="c1">// Kings</span>
                                          <span class="s">&quot;A&quot;</span><span class="o">,</span> <span class="c1">// Above</span>
                                          <span class="s">&quot;AN&quot;</span><span class="o">,</span>
                                          <span class="s">&quot;AN&quot;</span><span class="o">,</span>
                                          <span class="s">&quot;AN&quot;</span><span class="o">};</span>

    <span class="c1">// Reflectors</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">REFLECTOR_ALPHA</span> <span class="o">=</span> <span class="s">&quot;AY:BR:CU:DH:EQ:FS:GL:IP:JX:KN:MO:TZ:VW&quot;</span><span class="o">;</span>
</pre></div>


<h2>Main Method: User Settings</h2>
<p>The next part of the code is the main method, where we begin by defining variables 
that correspond to settings that the Enigma operator would set from the daily Enigma code book.
These included:</p>
<ul>
<li>The numbering and ordering of wheels (e.g., <code>IV II I</code>)</li>
<li>The initial rotor settings for each wheel (position 0-25)</li>
<li>The pairs of letters connected on the switch board</li>
</ul>
<p>The wheels are specified using the <code>WHEEL</code> array of Strings, above.
Each element of the WHEEL array contains a different scrambled alphabet, 
corresponding to the alphabet scrambles hard-coded into the historical rotor wheels.
These go into <code>rotorAlpha</code>, which stores each rotor's alphabet in a String.</p>
<p>The locations of the notches that advance neighboring wheels are fixed by the choice of wheels, 
and are available through the <code>NOTCH</code> array.
The notch locations implemented in <code>NOTCH</code> are historically accurate for each rotor wheel. </p>
<p>The initial rotor settings were also contained in the code book as a sequence of 3 numbers,
each 0-25, indicating how many turns each wheel was rotated before starting.</p>
<p>The plugboard pairs specify the wired connections on the front of the machine.
These plugboard pairs were also daily machine settings specified in the daily Enigma code book.
The plugboard pairs are input as a single string, with pairs of letters separated by a ":", like this: <code>AB:CD:EF:GH</code>.
Pairs must be unique (no letter can connect to itself). 
Letters cannot be repeated (no letter can connect to more than 1 other letter).</p>
<div class="highlight"><pre><span></span>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span> 

        <span class="c1">// These two strings should encrypt/decrypt to each other when you run them through the Enigma.</span>
        <span class="c1">//String message = &quot;ABCDE FG HIJKL MNOP QRS TUVWXYZ&quot;; </span>
        <span class="n">String</span> <span class="n">message</span> <span class="o">=</span> <span class="s">&quot;TVVFT KS UNVYJ FAFV NPC DZJPWEJ&quot;</span><span class="o">;</span>


        <span class="c1">//////////////////////////////////</span>
        <span class="c1">// Operator Settings</span>
        <span class="c1">// </span>
        <span class="c1">// Enigma operators have code sheets that specify: </span>
        <span class="c1">//  - The numbering/ordering of wheels </span>
        <span class="c1">//  - The initial rotor settings</span>
        <span class="c1">//  - The plugboard pairs</span>

        <span class="c1">// Rotor scrambles are applied right-to-left</span>
        <span class="c1">//              {LAST, MIDDLE, FIRST}</span>
        <span class="n">String</span><span class="o">[]</span> <span class="n">rotorAlpha</span> <span class="o">=</span> <span class="o">{</span><span class="n">WHEEL</span><span class="o">[</span><span class="mi">1</span><span class="o">],</span><span class="n">WHEEL</span><span class="o">[</span><span class="mi">2</span><span class="o">],</span><span class="n">WHEEL</span><span class="o">[</span><span class="mi">3</span><span class="o">]};</span>
        <span class="n">String</span><span class="o">[]</span> <span class="n">rotorNotch</span> <span class="o">=</span> <span class="o">{</span><span class="n">NOTCH</span><span class="o">[</span><span class="mi">1</span><span class="o">],</span><span class="n">NOTCH</span><span class="o">[</span><span class="mi">2</span><span class="o">],</span><span class="n">NOTCH</span><span class="o">[</span><span class="mi">3</span><span class="o">]};</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">rotorInit</span> <span class="o">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">};</span>

        <span class="n">String</span> <span class="n">plugboardPairs</span> <span class="o">=</span> <span class="s">&quot;IR:HQ:NT:WZ:VC:OY:GP:LF:BX:AK&quot;</span><span class="o">;</span>

        <span class="n">String</span> <span class="n">coded</span> <span class="o">=</span> <span class="n">enigma</span><span class="o">(</span><span class="n">message</span><span class="o">,</span> <span class="n">rotorAlpha</span><span class="o">,</span> <span class="n">rotorNotch</span><span class="o">,</span> <span class="n">rotorInit</span><span class="o">,</span> <span class="n">plugboardPairs</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">coded</span><span class="o">);</span>
    <span class="o">}</span>
</pre></div>


<h2>Cipher Procedure</h2>
<p>The next bit of code is the meat of the Enigma method.
Notice that this is purely procedural code, and makes no use of objects other than the built-in String type. 
This is the kind of verb-oriented code we are striving for
when we write noun-free Java code.</p>
<p>We also pass in any information that's required. 
Normally we would wrap all of these quantities in an object,
to keep the list of parameters short, but this implementation is entirely object-free.</p>
<div class="highlight"><pre><span></span>    <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">enigma</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">,</span>
                                <span class="n">String</span><span class="o">[]</span> <span class="n">rotorAlpha</span><span class="o">,</span>
                                <span class="n">String</span><span class="o">[]</span> <span class="n">rotorNotch</span><span class="o">,</span>
                                <span class="kt">int</span><span class="o">[]</span> <span class="n">rotorInit</span><span class="o">,</span>
                                <span class="n">String</span><span class="o">[]</span> <span class="n">plugboardPairs</span><span class="o">)</span> <span class="o">{</span> 

        <span class="n">StringBuilder</span> <span class="n">message_final</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuilder</span><span class="o">();</span>

        <span class="c1">//////////////////////////////////////</span>
        <span class="c1">// Enigma Cipher</span>

        <span class="c1">// Apply each transformation in sequence</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">message</span><span class="o">.</span><span class="na">length</span><span class="o">();</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>

            <span class="c1">// Starting char</span>
            <span class="kt">char</span> <span class="n">c_orig</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
            <span class="kt">char</span> <span class="n">c</span> <span class="o">=</span> <span class="n">c_orig</span><span class="o">;</span>

            <span class="c1">// Perform plugboard swap</span>
            <span class="k">for</span><span class="o">(</span><span class="n">String</span> <span class="n">pair</span> <span class="o">:</span> <span class="n">plugboardPairs</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&quot;:&quot;</span><span class="o">))</span> <span class="o">{</span>
                <span class="k">if</span><span class="o">(</span><span class="n">c</span><span class="o">==</span><span class="n">pair</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">0</span><span class="o">))</span> <span class="o">{</span>
                    <span class="n">c</span> <span class="o">=</span> <span class="n">pair</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">c</span><span class="o">==</span><span class="n">pair</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">1</span><span class="o">))</span> <span class="o">{</span>
                    <span class="n">c</span> <span class="o">=</span> <span class="n">pair</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>

            <span class="c1">// Perform rotor letter substitutions</span>
            <span class="c1">// (forward order: right-to-left)</span>
            <span class="kt">int</span> <span class="n">ix</span> <span class="o">=</span> <span class="o">-</span><span class="mi">100</span><span class="o">;</span>
            <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=(</span><span class="n">rotorAlpha</span><span class="o">.</span><span class="na">length</span><span class="o">-</span><span class="mi">1</span><span class="o">);</span> <span class="n">j</span><span class="o">&gt;=</span><span class="mi">0</span><span class="o">;</span> <span class="n">j</span><span class="o">--)</span> <span class="o">{</span> 
                <span class="n">ix</span> <span class="o">=</span> <span class="n">ALPHA</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="n">c</span><span class="o">);</span>
                <span class="n">String</span> <span class="n">thisAlpha</span> <span class="o">=</span> <span class="n">rotorAlpha</span><span class="o">[</span><span class="n">j</span><span class="o">];</span>
                <span class="k">if</span><span class="o">(</span><span class="n">ix</span><span class="o">&gt;=</span><span class="mi">0</span><span class="o">)</span> <span class="o">{</span> 
                    <span class="n">c</span> <span class="o">=</span> <span class="n">thisAlpha</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">ix</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                    <span class="n">c</span> <span class="o">=</span> <span class="n">c_orig</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span>

            <span class="c1">// Perform reflection</span>
            <span class="k">for</span><span class="o">(</span><span class="n">String</span> <span class="n">pair</span> <span class="o">:</span> <span class="n">REFLECTOR_ALPHA</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&quot;:&quot;</span><span class="o">))</span> <span class="o">{</span>
                <span class="k">if</span><span class="o">(</span><span class="n">c</span><span class="o">==</span><span class="n">pair</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">0</span><span class="o">))</span> <span class="o">{</span>
                    <span class="n">c</span> <span class="o">=</span> <span class="n">pair</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">c</span><span class="o">==</span><span class="n">pair</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">1</span><span class="o">))</span> <span class="o">{</span>
                    <span class="n">c</span> <span class="o">=</span> <span class="n">pair</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>

            <span class="c1">// Perform rotor letter substitutions</span>
            <span class="c1">// (backwards order: left-to-right) </span>
            <span class="n">ix</span> <span class="o">=</span> <span class="o">-</span><span class="mi">100</span><span class="o">;</span>
            <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">rotorAlpha</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span> 
                <span class="n">String</span> <span class="n">thisAlpha</span> <span class="o">=</span> <span class="n">rotorAlpha</span><span class="o">[</span><span class="n">j</span><span class="o">];</span>
                <span class="n">ix</span> <span class="o">=</span> <span class="n">thisAlpha</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="n">c</span><span class="o">);</span>
                <span class="k">if</span><span class="o">(</span><span class="n">ix</span><span class="o">&gt;=</span><span class="mi">0</span><span class="o">)</span> <span class="o">{</span> 
                    <span class="n">c</span> <span class="o">=</span> <span class="n">ALPHA</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">ix</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                    <span class="n">c</span> <span class="o">=</span> <span class="n">c_orig</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span>


            <span class="c1">// Perform plugboard swap</span>
            <span class="k">for</span><span class="o">(</span><span class="n">String</span> <span class="n">pair</span> <span class="o">:</span> <span class="n">plugboardPairs</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&quot;:&quot;</span><span class="o">))</span> <span class="o">{</span>
                <span class="k">if</span><span class="o">(</span><span class="n">c</span><span class="o">==</span><span class="n">pair</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">0</span><span class="o">))</span> <span class="o">{</span>
                    <span class="n">c</span> <span class="o">=</span> <span class="n">pair</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">c</span><span class="o">==</span><span class="n">pair</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">1</span><span class="o">))</span> <span class="o">{</span>
                    <span class="n">c</span> <span class="o">=</span> <span class="n">pair</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>


            <span class="c1">// Final text</span>
            <span class="k">if</span><span class="o">(</span> <span class="n">c</span><span class="o">&gt;=</span><span class="sc">&#39;A&#39;</span> <span class="o">&amp;&amp;</span> <span class="n">c</span><span class="o">&lt;=</span><span class="sc">&#39;Z&#39;</span><span class="o">)</span> <span class="o">{</span> 
                <span class="n">message_final</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">c</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="c1">// Could not resolve </span>
                <span class="n">message_final</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">c_orig</span><span class="o">);</span>
            <span class="o">}</span>

            <span class="c1">// Increment rotors</span>
            <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">j</span><span class="o">&lt;(</span><span class="n">rotorAlpha</span><span class="o">.</span><span class="na">length</span><span class="o">-</span><span class="mi">1</span><span class="o">);</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
                <span class="n">String</span> <span class="n">alphaL</span> <span class="o">=</span> <span class="n">rotorAlpha</span><span class="o">[</span><span class="n">j</span><span class="o">];</span>
                <span class="kt">int</span> <span class="n">ixL</span> <span class="o">=</span> <span class="n">alphaL</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="n">rotorNotch</span><span class="o">[</span><span class="n">j</span><span class="o">]);</span>
                <span class="n">String</span> <span class="n">alphaR</span> <span class="o">=</span> <span class="n">rotorAlpha</span><span class="o">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="o">];</span>
                <span class="kt">int</span> <span class="n">ixR</span> <span class="o">=</span> <span class="n">alphaR</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="n">rotorNotch</span><span class="o">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="o">]);</span>
                <span class="k">if</span><span class="o">(</span><span class="n">ixL</span><span class="o">!=</span><span class="n">ixR</span><span class="o">)</span> <span class="o">{</span> 
                    <span class="n">rotorAlpha</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">rotateString</span><span class="o">(</span><span class="n">rotorAlpha</span><span class="o">[</span><span class="n">j</span><span class="o">]);</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="c1">// Always increment the right-most rotor</span>
            <span class="kt">int</span> <span class="n">lenny</span> <span class="o">=</span> <span class="n">rotorAlpha</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
            <span class="n">rotorAlpha</span><span class="o">[</span><span class="n">lenny</span><span class="o">-</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="n">rotateString</span><span class="o">(</span><span class="n">rotorAlpha</span><span class="o">[</span><span class="n">lenny</span><span class="o">-</span><span class="mi">1</span><span class="o">]);</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="n">message_final</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>
</pre></div>


<h2>Utility Method: String Rotator</h2>
<p>One last piece that's needed to emulate the rotation of the rotor wheels 
is a method to rotate strings forward 1 character. Here's that method:</p>
<div class="highlight"><pre><span></span>    <span class="c1">/// Rotate a string forward by 1 character, so &quot;ABCDEF&quot; becomes &quot;FABCDE&quot;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">rotateString</span><span class="o">(</span><span class="n">String</span> <span class="n">original</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">lenny</span> <span class="o">=</span> <span class="n">original</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
        <span class="n">StringBuilder</span> <span class="n">rotated</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuilder</span><span class="o">();</span>
        <span class="n">rotated</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">original</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">lenny</span><span class="o">-</span><span class="mi">1</span><span class="o">));</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">lenny</span><span class="o">-</span><span class="mi">1</span><span class="o">;</span><span class="n">i</span><span class="o">++)</span> <span class="o">{</span> 
            <span class="n">rotated</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">original</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">i</span><span class="o">));</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">rotated</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span> <span class="c1">// end Enigma class</span>
</pre></div>


<h2>Complete Enigma Implementation</h2>
<p>Here is a link to the complete Enigma code on git.charlesreid1.com: <a href="https://git.charlesreid1.com/charlesreid1/java-crypto/src/master/enigma/Enigma.java">Enigma.java</a></p>
<p>Now that the Enigma machine implementation is finished, we can test it out.
One feature of the Enigma that makes it easy to test is, it is symmetric.
If we feed a plain text into the Enigma and get the corresponding ciphertext,
we can feed that ciphertext through the Enigma (with the same initial settings) 
and recover the original plain text.</p>
<p>Running the alphabet through the Enigma yields:</p>
<div class="highlight"><pre><span></span>$ java Enigma
IN:  ABCDE FG HIJKL MNOP QRS TUVWXYZ
OUT: TVVFT KS UNVYJ FAFV NPC DZJPWEJ
</pre></div>


<p>Running this back through the Enigma yields:</p>
<div class="highlight"><pre><span></span>$ java Enigma
IN:  TVVFT KS UNVYJ FAFV NPC DZJPWEJ
OUT: ABCDE FG HIJKL MNOP QRS TUVWXYZ
</pre></div>


<p><strong>NOTE:</strong> This code modifies the Enigma machine's settings in-place.
This means multiple sequential calls to the <code>enigma()</code> method will not reset the rotors.
The following code will not recover the original plain text <code>message</code>:</p>
<div class="highlight"><pre><span></span><span class="c1">// This won&#39;t work:</span>
<span class="n">String</span> <span class="n">coded</span> <span class="o">=</span> <span class="n">enigma</span><span class="o">(</span><span class="n">message</span><span class="o">,</span> <span class="n">rotorAlpha</span><span class="o">,</span> <span class="n">rotorNotch</span><span class="o">,</span> <span class="n">rotorInit</span><span class="o">,</span> <span class="n">plugboardPairs</span><span class="o">);</span>
<span class="n">String</span> <span class="n">original2</span> <span class="o">=</span> <span class="n">enigma</span><span class="o">(</span><span class="n">coded</span><span class="o">,</span> <span class="n">rotorAlpha</span><span class="o">,</span> <span class="n">rotorNotch</span><span class="o">,</span> <span class="n">rotorInit</span><span class="o">,</span> <span class="n">plugboardPairs</span><span class="o">);</span>
</pre></div>


<p>To do this correctly, we would need multiple copies of the input arrays <code>rotorAlpha</code>, <code>rotorNotch</code>, and <code>rotorInit</code>:</p>
<div class="highlight"><pre><span></span><span class="n">String</span> <span class="n">plugboardPairs</span> <span class="o">=</span> <span class="s">&quot;IR:HQ:NT:WZ:VC:OY:GP:LF:BX:AK&quot;</span><span class="o">;</span>

<span class="n">String</span><span class="o">[]</span> <span class="n">rotorAlpha</span> <span class="o">=</span> <span class="o">{</span><span class="n">WHEEL</span><span class="o">[</span><span class="mi">1</span><span class="o">],</span><span class="n">WHEEL</span><span class="o">[</span><span class="mi">2</span><span class="o">],</span><span class="n">WHEEL</span><span class="o">[</span><span class="mi">3</span><span class="o">]};</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">rotorNotch</span> <span class="o">=</span> <span class="o">{</span><span class="n">NOTCH</span><span class="o">[</span><span class="mi">1</span><span class="o">],</span><span class="n">NOTCH</span><span class="o">[</span><span class="mi">2</span><span class="o">],</span><span class="n">NOTCH</span><span class="o">[</span><span class="mi">3</span><span class="o">]};</span>
<span class="kt">int</span><span class="o">[]</span> <span class="n">rotorInit</span> <span class="o">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">};</span>
<span class="n">String</span> <span class="n">coded</span> <span class="o">=</span> <span class="n">enigma</span><span class="o">(</span><span class="n">message</span><span class="o">,</span> <span class="n">rotorAlpha</span><span class="o">,</span> <span class="n">rotorNotch</span><span class="o">,</span> <span class="n">rotorInit</span><span class="o">,</span> <span class="n">plugboardPairs</span><span class="o">);</span>

<span class="n">String</span><span class="o">[]</span> <span class="n">rotorAlpha2</span> <span class="o">=</span> <span class="o">{</span><span class="n">WHEEL</span><span class="o">[</span><span class="mi">1</span><span class="o">],</span><span class="n">WHEEL</span><span class="o">[</span><span class="mi">2</span><span class="o">],</span><span class="n">WHEEL</span><span class="o">[</span><span class="mi">3</span><span class="o">]};</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">rotorNotch2</span> <span class="o">=</span> <span class="o">{</span><span class="n">NOTCH</span><span class="o">[</span><span class="mi">1</span><span class="o">],</span><span class="n">NOTCH</span><span class="o">[</span><span class="mi">2</span><span class="o">],</span><span class="n">NOTCH</span><span class="o">[</span><span class="mi">3</span><span class="o">]};</span>
<span class="kt">int</span><span class="o">[]</span> <span class="n">rotorInit2</span> <span class="o">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">};</span>
<span class="n">String</span> <span class="n">original</span> <span class="o">=</span> <span class="n">enigma</span><span class="o">(</span><span class="n">coded</span><span class="o">,</span> <span class="n">rotorAlpha2</span><span class="o">,</span> <span class="n">rotorNotch2</span><span class="o">,</span> <span class="n">rotorInit2</span><span class="o">,</span> <span class="n">plugboardPairs</span><span class="o">);</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;ORIGINAL:  &quot;</span><span class="o">+</span><span class="n">message</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;RECOVERED: &quot;</span><span class="o">+</span><span class="n">original</span><span class="o">);</span>
</pre></div>


<p>This works fine:</p>
<div class="highlight"><pre><span></span><span class="n">ORIGINAL</span><span class="o">:</span>  <span class="n">ABCDE</span> <span class="n">FG</span> <span class="n">HIJKL</span> <span class="n">MNOP</span> <span class="n">QRS</span> <span class="n">TUVWXYZ</span>
<span class="n">RECOVERED</span><span class="o">:</span> <span class="n">ABCDE</span> <span class="n">FG</span> <span class="n">HIJKL</span> <span class="n">MNOP</span> <span class="n">QRS</span> <span class="n">TUVWXYZ</span> 
</pre></div>


<h2>Sources</h2>
<ol>
<li>
<p>"Execution in the Kingdom of Nouns". Steve Yegge. March 2006. Accessed 18 March 2017.
&lt;<a href="https://web.archive.org/web/20170320081755/https://steve-yegge.blogspot.com/2006/03/execution-in-kingdom-of-nouns.html">https://web.archive.org/web/20170320081755/https://steve-yegge.blogspot.com/2006/03/execution-in-kingdom-of-nouns.html</a>&gt;</p>
</li>
<li>
<p>"The Enigma Cipher". Tony Sale and Andrew Hodges. Publication date unknown. Accessed 18 March 2017.
&lt;<a href="https://web.archive.org/web/20170320081639/http://www.codesandciphers.org.uk/enigma/index.htm">https://web.archive.org/web/20170320081639/http://www.codesandciphers.org.uk/enigma/index.htm</a>&gt;</p>
</li>
</ol></div>

    </div>
</div>

<div class="v20"></div>

<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="tags">
            <p>Tags:&nbsp;&nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/ciphers.html">ciphers</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/enigma.html">enigma</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/encryption.html">encryption</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/java.html">java</a>
                    &nbsp;&nbsp;
        </div>

    </div>
</div>


<div class="v200"></div>
  	            	</article>

<div class="row">
    <div class="col-md-4 col-centered" style="text-align: center;">

        <div class="pagination">

            <a class="next" href="https://charlesreid1.github.io/index20.html">&larr; Newer</a>

            &nbsp;
            &nbsp;
            &nbsp;
            &nbsp;
            &nbsp;

            <a class="prev" href="https://charlesreid1.github.io/index22.html">Older &rarr;</a>
        
          <br />
        </div>

    </div>
</div>

<div class="v50"></div>


        </div>

        <div class="col-md-4" style="text-align: center;">
<a name="a_archive"></a>


        <div class="well">

            <h2>September 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/mocking-aws-in-unit-tests.html">Mocking AWS in Unit Tests</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>August 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/writing-a-vim-plugin-with-python.html">Writing a Vim Plugin with Python</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>May 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/deconvoluting-convolutional-neural-networks.html">Deconvoluting Convolutional Neural Networks</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/graphs-for-bioinformatics-part-1-de-bruijn-graphs-hamiltonian-paths-and-eulerian-paths.html">Graphs for Bioinformatics, Part 1: de Bruijn Graphs, Hamiltonian Paths, and Eulerian Paths</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>April 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/the-git-commit-ectomy.html">The Git-Commit-Ectomy</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>March 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/the-josephus-problem-part-3-solving-the-double-step-case.html">The Josephus Problem: Part 3: Solving the Double Step Case</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/the-josephus-problem-part-2-two-examples.html">The Josephus Problem: Part 2: Two Examples</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/the-josephus-problem-part-1-the-problem.html">The Josephus Problem: Part 1: The Problem</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/approximating-pi-happy-pi-day.html">Approximating Pi (Happy Pi Day)</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/five-letter-words-part-5-the-try-trie-tree.html">Five Letter Words: Part 5: The Try Trie Tree</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/five-letter-words-part-4-revisiting-diff-by-one.html">Five Letter Words: Part 4: Revisiting Diff by One</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/centillion-a-document-search-engine.html">centillion: a document search engine</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>February 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/any-color-you-like-as-long-as-its-00add8.html">Any Color You Like, As Long As It's 00ADD8</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/a-few-of-my-favorite-peps.html">A Few of My Favorite PEPs</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/context-managers-in-python.html">Context Managers in Python</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>January 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/building-snakemake-command-line-wrappers-for-kubernetes-workflows.html">Building Snakemake Command Line Wrappers for Kubernetes Workflows</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/building-snakemake-command-line-wrappers-for-workflows.html">Building Snakemake Command Line Wrappers for Workflows</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/recursive-backtracking-in-go-for-bioinformatics-applications-3-go-implementation-of-backtracking.html">Recursive Backtracking in Go for Bioinformatics Applications: 3. Go Implementation of Backtracking</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>December 2018</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/recursive-backtracking-in-go-for-bioinformatics-applications-2-generating-variations.html">Recursive Backtracking in Go for Bioinformatics Applications: 2. Generating Variations</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/recursive-backtracking-in-go-for-bioinformatics-applications-1-counting-variations.html">Recursive Backtracking in Go for Bioinformatics Applications: 1. Counting Variations</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/basic-data-structures-in-go-maps.html">Basic Data Structures in Go: Maps</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/learning-bioinformatics-with-go-and-rosalind.html">Learning Bioinformatics with Go and Rosalind</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>October 2018</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/first-post-of-the-fall-part-2-flaskadillo.html">First Post of the Fall, Part 2: Flaskadillo</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/first-post-of-the-fall-part-1-data-commons.html">First Post of the Fall, Part 1: Data Commons</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>May 2018</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/current-projects.html">Current Projects</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>March 2018</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/charlesreid1com-stack.html">Charlesreid1.com Stack</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>February 2018</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/d3-calendar-visualizations.html">D3 Calendar Visualizations</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/project-euler-problem-172.html">Project Euler Problem 172</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>January 2018</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/4x4-rubiks-cube-part-4-sequence-order.html">4x4 Rubik's Cube: Part 4: Sequence Order</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/4x4-rubiks-cube-part-3-factoring-permutations.html">4x4 Rubik's Cube: Part 3: Factoring Permutations</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/4x4-rubiks-cube-part-2-permutations.html">4x4 Rubik's Cube: Part 2: Permutations</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/4x4-rubiks-cube-part-1-representations.html">4x4 Rubik's Cube: Part 1: Representations</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/lets-generate-permutations.html">Let's Generate Permutations!</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>September 2017</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/five-letter-words-part-3-letter-coverage-and-dynamic-programming.html">Five Letter Words: Part 3: Letter Coverage and Dynamic Programming</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/five-letter-words-part-2-more-five-word-algorithms.html">Five Letter Words: Part 2: More Five-Word Algorithms</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/five-letter-words-part-1-getting-familiar-with-the-list.html">Five Letter Words: Part 1: Getting Familiar With The List</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>August 2017</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/eulers-theorem-the-totient-function-and-calculating-totients-by-hand.html">Euler's Theorem, the Totient Function, and Calculating Totients By Hand</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>July 2017</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/mad-combinatoric-castles.html">Mad Combinatoric Castles</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/project-euler-problem-1.html">Project Euler Problem 1</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/shortest-lattice-paths-and-multiset-permutations.html">Shortest Lattice Paths and Multiset Permutations</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/computing-square-roots-part-2-using-continued-fractions.html">Computing Square Roots: Part 2: Using Continued Fractions</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/computing-square-roots-part-1-using-newtons-method.html">Computing Square Roots: Part 1: Using Newton's Method</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>June 2017</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/cse-143-final-project-hilbert-sort-3-the-code.html">CSE 143 Final Project: Hilbert Sort: 3. The Code</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/cse-143-final-project-hilbert-sort-2-the-solution-algorithm.html">CSE 143 Final Project: Hilbert Sort: 2. The Solution Algorithm</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/cse-143-final-project-hilbert-sort-1-the-problem.html">CSE 143 Final Project: Hilbert Sort: 1. The Problem</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/cse-143-final-project-classy.html">CSE 143 Final Project: Classy</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/cse-143-final-project-checkers.html">CSE 143 Final Project: Checkers</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>May 2017</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/teaching-recursion-with-the-n-queens-problem.html">Teaching Recursion with the N Queens Problem</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/undergraduate-research-project-wireless-sensor-networks-for-internet-of-things-applications-part-2-the-technologies.html">Undergraduate Research Project: Wireless Sensor Networks for Internet of Things Applications (Part 2: The Technologies)</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/undergraduate-research-project-wireless-sensor-networks-for-internet-of-things-applications-part-1-the-project.html">Undergraduate Research Project: Wireless Sensor Networks for Internet of Things Applications (Part 1: The Project)</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>April 2017</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/stunnel.html">Stunnel</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/traveling-schoolteacher-problem.html">Traveling Schoolteacher Problem</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/the-z-machine-a-simple-turing-machine.html">The Z-Machine: A Simple Turing Machine</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/awsome-day-seattle-notes-part-2-networking-security-and-miscellany.html">AWSome Day Seattle Notes: Part 2: Networking, Security, and Miscellany</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/awsome-day-seattle-notes-part-1-the-basics.html">AWSome Day Seattle Notes: Part 1: The Basics</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/setting-up-a-self-hosted-github-clone-with-gitea.html">Setting Up a Self-Hosted Github Clone with Gitea</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/better-timing-of-guava-traveling-salesperson-problem-code-timing-scripts.html">Better Timing of Guava Traveling Salesperson Problem Code: Timing Scripts</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>March 2017</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/fixing-bottlenecks-in-the-guava-traveling-salesperson-problem-code.html">Fixing Bottlenecks in the Guava Traveling Salesperson Problem Code</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/python-vs-perl-n-queens-problem.html">Python vs. Perl: N Queens Problem</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/solving-the-traveling-salesperson-problem-with-java-and-guava.html">Solving the Traveling Salesperson Problem with Java and Guava</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/perl-vs-java-n-queens-problem.html">Perl vs. Java: N Queens Problem</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/enigma-cipher-implementation-part-4-combinatorics.html">Enigma Cipher Implementation: Part 4: Combinatorics</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/enigma-cipher-implementation-part-3-enigma-in-java-without-objects.html">Enigma Cipher Implementation: Part 3: Enigma in Java Without Objects</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/enigma-cipher-implementation-part-2-pseudocode.html">Enigma Cipher Implementation: Part 2: Pseudocode</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/enigma-cipher-implementation-part-1-how-it-works.html">Enigma Cipher Implementation: Part 1: How It Works</a>
            </p>

        </div>

        <div class="v20"></div>



<div class="v100"></div>
        </div>

    </div>



</div>



<script type="text/javascript" src="https://charlesreid1.github.io/theme/js/jquery-1.11.2.js"></script>
<script type="text/javascript" src="https://charlesreid1.github.io/theme/js/bootstrap-3.3.4.js"></script>
<script type="text/javascript" src="https://charlesreid1.github.io/theme/js/d3-3.5.5.js"></script><script type="text/javascript" src="https://charlesreid1.github.io/theme/js/jquery-1.11.2.js"></script>
<script type="text/javascript" src="https://charlesreid1.github.io/theme/js/bootstrap-3.3.4.js"></script>

<footer id="contentinfo" class="body">
<p>&nbsp;</p>
<p>&nbsp;</p>
<center>
	<hr />
</center>
<p>&nbsp;</p>
<p style="text-align: center">
    <span class="fa-stack fa-lg">
        <i class="fa fa-square fa-stack-2x" style="color:#000;"></i>
        <i class="fa fa-terminal fa-stack-1x fa-inverse"></i>
    </span>
    Made from the command line with vim by 
    <a href="http://charlesreid1.com">charlesreid1</a><br />
    with help from <a href="https://getbootstrap.com/">Bootstrap</a> and <a href="http://getpelican.com">Pelican</a>.
</p>

<br />

<p style="text-align: center">
    <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">
    <span class="fa-stack fa-lg">
        <i class="fa fa-square fa-stack-2x" style="color:#000;"></i>
        <i class="fa fa-creative-commons fa-stack-1x fa-inverse"></i>
    </span>
    </a>
    <br />
    Licensed under the <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 License</a>.
</p>

<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=11611748;
var sc_invisible=1;
var sc_security="9fcba820";
</script>
<script type="text/javascript"
src="https://www.statcounter.com/counter/counter.js"
async></script>

<noscript><div class="statcounter"><a title="Web Analytics"
href="http://statcounter.com/" target="_blank"><img
class="statcounter"
src="//c.statcounter.com/11611748/0/9fcba820/1/" alt="Web
Analytics"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->
</footer><!-- /#contentinfo -->
</body>
</html>