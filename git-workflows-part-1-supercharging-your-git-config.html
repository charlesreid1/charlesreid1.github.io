<!DOCTYPE html>
<html lang="en">
<head>
        <title>charlesreid1</title>
        <meta charset="utf-8" />

        <!--
        CSS styles
        -->
        <link href="https://charlesreid1.github.io/theme/css/bootstrap.css"       rel="stylesheet" type="text/css">
        <link href="https://charlesreid1.github.io/theme/css/slate.css"              rel="stylesheet" type="text/css">
        <link href="https://charlesreid1.github.io/theme/css/font-awesome.css"       rel="stylesheet" type="text/css"/>
        <link href="https://charlesreid1.github.io/theme/css/pygment-solarized.css"  rel="stylesheet" type="text/css"/>

        <!--
        my CSS styles
        -->
        <link href="https://charlesreid1.github.io/theme/css/main.css"            rel="stylesheet" type="text/css">
        <link href="https://charlesreid1.github.io/theme/css/dox.css"             rel="stylesheet" type="text/css">


        <!--
        include Angular first
        -->
        <script type="text/javascript" src="https://charlesreid1.github.io/theme/js/angular-1.3.15.js"></script>
        <script type="text/javascript" src="https://charlesreid1.github.io/theme/js/skrollr-0.6.29.js"></script>
        <script type="text/javascript" src="https://charlesreid1.github.io/theme/js/d3-3.5.5.js"></script>

        <!--
        this seems like a bad idea.
        but if I don't put jquery first, I get errors about unrecognized $s.
        -->
        <script type="text/javascript" src="https://charlesreid1.github.io/theme/js/jquery-1.11.2.js"></script>

</head>
<body id="index">
<nav class="navbar navbar-default">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span> 
            </button>
            <a href="https://charlesreid1.github.io" class="navbar-brand">charlesreid1.github.io</a>
        </div>
        <div>
            <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav">

                    <li>
                        <a href="https://charlesreid1.com/wiki">Wiki</a>
                    </li>
                    <li>
                        <a href="https://git.charlesreid1.com/explore">Git</a>
                    </li>
                    <li>
                        <a href="http://spotify.charlesreid1.com">Music</a>
                    </li>
                    <li>
                        <a href="https://charlesreid1.com/life">Life</a>
                    </li>
                    <li>
                        <a href="https://charlesreid1.github.io">Blog</a>
                    </li>
                    <li>
                        <a href="https://charlesreid1.com/about">About Me</a>
                    </li>

                </ul>
            </div>
        </div>
    </div>
</nav>



<div class="container">

<header>
<div class="row">


    <div class="col-md-12">
        <div class="headtext" style="text-align: center;">
            <h1><b>
                Git Workflows, Part 1: Supercharging your Git Config
            </b></h1>
        
            <p class="lead">
                Posted 
                <time datetime="2019-10-07T20:00:00-07:00" pubdate>Monday 10/07/2019</time>
                in 
                <a href="https://charlesreid1.github.io/category/git.html">Git</a>
                </p>
            <p>
            <span style="font-size: 14px">
                <a href="https://charlesreid1.github.io/git-workflows-part-1-supercharging-your-git-config.html">permalink</a>
            </span>
            </p>
        </div>

    </div>

</div>
</header>


<div class="v50"></div>


<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="entry-content"><h1>Table of Contents</h1>
<ul>
<li><a href="#source">Source</a></li>
<li><a href="#user-section">user section</a></li>
<li><a href="#bash-aliases">Bash Aliases</a><ul>
<li><a href="#the-best-one-letter-alias-ever">The Best One Letter Alias Ever</a></li>
<li><a href="#ending-bad-habits">Ending Bad Habits</a></li>
</ul>
</li>
<li><a href="#alias-section">alias section</a><ul>
<li><a href="#log-utils">Log Utils</a></li>
<li><a href="#status-utils">Status Utils</a></li>
<li><a href="#fetching">Fetching</a></li>
<li><a href="#branch-utils">Branch Utils</a><ul>
<li><a href="#branch-and-checkout">Branch and Checkout</a></li>
</ul>
</li>
<li><a href="#remote-utils">Remote Utils</a></li>
<li><a href="#commit-utils">Commit Utils</a><ul>
<li><a href="#committing-all-changes">Committing All Changes</a></li>
<li><a href="#fixing-commits">Fixing Commits</a></li>
</ul>
</li>
<li><a href="#miscellaneous-utils">Miscellaneous Utils</a><ul>
<li><a href="#rebasing-shortcuts">Rebasing shortcuts</a></li>
<li><a href="#diff-shortcuts">Diff shortcuts</a></li>
<li><a href="#pull-shortcuts">Pull shortcuts</a></li>
<li><a href="#clone-shortcuts">Clone shortcuts</a></li>
<li><a href="#contributor-shortcuts">Contributor shortcuts</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#core-section">core section</a></li>
<li><a href="#color-section">color section</a></li>
<li><a href="#url-section">url section</a></li>
</ul>
<h1>Source</h1>
<p>Most of the good stuff is from
<a href="https://github.com/mathiasbynens/dotfiles">https://github.com/mathiasbynens/dotfiles</a>!</p>
<h1>user section</h1>
<p>Start off easy - here's how you set your email and name for commits:</p>
<div class="highlight"><pre><span></span>[user]
    email = foo@bar.com
    name = Foo Bar
</pre></div>


<h1>Bash Aliases</h1>
<h2>The Best One Letter Alias Ever</h2>
<p>Start supercharging how you use git by creating a one-letter alias.</p>
<p>Add this to your <code>~/.bashrc</code> file:</p>
<div class="highlight"><pre><span></span>alias g=&quot;git&quot;
</pre></div>


<p>You're already saving yourself a bunch of keystrokes, and we're just getting started!</p>
<h2>Ending Bad Habits</h2>
<p>This is a nice trick for getting yourself out of bad habits.
My first time using a "sophisticated" branch worklow in git
(i.e., not just committing and pushing to master all the time),
I got in trouble for committing directly to master with a
<code>git push origin master</code> (instead of making a feature branch
and opening a pull request).</p>
<p>To get myself out of the habit of typing <code>git push origin master</code>,
I wanted to map it to an alias that told me no. I did that by
defining <code>git</code> to be a bash function (this works because functions
take precedence over a binary named <code>git</code> on your path).</p>
<p>The git function checks the arguments that are passed to it.
If the arguments are <code>push origin master</code>, it means I'm typing
<code>git push origin master</code>, and I get a slap on the wrist.</p>
<p>Otherwise, it passes the arguments through to the <code>git</code> binary.</p>
<p>You can also put this in <code>~/.bashrc</code>.</p>
<div class="highlight"><pre><span></span>git<span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">[[</span> <span class="nv">$@</span> <span class="o">==</span> <span class="s2">&quot;push origin master&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
        <span class="nb">echo</span> <span class="s2">&quot;nope&quot;</span>
    <span class="k">else</span>
        <span class="nb">command</span> git <span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span>
    <span class="k">fi</span>
<span class="o">}</span>
</pre></div>


<h1>alias section</h1>
<p>In the <code>~/.gitconfig</code> file, aliases specific to git can be
defined in a section beginning with alias.</p>
<h2>Log Utils</h2>
<p>Let's start with some utilities for viewing git logs.</p>
<p>(You can never have too many ways to look at a git log.)</p>
<p>Note that we'll assume the alias bit in the following git config excerpts.</p>
<div class="highlight"><pre><span></span>[alias]
    # courtesy of https://stackoverflow.com/a/34467298
    lg = !&quot;git lg1&quot;
    lg1 = !&quot;git lg1-specific --all&quot;
    lg2 = !&quot;git lg2-specific --all&quot;
    lg3 = !&quot;git lg3-specific --all&quot;

    lg1-specific = log --graph --abbrev-commit --decorate --format=format:&#39;%C(bold blue)%h%C(reset) - %C(bold green)(%ar)%C(reset) %C(white)%s%C(reset) %C(dim white)- %an%C(reset)%C(auto)%d%C(reset)&#39;
    lg2-specific = log --graph --abbrev-commit --decorate --format=format:&#39;%C(bold blue)%h%C(reset) - %C(bold cyan)%aD%C(reset) %C(bold green)(%ar)%C(reset)%C(auto)%d%C(reset)%n&#39;&#39;          %C(white)%s%C(reset) %C(dim white)- %an%C(reset)&#39;
    lg3-specific = log --graph --abbrev-commit --decorate --format=format:&#39;%C(bold blue)%h%C(reset) - %C(bold cyan)%aD%C(reset) %C(bold green)(%ar)%C(reset) %C(bold cyan)(committed: %cD)%C(reset) %C(auto)%d%C(reset)%n&#39;&#39;          %C(white)%s%C(reset)%n&#39;&#39;          %C(dim white)- %an &lt;%ae&gt; %C(reset) %C(dim white)(committer: %cn &lt;%ce&gt;)%C(reset)&#39;
</pre></div>


<p>The <code>git lgX</code> shortcuts give similar views of the log, but with increasing vertical spacing.
<code>git lg1</code> is the most compact, while <code>git lg3</code> is the most comfortable to read, as far as vertical whitespace.
Same with the <code>-specific</code> commands.</p>
<p>This is one more nice short log command:</p>
<div class="highlight"><pre><span></span>    # View abbreviated SHA, description, and history graph of the latest 20 commits
    l = log --pretty=oneline -n 20 --graph --abbrev-commit
</pre></div>


<p>Remember to use this with the <code>g</code> alias for super short log:</p>
<div class="highlight"><pre><span></span>$ g l
* 4357b28 (HEAD -&gt; source) update mocking aws post
* 063ad78 (gh/source, gh/HEAD) add mocking post
* a5f1adc add init keras cnn post
* fb911ec add keras cnn draft
* 3549d35 add rosalind (euler paths) part 7 draft

$ g lg1
* 4357b28 - (67 minutes ago) update mocking aws post - Charles Reid (HEAD -&gt; source)
* 063ad78 - (2 weeks ago) add mocking post - Charles Reid (gh/source, gh/HEAD)
* a5f1adc - (4 months ago) add init keras cnn post - C Reid
* fb911ec - (5 months ago) add keras cnn draft - C Reid
* 3549d35 - (5 months ago) add rosalind (euler paths) part 7 draft - C Reid
...
</pre></div>


<h2>Status Utils</h2>
<p>The git status command is one of my most frequently used commands, so I made a few shortcuts:</p>
<div class="highlight"><pre><span></span>    # View the current working tree status using the short format
    s = status -s
    ss = status
</pre></div>


<p>This makes checking the short or long status of a git repo easy:</p>
<div class="highlight"><pre><span></span>$ g s
AM pelican/content/git-workflows-1-config.md
AM pelican/content/git-workflows-2-teams.md

$ g ss
On branch source
Your branch is ahead of &#39;gh/source&#39; by 1 commit.
  (use &quot;git push&quot; to publish your local commits)

Changes to be committed:
  (use &quot;git restore --staged &lt;file&gt;...&quot; to unstage)
    new file:   pelican/content/git-workflows-1-config.md
    new file:   pelican/content/git-workflows-2-teams.md

Changes not staged for commit:
  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)
  (use &quot;git restore &lt;file&gt;...&quot; to discard changes in working directory)
    modified:   pelican/content/git-workflows-1-config.md
    modified:   pelican/content/git-workflows-2-teams.md
</pre></div>


<h2>Fetching</h2>
<p>Fetching is handy to do, since it just fetches changes from a remote and doesn't actually
change anything or try to merge anything (unlike a <code>git pull</code> command).</p>
<p>The most useful fetch command (<code>git fetch --all</code>) is aliased to <code>g f</code> with the following
bit in the aliases section of the <code>~/.gitconfig</code> file:</p>
<div class="highlight"><pre><span></span>    f = fetch --all
</pre></div>


<h2>Branch Utils</h2>
<p>The only command I might use more than the status command are branch commands,
so here are several branch aliases:</p>
<div class="highlight"><pre><span></span>    b = branch -v
    bv = branch -v
    bb = branch -v

    ba = branch -a
    bb = branch -v -a
</pre></div>


<p>In a similar way, you can get a summary view using <code>g b</code>:</p>
<div class="highlight"><pre><span></span>$ g b
  master 4c828cd [behind 84] update with awsome day notes
* source b18adfd add two git workflow posts

$ g b
  master 940ee98 update mocking post
* source b18adfd add two git workflow posts
</pre></div>


<p>and a little bit more information with <code>g bb</code>:</p>
<div class="highlight"><pre><span></span>$ g bb
  master            940ee98 update mocking post
* source            b18adfd add two git workflow posts
  remotes/gh/HEAD   -&gt; gh/source
  remotes/gh/master 940ee98 update mocking post
  remotes/gh/source b18adfd add two git workflow posts
</pre></div>


<h3>Branch and Checkout</h3>
<p>Sometimes if you are creaing a branch with a long branch name, it can be
inconvenient to have to first create the branch with <code>git branch &lt;branch-name&gt;</code>
and then check it out with <code>git checkout &lt;branch-name&gt;</code>.</p>
<p>To resolve this you can define a <code>git go</code> alias that creates the branch and
then switches to that branch:</p>
<div class="highlight"><pre><span></span>    # Switch to a branch, creating it
    # from the current branch if necessary
    go = &quot;!f() { git checkout -b \&quot;$1\&quot; 2&gt; /dev/null || git checkout \&quot;$1\&quot;; }; f&quot;
</pre></div>


<p>Careful you don't mistype the branch name.</p>
<h2>Remote Utils</h2>
<p>Another useful git command is the remote command, so here are a few
remote aliases:</p>
<div class="highlight"><pre><span></span>    r = remote -v
    rv = remote -v
    ra = remote -v
</pre></div>


<h2>Commit Utils</h2>
<p>Sometimes you have changes that you've staged using <code>git add</code>, but you
want to see the changes that you've staged, before you commit them.</p>
<p>Normally you'd have to use the inconvenient <code>git diff --cached &lt;files&gt;</code>,
but this can be aliased to <code>cdiff</code>, so that you can use <code>git diff</code> to see
unstaged changes and <code>git cdiff</code> to see staged changes.</p>
<p>Even better, you can define the alias <code>g cd</code> to run <code>git cdiff</code>...!</p>
<p>Here's the relevant bit in the aliases section:</p>
<div class="highlight"><pre><span></span>    cdiff = diff --cached
    cd = diff --cached
</pre></div>


<h3>Committing All Changes</h3>
<div class="highlight"><pre><span></span>    # Commit all changes
    ca = !git add -A &amp;&amp; git commit -av
</pre></div>


<h3>Fixing Commits</h3>
<p>Some common operations for repairing commit history before pushing:</p>
<div class="highlight"><pre><span></span>    # Amend the currently staged files to the latest commit
    amend = commit --amend --reuse-message=HEAD

    # Oops
    fix = commit --amend --reuse-message=HEAD --edit
</pre></div>


<h2>Miscellaneous Utils</h2>
<p>There are a few other actions that are useful to add to the aliases section
of the <code>~/.gitconfig</code>:</p>
<h3>Rebasing shortcuts</h3>
<div class="highlight"><pre><span></span>    # Interactive rebase with the given number of latest commits
    reb = &quot;!r() { git rebase -i HEAD~$1; }; r&quot;
</pre></div>


<h3>Diff shortcuts</h3>
<div class="highlight"><pre><span></span>    # Show the diff between the latest commit and the current state
    d = !&quot;git diff-index --quiet HEAD -- || clear; git --no-pager diff --patch-with-stat&quot;

    # `git di $number` shows the diff between the state `$number` revisions ago and the current state
    di = !&quot;d() { git diff --patch-with-stat HEAD~$1; }; git diff-index --quiet HEAD -- || clear; d&quot;
</pre></div>


<h3>Pull shortcuts</h3>
<div class="highlight"><pre><span></span>    p = &quot;!f() { git pull $1 $2; }; f&quot;
</pre></div>


<h3>Clone shortcuts</h3>
<div class="highlight"><pre><span></span>    # Clone a repository including all submodules
    c = clone --recursive
</pre></div>


<h3>Contributor shortcuts</h3>
<p>This last one is convenient for getting a summary of contributors:</p>
<div class="highlight"><pre><span></span>    # List contributors with number of commits
    contributors = shortlog --summary --numbered
</pre></div>


<p>An example for <a href="https://github.com/aws/chalice">https://github.com/aws/chalice</a>:</p>
<div class="highlight"><pre><span></span>$ <span class="nb">cd</span> chalice/
$ g contributors
  <span class="m">1053</span>  James Saryerwinnie
   <span class="m">120</span>  John Carlyle
    <span class="m">94</span>  stealthycoin
    <span class="m">42</span>  kyleknap
    <span class="m">35</span>  jcarlyl
    <span class="m">19</span>  Kyle Knapp
    <span class="m">12</span>  Atharva Chauthaiwale
</pre></div>


<h1>core section</h1>
<p>Because it's the best text editor:</p>
<div class="highlight"><pre><span></span>[core]
    editor = vim
</pre></div>


<p>I have some other stuff I've collected, many of them from
<a href="https://github.com/mathiasbynens/dotfiles">https://github.com/mathiasbynens/dotfiles</a>:</p>
<div class="highlight"><pre><span></span>    # Use custom `.gitignore` and `.gitattributes`
    excludesfile = ~/.gitignore
    attributesfile = ~/.gitattributes

    # Treat spaces before tabs and all kinds of trailing whitespace as an error
    # [default] trailing-space: looks for spaces at the end of a line
    # [default] space-before-tab: looks for spaces before tabs at the beginning of a line
    whitespace = space-before-tab,-indent-with-non-tab,trailing-space

    # Make `git rebase` safer on macOS
    # More info: &lt;http://www.git-tower.com/blog/make-git-rebase-safe-on-osx/&gt;
    ###trustctime = false

    # Prevent showing files whose names contain non-ASCII symbols as unversioned.
    # http://michael-kuehnel.de/git/2014/11/21/git-mac-osx-and-german-umlaute.html
    precomposeunicode = false

    # Speed up commands involving untracked files such as `git status`.
    # https://git-scm.com/docs/git-update-index#_untracked_cache
    untrackedCache = true
</pre></div>


<h1>color section</h1>
<p>Make some nice beautiful colors that are easy to understand:</p>
<div class="highlight"><pre><span></span>[color]

    # Use colors in Git commands that are capable of colored output when
    # outputting to the terminal. (This is the default setting in Git ≥ 1.8.4.)
    ui = auto

[color &quot;branch&quot;]

    current = yellow reverse
    local = yellow
    remote = green

[color &quot;diff&quot;]

    meta = yellow bold
    frag = magenta bold # line info
    old = red # deletions
    new = green # additions

[color &quot;status&quot;]

    added = yellow
    changed = green
    untracked = cyan
</pre></div>


<h1>url section</h1>
<p>This makes some Github-related URLs easier and shorter to type:</p>
<div class="highlight"><pre><span></span>[url &quot;git@github.com:&quot;]

    insteadOf = &quot;gh:&quot;
    pushInsteadOf = &quot;github:&quot;
    pushInsteadOf = &quot;git://github.com/&quot;

[url &quot;git@gist.github.com:&quot;]

    insteadOf = &quot;gst:&quot;
    pushInsteadOf = &quot;gist:&quot;
    pushInsteadOf = &quot;git://gist.github.com/&quot;

[url &quot;git://gist.github.com/&quot;]

    insteadOf = &quot;gist:&quot;
</pre></div>


<p>Now, instead of</p>
<div class="highlight"><pre><span></span>$ git clone git@github.com:org-name/repo-name
</pre></div>


<p>you can do the much simpler</p>
<div class="highlight"><pre><span></span>$ g c gh://org-name/repo-name
</pre></div>


<p>Voila! Start integrating these alises into your daily workflow,
and you'll find yourself using a lot fewer keystrokes!</p></div>

    </div>
</div>

<div class="v20"></div>

<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="tags">
            <p>Tags:&nbsp;&nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/git.html">git</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/rebase.html">rebase</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/cherry-pick.html">cherry-pick</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/branching.html">branching</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/version-control.html">version control</a>
                    &nbsp;&nbsp;
        </div>

    </div>
</div>


<div class="v200"></div>

</div>


<script type="text/javascript" src="https://charlesreid1.github.io/theme/js/jquery-1.11.2.js"></script>
<script type="text/javascript" src="https://charlesreid1.github.io/theme/js/bootstrap-3.3.4.js"></script>
<script type="text/javascript" src="https://charlesreid1.github.io/theme/js/d3-3.5.5.js"></script><script type="text/javascript" src="https://charlesreid1.github.io/theme/js/jquery-1.11.2.js"></script>
<script type="text/javascript" src="https://charlesreid1.github.io/theme/js/bootstrap-3.3.4.js"></script>

<footer id="contentinfo" class="body">
<p>&nbsp;</p>
<p>&nbsp;</p>
<center>
	<hr />
</center>
<p>&nbsp;</p>
<p style="text-align: center">
    <span class="fa-stack fa-lg">
        <i class="fa fa-square fa-stack-2x" style="color:#000;"></i>
        <i class="fa fa-terminal fa-stack-1x fa-inverse"></i>
    </span>
    Made from the command line with vim by 
    <a href="http://charlesreid1.com">charlesreid1</a><br />
    with help from <a href="https://getbootstrap.com/">Bootstrap</a> and <a href="http://getpelican.com">Pelican</a>.
</p>

<br />

<p style="text-align: center">
    <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">
    <span class="fa-stack fa-lg">
        <i class="fa fa-square fa-stack-2x" style="color:#000;"></i>
        <i class="fa fa-creative-commons fa-stack-1x fa-inverse"></i>
    </span>
    </a>
    <br />
    Licensed under the <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 License</a>.
</p>

<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=11611748;
var sc_invisible=1;
var sc_security="9fcba820";
</script>
<script type="text/javascript"
src="https://www.statcounter.com/counter/counter.js"
async></script>

<noscript><div class="statcounter"><a title="Web Analytics"
href="http://statcounter.com/" target="_blank"><img
class="statcounter"
src="//c.statcounter.com/11611748/0/9fcba820/1/" alt="Web
Analytics"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->
</footer><!-- /#contentinfo -->
</body>
</html>