<!DOCTYPE html>
<html lang="en">
<head>
        <title>charlesreid1</title>
        <meta charset="utf-8" />

        <!--
        CSS styles
        -->
        <link href="https://charlesreid1.github.io/theme/css/bootstrap.css"       rel="stylesheet" type="text/css">
        <link href="https://charlesreid1.github.io/theme/css/slate.css"              rel="stylesheet" type="text/css">
        <link href="https://charlesreid1.github.io/theme/css/font-awesome.css"       rel="stylesheet" type="text/css"/>
        <link href="https://charlesreid1.github.io/theme/css/pygment-solarized.css"  rel="stylesheet" type="text/css"/>

        <!--
        my CSS styles
        -->
        <link href="https://charlesreid1.github.io/theme/css/main.css"            rel="stylesheet" type="text/css">
        <link href="https://charlesreid1.github.io/theme/css/dox.css"             rel="stylesheet" type="text/css">


        <!--
        include Angular first
        -->
        <script type="text/javascript" src="https://charlesreid1.github.io/theme/js/angular-1.3.15.js"></script>
        <script type="text/javascript" src="https://charlesreid1.github.io/theme/js/skrollr-0.6.29.js"></script>
        <script type="text/javascript" src="https://charlesreid1.github.io/theme/js/d3-3.5.5.js"></script>

        <!--
        this seems like a bad idea.
        but if I don't put jquery first, I get errors about unrecognized $s.
        -->
        <script type="text/javascript" src="https://charlesreid1.github.io/theme/js/jquery-1.11.2.js"></script>

</head>
<body id="index">
<nav class="navbar navbar-default">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span> 
            </button>
            <a href="https://charlesreid1.github.io" class="navbar-brand">charlesreid1.github.io</a>
        </div>
        <div>
            <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav">

                    <li>
                        <a href="https://charlesreid1.com/wiki">Wiki</a>
                    </li>
                    <li>
                        <a href="https://git.charlesreid1.com/explore">Git</a>
                    </li>
                    <li>
                        <a href="http://spotify.charlesreid1.com">Music</a>
                    </li>
                    <li>
                        <a href="https://charlesreid1.com/life">Life</a>
                    </li>
                    <li>
                        <a href="https://charlesreid1.github.io">Blog</a>
                    </li>
                    <li>
                        <a href="https://charlesreid1.com/about">About Me</a>
                    </li>

                </ul>
            </div>
        </div>
    </div>
</nav>



<div class="container">

    <div class="row">
        <div class="col-md-12 col-centered" style="text-align: center;">
            <div class="v50"></div>
            <div class="cosmojumbo">
                <h1 class="jumbojumbo">charlesreid1.com blog<h1>
            </div>
        </div>
    </div>


    <div class="v50"></div>


    <div class="row">

        <div class="col-md-8" style="text-align: center;">

  	            	<article>
<header>
<div class="row">


    <div class="col-md-12">
        <div class="headtext" style="text-align: center;">
            <h1><b>
                D3 Calendar Visualizations
            </b></h1>
        
            <p class="lead">
                Posted 
                <time datetime="2018-02-16T23:00:00-08:00" pubdate>Friday 02/16/2018</time>
                in 
                <a href="https://charlesreid1.github.io/category/javascript.html">Javascript</a>
                </p>
            <p>
            <span style="font-size: 14px">
                <a href="https://charlesreid1.github.io/d3-calendar-visualizations.html">permalink</a>
            </span>
            </p>
        </div>

    </div>

</div>
</header>


<div class="v50"></div>


<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="entry-content"><h1 id="table-of-contents">Table of Contents</h1>
<ul>
<li><a href="#cal-starting">Starting example</a></li>
<li><a href="#cal-changed">What needs to be changed</a></li>
<li><a href="#cal-data">Formatting the data</a><ul>
<li><a href="#cal-data-mediawiki">MediaWiki edits</a></li>
<li><a href="#cal-data-git">Git commits</a></li>
</ul>
</li>
<li><a href="#cal-colormap">Creating the color map</a></li>
<li><a href="#cal-code">How the calendar code works</a></li>
<li><a href="#cal-final">Final result</a></li>
</ul>
<p><br />
<br /></p>
<p><a name="cal-starting"></a></p>
<h1 id="starting-example">Starting example</h1>
<p>Let's begin with a D3 example. Mike Bostock provided a <a href="https://bl.ocks.org/mbostock/4063318">Calendar View</a>
block illustrating how to draw a very interesting visualization of
large amounts of data over time:</p>
<p><a href="https://bl.ocks.org/mbostock/4063318">
<img src="images/calendar_example.png" />
</a></p>
<p>You might recognize this type of graph from Github, whose activity graph
shows the same visualization.</p>
<p>The data shown in this example consists of several years of stock market data.
It is a simple but very large data set, with each data poit consisting of one date 
and one number (the percentage gain or loss).</p>
<p>The example also shows how to perform a simple calculation from multiple fields
of the data to plot a derived quantity. In this case, the data consists of a 
high, low, and close, and the quantity being plotted is the percent change:</p>
<div class="math">$$
\mbox{% Change} = \dfrac{\mbox{Close} - \mbox{Open} }{\mbox{Open}}
$$</div>
<p><a name="cal-changed"></a></p>
<h1 id="what-needs-to-be-changed">What needs to be changed</h1>
<p>To change this calendar visualization to visualize our own data, we need to change two things:</p>
<ul>
<li>The data set being visualized</li>
<li>The color map being used</li>
</ul>
<p>We can leave the rest alone, or make small modifications as needed. Fortunately, these changes
are straightforward to make for the calendar visualization.</p>
<p><a name="cal-data"></a></p>
<h1 id="formatting-the-data">Formatting the data</h1>
<p>To modify the calendar graph for our own data, we'll output data as a time series: 
one column of date/time stamps, and another column of data to plot.</p>
<p>Let's take a look at the <a href="https://bl.ocks.org/mbostock/raw/4063318/dji.csv">original data</a>:</p>
<div class="highlight"><pre><span></span>Date,Open,High,Low,Close,Volume,Adj Close
2010-10-01,10789.72,10907.41,10759.14,10829.68,4298910000,10829.68
2010-09-30,10835.96,10960.99,10732.27,10788.05,4284160000,10788.05
2010-09-29,10857.98,10901.96,10759.75,10835.28,3990280000,10835.28
2010-09-28,10809.85,10905.44,10714.03,10858.14,4025840000,10858.14
2010-09-27,10860.03,10902.52,10776.44,10812.04,3587860000,10812.04
</pre></div>


<p>In the code, we can see where this data is actually being parsed:</p>
<div class="highlight"><pre><span></span>  <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">nest</span><span class="p">()</span>
      <span class="p">.</span><span class="nx">key</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nb">Date</span><span class="p">;</span> <span class="p">})</span>
      <span class="p">.</span><span class="nx">rollup</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">Close</span> <span class="o">-</span> <span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">Open</span><span class="p">)</span> <span class="o">/</span> <span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">Open</span><span class="p">;</span> <span class="p">})</span>
      <span class="p">.</span><span class="nx">object</span><span class="p">(</span><span class="nx">csv</span><span class="p">);</span>
</pre></div>


<p>So, to modify this to suit our own custom data set, we can output our data as:</p>
<div class="highlight"><pre><span></span>date,series1series2
2010-10-01,1,150
2010-10-02,2,250
2010-10-03,3,350
</pre></div>


<p>and change the data parsing code to:</p>
<div class="highlight"><pre><span></span>  <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">nest</span><span class="p">()</span>
      <span class="p">.</span><span class="nx">key</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">date</span><span class="p">;</span> <span class="p">})</span>
      <span class="p">.</span><span class="nx">rollup</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> 
            <span class="c1">// Change this depending on what you want to plot</span>
            <span class="k">return</span> <span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">series1</span><span class="p">;</span> 
      <span class="p">})</span>
      <span class="p">.</span><span class="nx">object</span><span class="p">(</span><span class="nx">csv</span><span class="p">);</span>
</pre></div>


<p>Next, we discuss a few interesting applications of this visualization technique
and how to generate the data sets.</p>
<p><a name="cal-data-mediawiki"></a></p>
<h2 id="mediawiki-edits">MediaWiki Edits</h2>
<p>One of the applications of interest was scraping a MediaWiki wiki
(<a href="https://charlesreid1.com/wiki">charlesreid1.com/wiki</a> to be precise)
to determine the number of edits made to the wiki on a given date.</p>
<p>Fortunately, MediaWiki provides a rich API for interacting with 
wikis programmatically, and one of the best packages for doing it 
is <a href="https://github.com/wikimedia/pywikibot">pywikibot</a>.</p>
<p>The way we compiled the data set for visualization was to scrape
page histories for every page on the wiki, creating one observation
for each edit on each page, and agglomerate the edits for each day
into a final count.</p>
<p>The schema used was:</p>
<ul>
<li><code>_id</code> - sha1 of text</li>
<li><code>title</code> - title of article</li>
<li><code>timestamp</code> - timestamp of edit</li>
<li><code>count</code> - number of characters in edit</li>
</ul>
<p>The pseudocode used to extract the page edits was:</p>
<div class="highlight"><pre><span></span>    get pages generator
    for page in pages:
        get page revisions generator
        for revision in page revisions:
            drop old doc from database
            insert new doc into database
            update record 
</pre></div>


<p>Finally, a bit of pywikibot code:</p>
<div class="highlight"><pre><span></span>    <span class="c1"># Get the site</span>
    <span class="n">site</span> <span class="o">=</span> <span class="n">get_site</span><span class="p">()</span>

    <span class="c1"># Get the iterator returning pages to process</span>
    <span class="n">page_generator</span> <span class="o">=</span> <span class="n">get_page_generator</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">N</span><span class="p">)</span>

    <span class="c1"># Run the algorithm:</span>
    <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="n">page_generator</span><span class="p">:</span>

        <span class="n">page_title</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">title</span><span class="p">()</span>

        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Now parsing page: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">page_title</span><span class="p">))</span>

        <span class="n">rev_generator</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">revisions</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">count_chars</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">rev</span> <span class="ow">in</span> <span class="n">rev_generator</span><span class="p">:</span>

            <span class="c1"># Assemble the NoSQL document</span>
            <span class="n">doc</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">doc</span><span class="p">[</span><span class="s1">&#39;_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rev</span><span class="o">.</span><span class="n">sha1</span>
            <span class="n">doc</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">page_title</span>
            <span class="n">doc</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rev</span><span class="o">.</span><span class="n">timestamp</span>
            <span class="n">doc</span><span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">rev</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

            <span class="c1"># Insert the new NoSQL document</span>
            <span class="n">page_history_collection</span><span class="o">.</span><span class="n">insert_one</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
</pre></div>


<p>The mechanisms to obtain the page generator</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_site</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Get the Site object representing charlesreid1.com</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">pywikibot</span><span class="o">.</span><span class="n">Site</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">get_page_generator</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">max_items</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the generator that returns the Page objects </span>
<span class="sd">    that we&#39;re interested in, from Site s.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">page_generator</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">allpages</span><span class="p">()</span>
    <span class="k">if</span><span class="p">(</span><span class="n">max_items</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">):</span>
        <span class="n">page_generator</span><span class="o">.</span><span class="n">set_maximum_items</span><span class="p">(</span><span class="n">max_items</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">page_generator</span>
</pre></div>


<p>Note that pywikibot will already have the site configured
once you run the login script. For more information about
how to log in to a wiki with Pybot, and general information
about Pywikibot tasks, see the <a href="https://charlesreid1.com/wiki/Pywikibot">Pywikibot page</a>
on the charlesreid1.com wiki.</p>
<p><a name="cal-data-git"></a></p>
<h2 id="git-commits">Git Commits</h2>
<p>Another application of these types of calendars comes directly
from Github's visualization of the number of commits made by a 
user on each day.</p>
<p>To extract this information, you will need a folder full of git repositories,
which will allow you to use git status to extract commit information from the 
log of each repository and assemble it all into a time series for a calendar.</p>
<p>While there is a Python package for interfacing with the git API, git itself
is extremely powerful and is capable of doing this just fine. We use 
Python's subprocess library to make a call to git status, and parse the 
results into a data structure for exporting to CSV.</p>
<p>Here is the code that was used to walk through each directory
and extract information from a git status command:</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">from</span> <span class="nn">glob</span> <span class="kn">import</span> <span class="n">glob</span>
<span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">datetime</span>


<span class="p">[</span><span class="n">clipped</span><span class="p">]</span>


    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">orgs</span> <span class="o">=</span> <span class="n">glob</span><span class="p">(</span><span class="n">root_dir</span><span class="o">+</span><span class="s2">&quot;/repositories/*&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">org</span> <span class="ow">in</span> <span class="n">orgs</span><span class="p">:</span>
        <span class="n">base_org</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">org</span><span class="p">)</span>
        <span class="n">repos</span> <span class="o">=</span> <span class="n">glob</span><span class="p">(</span><span class="n">org</span><span class="o">+</span><span class="s2">&quot;/*&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">repo</span> <span class="ow">in</span> <span class="n">repos</span><span class="p">:</span>

            <span class="c1"># Print out the org and repo name</span>
            <span class="n">base_repo</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;.git&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">repo</span><span class="p">))</span>
            <span class="n">log_file</span> <span class="o">=</span> <span class="n">base_org</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="n">base_repo</span> <span class="o">+</span> <span class="s2">&quot;.log&quot;</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> : </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">base_org</span><span class="p">,</span><span class="n">base_repo</span><span class="p">))</span>

            <span class="c1"># Get each commit</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">status_dir</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">log_file</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;ISO-8859-1&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">lines</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
                <span class="n">tokens</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
                <span class="n">commit_id</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">date</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">time</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="mi">4</span><span class="p">:]</span>

                <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> 
                                <span class="nb">dict</span><span class="p">(</span>   
                                        <span class="n">commit_id</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                        <span class="n">date</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                                        <span class="n">time</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                                        <span class="n">commits</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
                                        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                                     <span class="p">),</span>
                                <span class="n">ignore_index</span><span class="o">=</span><span class="bp">True</span>
                                <span class="p">)</span>

    <span class="n">ag</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;date&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;commits&#39;</span><span class="p">:</span><span class="nb">sum</span><span class="p">})</span>
    <span class="n">ag</span><span class="p">[</span><span class="s1">&#39;commits&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ag</span><span class="p">[</span><span class="s1">&#39;commits&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">ag</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;commit_counts.csv&#39;</span><span class="p">)</span>
</pre></div>


<p>The last bit of code groups each commit by date, applying the
sum function to the number of commits (1 for each commit), 
to yield the total number of commits for each date:</p>
<div class="highlight"><pre><span></span>date,commits
2014-01-17,2
2014-03-26,11
2014-03-28,3
2014-04-01,4
2014-04-02,10
2014-04-03,4
2014-04-04,3
</pre></div>


<p><a name="cal-colormap"></a></p>
<h1 id="creating-the-color-map">Creating the color map</h1>
<p>The best part of the process is picking a color map for the calendar.
The <a href="http://colorbrewer2.org/#type=sequential&amp;scheme=OrRd&amp;n=7">ColorBrewer</a>
site has some good color palettes inspired by cartographic color needs.
Python also provides some useful libraries and functionality for 
generating colormaps.</p>
<p>There are a number of options:</p>
<ul>
<li><a href="https://matplotlib.org/users/colormaps.html">Matplotlib colormaps</a></li>
<li><a href="https://bokeh.github.io/colorcet/">Bokeh colorcet</a></li>
<li><a href="https://matplotlib.org/cmocean/">Ocean colormaps: cmocean</a></li>
</ul>
<p>Here, we'll cover an alternative approach:
defining a colormap that linearly interpolates
between colors at particular locations on the 
interval 0 to 1.</p>
<p>We will also use the <a href="https://github.com/ubernostrum/webcolors">webcolors</a> 
module in Python to convert between colors in 
various formats, and a function <code>make_cmap()</code>
available from <a href="http://schubert.atmos.colostate.edu/~cslocum/code/custom_cmap.py">Chris Slocum</a>:</p>
<p><a href="https://git.charlesreid1.com/d3/charlesreid1-calendar/src/master/make_cmaps.py">Link to <code>make_cmap.py</code></a></p>
<p><strong>make_cmap.py:</strong></p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">make_cmap</span><span class="p">(</span><span class="n">colors</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">bit</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    make_cmap takes a list of tuples which contain RGB values. The RGB</span>
<span class="sd">    values may either be in 8-bit [0 to 255] (in which bit must be set to</span>
<span class="sd">    True when called) or arithmetic [0 to 1] (default). make_cmap returns</span>
<span class="sd">    a cmap with equally spaced colors.</span>
<span class="sd">    Arrange your tuples so that the first color is the lowest value for the</span>
<span class="sd">    colorbar and the last is the highest.</span>
<span class="sd">    position contains values from 0 to 1 to dictate the location of each color.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="kn">import</span> <span class="nn">matplotlib</span> <span class="kn">as</span> <span class="nn">mpl</span>
    <span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
    <span class="n">bit_rgb</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">256</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">position</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">position</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">position</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">):</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="s2">&quot;position length must be the same as colors&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">position</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="s2">&quot;position must start with 0 and end with 1&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">bit</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">)):</span>
            <span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">bit_rgb</span><span class="p">[</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]],</span>
                         <span class="n">bit_rgb</span><span class="p">[</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]],</span>
                         <span class="n">bit_rgb</span><span class="p">[</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">2</span><span class="p">]])</span>
    <span class="n">cdict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;red&#39;</span><span class="p">:[],</span> <span class="s1">&#39;green&#39;</span><span class="p">:[],</span> <span class="s1">&#39;blue&#39;</span><span class="p">:[]}</span>
    <span class="k">for</span> <span class="n">pos</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">colors</span><span class="p">):</span>
        <span class="n">cdict</span><span class="p">[</span><span class="s1">&#39;red&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pos</span><span class="p">,</span> <span class="n">color</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">color</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">cdict</span><span class="p">[</span><span class="s1">&#39;green&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pos</span><span class="p">,</span> <span class="n">color</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">color</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
        <span class="n">cdict</span><span class="p">[</span><span class="s1">&#39;blue&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pos</span><span class="p">,</span> <span class="n">color</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">color</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>

    <span class="n">cmap</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">LinearSegmentedColormap</span><span class="p">(</span><span class="s1">&#39;my_colormap&#39;</span><span class="p">,</span><span class="n">cdict</span><span class="p">,</span><span class="mi">256</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cmap</span>
</pre></div>


<p>Now, an example of how we can call this function: 
this code creates a colormap ranging from purple to orange.</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">purple_to_orange</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Dark purple to bright orange.&quot;&quot;&quot;</span>

    <span class="n">start_hex</span> <span class="o">=</span> <span class="s2">&quot;#4d2b4b&quot;</span>
    <span class="n">mid1_hex</span>  <span class="o">=</span> <span class="s2">&quot;#8c6bb1&quot;</span>
    <span class="n">mid2_hex</span>  <span class="o">=</span> <span class="s2">&quot;#fdae6b&quot;</span>
    <span class="n">end_hex</span>   <span class="o">=</span> <span class="s2">&quot;#f16913&quot;</span>

    <span class="n">start_color</span> <span class="o">=</span> <span class="p">[</span><span class="n">j</span><span class="o">/</span><span class="mi">255</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">webcolors</span><span class="o">.</span><span class="n">hex_to_rgb</span><span class="p">(</span><span class="n">start_hex</span><span class="p">)]</span>
    <span class="n">mid1_color</span>   <span class="o">=</span> <span class="p">[</span><span class="n">j</span><span class="o">/</span><span class="mi">255</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">webcolors</span><span class="o">.</span><span class="n">hex_to_rgb</span><span class="p">(</span><span class="n">mid1_hex</span><span class="p">)]</span>
    <span class="n">mid2_color</span>   <span class="o">=</span> <span class="p">[</span><span class="n">j</span><span class="o">/</span><span class="mi">255</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">webcolors</span><span class="o">.</span><span class="n">hex_to_rgb</span><span class="p">(</span><span class="n">mid2_hex</span><span class="p">)]</span>
    <span class="n">end_color</span>   <span class="o">=</span> <span class="p">[</span><span class="n">j</span><span class="o">/</span><span class="mi">255</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">webcolors</span><span class="o">.</span><span class="n">hex_to_rgb</span><span class="p">(</span><span class="n">end_hex</span><span class="p">)]</span>

    <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">start_color</span><span class="p">,</span> <span class="n">mid1_color</span><span class="p">,</span> <span class="n">mid2_color</span><span class="p">,</span> <span class="n">end_color</span><span class="p">]</span>
    <span class="n">position</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
    <span class="n">cm</span> <span class="o">=</span> <span class="n">make_cmap</span><span class="p">(</span><span class="n">colors</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
</pre></div>


<p>Now, the following code will evaluate the colormap to create
9 separate hex colors:</p>
<div class="highlight"><pre><span></span>    <span class="c1"># Now just call cm(0.0) thru cm(1.0)</span>
    <span class="n">N</span> <span class="o">=</span> <span class="mi">9</span>
    <span class="n">hex_colorz</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">i</span><span class="o">/</span><span class="n">N</span>
        <span class="n">rgbd_color</span> <span class="o">=</span> <span class="n">cm</span><span class="p">(</span><span class="n">x</span><span class="p">)[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">rgb_color</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">c</span><span class="o">*</span><span class="mi">255</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">rgbd_color</span><span class="p">]</span>
        <span class="n">hex_color</span> <span class="o">=</span> <span class="n">webcolors</span><span class="o">.</span><span class="n">rgb_to_hex</span><span class="p">(</span><span class="n">rgb_color</span><span class="p">)</span>
        <span class="n">hex_colorz</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hex_color</span><span class="p">)</span>

    <span class="k">print</span><span class="p">(</span><span class="n">hex_colorz</span><span class="p">)</span>
</pre></div>


<p><a name="cal-code"></a></p>
<h1 id="how-the-calendar-code-works">How the calendar code works</h1>
<p>Start with the HTML document: </p>
<div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;background: #272b30;&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;calendar&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://d3js.org/d3.v4.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="cm">/* D3 code goes here */</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</pre></div>


<p>Next, the Javascript code that creates the calendar
visualization. We'll walk through each part.</p>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="mi">700</span><span class="p">,</span>
    <span class="nx">height</span> <span class="o">=</span> <span class="mi">90</span><span class="p">,</span>
    <span class="nx">cellSize</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>

<span class="c1">// big integers</span>
<span class="kd">var</span> <span class="nx">formatStuff</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm">TEH COLORRRZZZZ</span>
<span class="cm">*/</span>
<span class="kd">var</span> <span class="nx">realBackgroundColor</span> <span class="o">=</span> <span class="s2">&quot;#272b30&quot;</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">tileBackgroundColor</span> <span class="o">=</span> <span class="nx">realBackgroundColor</span><span class="p">;</span><span class="c1">//&quot;#3a3a3a&quot;;</span>
<span class="kd">var</span> <span class="nx">tileStrokeColor</span>     <span class="o">=</span> <span class="s2">&quot;#3a3a3a&quot;</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">monthStrokeColor</span>    <span class="o">=</span> <span class="s2">&quot;#4a4a4a&quot;</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">color</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleQuantize</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">domain</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">60</span><span class="p">])</span>
    <span class="p">.</span><span class="nx">range</span><span class="p">([</span><span class="s2">&quot;#4d2b4b&quot;</span><span class="p">,</span><span class="s2">&quot;#5a3961&quot;</span><span class="p">,</span><span class="s2">&quot;#684777&quot;</span><span class="p">,</span><span class="s2">&quot;#77558f&quot;</span><span class="p">,</span><span class="s2">&quot;#8463a5&quot;</span><span class="p">,</span><span class="s2">&quot;#cc9189&quot;</span><span class="p">,</span><span class="s2">&quot;#fba25c&quot;</span><span class="p">,</span><span class="s2">&quot;#f78e43&quot;</span><span class="p">,</span><span class="s2">&quot;#f47b2b&quot;</span><span class="p">,</span><span class="s2">&quot;#f16913&quot;</span><span class="p">]);</span>
<span class="c1">// purple orange</span>
</pre></div>


<p>The canvas goes on the div tag with id <code>calendar</code>:</p>
<div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm">Make the canvas</span>
<span class="cm">*/</span>
<span class="kd">var</span> <span class="nx">svg</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#calendar&quot;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">2019</span><span class="p">).</span><span class="nx">reverse</span><span class="p">())</span>
  <span class="p">.</span><span class="nx">enter</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;g&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">,</span> <span class="s2">&quot;translate(&quot;</span> <span class="o">+</span> <span class="p">((</span><span class="nx">width</span> <span class="o">-</span> <span class="nx">cellSize</span> <span class="o">*</span> <span class="mi">53</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span> <span class="o">-</span> <span class="nx">cellSize</span> <span class="o">*</span> <span class="mi">7</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">);</span>



<span class="cm">/*</span>
<span class="cm">Write the years</span>
<span class="cm">*/</span>
<span class="nx">svg</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">,</span> <span class="s2">&quot;translate(-6,&quot;</span> <span class="o">+</span> <span class="nx">cellSize</span> <span class="o">*</span> <span class="mf">3.5</span> <span class="o">+</span> <span class="s2">&quot;)rotate(-90)&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;font-family&quot;</span><span class="p">,</span> <span class="s2">&quot;sans-serif&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span> <span class="s2">&quot;#bbb&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">d</span><span class="p">;</span> <span class="p">});</span>
</pre></div>


<p>The next two portions are the meat of the calendar visualization,
drawing the tiles and outlines:</p>
<div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm">Draw the tiles representing days of the year</span>
<span class="cm">(also draw tile outlines)</span>
<span class="cm">*/</span>
<span class="kd">var</span> <span class="nx">rect</span> <span class="o">=</span> <span class="nx">svg</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;g&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span>   <span class="nx">tileBackgroundColor</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="nx">tileStrokeColor</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;rect&quot;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">timeDays</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">d</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">));</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">enter</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;rect&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="nx">cellSize</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="nx">cellSize</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">timeWeek</span><span class="p">.</span><span class="nx">count</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">timeYear</span><span class="p">(</span><span class="nx">d</span><span class="p">),</span> <span class="nx">d</span><span class="p">)</span> <span class="o">*</span> <span class="nx">cellSize</span><span class="p">;</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getDay</span><span class="p">()</span> <span class="o">*</span> <span class="nx">cellSize</span><span class="p">;</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">datum</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">timeFormat</span><span class="p">(</span><span class="s2">&quot;%Y-%m-%d&quot;</span><span class="p">));</span>


<span class="cm">/*</span>
<span class="cm">Draw outlines of groups representing months</span>
<span class="cm">*/</span>
<span class="nx">svg</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;g&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span> <span class="s2">&quot;none&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="nx">monthStrokeColor</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;path&quot;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">timeMonths</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">d</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">));</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">enter</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;path&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="nx">pathMonth</span><span class="p">);</span>
</pre></div>


<p>Now, the code that loads the data, filters it, performs any calculations,
and draws colored rectangles on top of the baseline square grid:</p>
<div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm">Load up the csv file</span>
<span class="cm">*/</span><span class="w"></span>
d3<span class="o">.</span>csv<span class="o">(</span><span class="s">&quot;page_edits.csv&quot;</span><span class="o">,</span><span class="w"> </span>function<span class="o">(</span>error<span class="o">,</span><span class="w"> </span>csv<span class="o">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">  </span><span class="kr">if</span><span class="w"> </span><span class="o">(</span>error<span class="o">)</span><span class="w"> </span>throw<span class="w"> </span>error<span class="err">;</span><span class="w"></span>

<span class="w">  </span><span class="cm">/*</span>
<span class="cm">  This is where you decide what values to plot</span>
<span class="cm">  */</span><span class="w"></span>
<span class="w">  </span>var<span class="w"> </span>data<span class="w"> </span><span class="o">=</span><span class="w"> </span>d3<span class="o">.</span>nest<span class="o">()</span><span class="w"></span>
<span class="w">        </span><span class="o">.</span>key<span class="o">(</span>function<span class="o">(</span>d<span class="o">)</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="kr">return</span><span class="w"> </span>d<span class="o">.</span>timestamp<span class="w"> </span><span class="err">;</span><span class="w"> </span><span class="err">}</span><span class="o">)</span><span class="w"></span>
<span class="w">        </span><span class="o">.</span>rollup<span class="o">(</span>function<span class="o">(</span>d<span class="o">)</span><span class="w"> </span><span class="err">{</span><span class="w"> </span>
<span class="w">            </span><span class="kr">return</span><span class="w"> </span>d<span class="err">[</span><span class="m">0</span><span class="err">]</span><span class="o">.</span>edits<span class="err">;</span><span class="w"> </span>
<span class="w">        </span><span class="err">}</span><span class="o">)</span><span class="w"></span>
<span class="w">        </span><span class="o">.</span>object<span class="o">(</span>csv<span class="o">)</span><span class="err">;</span><span class="w"></span>

<span class="w">  </span>rect<span class="o">.</span>filter<span class="o">(</span>function<span class="o">(</span>d<span class="o">)</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="kr">return</span><span class="w"> </span>d<span class="w"> </span>in<span class="w"> </span>data<span class="err">;</span><span class="w"> </span><span class="err">}</span><span class="o">)</span><span class="w"></span>
<span class="w">        </span><span class="o">.</span>attr<span class="o">(</span><span class="s">&quot;fill&quot;</span><span class="o">,</span><span class="w"> </span>function<span class="o">(</span>d<span class="o">)</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="kr">return</span><span class="w"> </span>color<span class="o">(</span>data<span class="err">[</span>d<span class="err">]</span><span class="o">)</span><span class="err">;</span><span class="w"> </span><span class="err">}</span><span class="o">)</span><span class="w"></span>
<span class="w">        </span><span class="o">.</span>append<span class="o">(</span><span class="s">&quot;title&quot;</span><span class="o">)</span><span class="w"></span>
<span class="w">        </span><span class="o">.</span>text<span class="o">(</span>function<span class="o">(</span>d<span class="o">)</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="kr">return</span><span class="w"> </span>d<span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span>formatStuff<span class="o">(</span>data<span class="err">[</span>d<span class="err">]</span><span class="o">)</span><span class="err">;</span><span class="w"> </span><span class="err">}</span><span class="o">)</span><span class="err">;</span><span class="w"></span>
<span class="err">}</span><span class="o">)</span><span class="err">;</span><span class="w"></span>
</pre></div>


<p>Finally, the most mysterious bit of magic in this code is 
the code that draws the squares around the months.
This has to use the coordinates of the beginning and end 
of the months to draw a complicated square path. </p>
<p>It's magic, it works, we're happy.</p>
<div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">pathMonth</span><span class="p">(</span><span class="nx">t0</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">t1</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">t0</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">(),</span> <span class="nx">t0</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
      <span class="nx">d0</span> <span class="o">=</span> <span class="nx">t0</span><span class="p">.</span><span class="nx">getDay</span><span class="p">(),</span> <span class="nx">w0</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">timeWeek</span><span class="p">.</span><span class="nx">count</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">timeYear</span><span class="p">(</span><span class="nx">t0</span><span class="p">),</span> <span class="nx">t0</span><span class="p">),</span>
      <span class="nx">d1</span> <span class="o">=</span> <span class="nx">t1</span><span class="p">.</span><span class="nx">getDay</span><span class="p">(),</span> <span class="nx">w1</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">timeWeek</span><span class="p">.</span><span class="nx">count</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">timeYear</span><span class="p">(</span><span class="nx">t1</span><span class="p">),</span> <span class="nx">t1</span><span class="p">);</span>
  <span class="k">return</span> <span class="s2">&quot;M&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">w0</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="nx">cellSize</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">d0</span> <span class="o">*</span> <span class="nx">cellSize</span>
      <span class="o">+</span> <span class="s2">&quot;H&quot;</span> <span class="o">+</span> <span class="nx">w0</span> <span class="o">*</span> <span class="nx">cellSize</span> <span class="o">+</span> <span class="s2">&quot;V&quot;</span> <span class="o">+</span> <span class="mi">7</span> <span class="o">*</span> <span class="nx">cellSize</span>
      <span class="o">+</span> <span class="s2">&quot;H&quot;</span> <span class="o">+</span> <span class="nx">w1</span> <span class="o">*</span> <span class="nx">cellSize</span> <span class="o">+</span> <span class="s2">&quot;V&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">d1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="nx">cellSize</span>
      <span class="o">+</span> <span class="s2">&quot;H&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">w1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="nx">cellSize</span> <span class="o">+</span> <span class="s2">&quot;V&quot;</span> <span class="o">+</span> <span class="mi">0</span>
      <span class="o">+</span> <span class="s2">&quot;H&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">w0</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="nx">cellSize</span> <span class="o">+</span> <span class="s2">&quot;Z&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p><a name="cal-final"></a></p>
<h1 id="final-result">Final result</h1>
<p>The finished product, visualizing edits to <a href="https://charlesreid1.com/wiki/">charlesreid1.com/wiki/</a>
and commits to <a href="http://git.charlesreid1.com">git.charlesreid1.com</a>,
can be seen at the following links:</p>
<ul>
<li>Wiki edits calendar: <a href="https://charlesreid1.com/wiki_calendar">https://charlesreid1.com/wiki_calendar</a></li>
<li>Git commits calendar: <a href="https://git.charlesreid1.com/git_calendar">https://git.charlesreid1.com/git_calendar</a></li>
</ul>
<p><a href="https://charlesreid1.com/wiki_calendar">
<img src="images/wiki_calendar.png" />
</a></p>
<p><a href="http://charlesreid1.com/git_calendar">
<img src="images/git_calendar.png" />
</a></p>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script></div>

    </div>
</div>

<div class="v20"></div>

<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="tags">
            <p>Tags:&nbsp;&nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/javascript.html">javascript</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/d3.html">d3</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/computer-science.html">computer science</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/python.html">python</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/colors.html">colors</a>
                    &nbsp;&nbsp;
        </div>

    </div>
</div>


<div class="v200"></div>
  	            	</article>
  	            	<article>
<header>
<div class="row">


    <div class="col-md-12">
        <div class="headtext" style="text-align: center;">
            <h1><b>
                Project Euler Problem 172
            </b></h1>
        
            <p class="lead">
                Posted 
                <time datetime="2018-02-16T18:30:00-08:00" pubdate>Friday 02/16/2018</time>
                in 
                <a href="https://charlesreid1.github.io/category/mathematics.html">Mathematics</a>
                </p>
            <p>
            <span style="font-size: 14px">
                <a href="https://charlesreid1.github.io/project-euler-problem-172.html">permalink</a>
            </span>
            </p>
        </div>

    </div>

</div>
</header>


<div class="v50"></div>


<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="entry-content"><h1 id="table-of-contents">Table of Contents</h1>
<ul>
<li><a href="#pe172-problem">Overview: Problem 172</a></li>
<li><a href="#pe172-background">Background</a><ul>
<li><a href="#pe172-multiset">Multiset Permutations</a></li>
<li><a href="#pe172-problemsoln">A Simple Problem (And Solution)</a></li>
<li><a href="#pe172-complicated">A Slightly More Complicated Problem</a></li>
</ul>
</li>
<li><a href="#pe172-algorithm">Algorithm</a><ul>
<li><a href="#pe172-zero">Ignoring Numbers Starting with 0</a></li>
</ul>
</li>
<li><a href="#pe172-code">Code</a><ul>
<li><a href="#pe172-test">Test Cases</a></li>
<li><a href="#pe172-recursion">Recursion</a></li>
<li><a href="#pe172-pseudocode">Pseudocode</a></li>
<li><a href="#pe172-python-code">Python Code</a></li>
</ul>
</li>
<li><a href="#pe172-final">Final Answer</a></li>
</ul>
<p><br />
<br /></p>
<p><a name="pe172-problem"></a></p>
<h1 id="overview-problem-172">Overview: Problem 172</h1>
<p>How many 18-digit numbers <span class="math">\(n\)</span> (without leading zeros) are there 
such that no digit occurs more than three times in <span class="math">\(n\)</span>?</p>
<p><a href="https://projecteuler.net/problem=172">Link to Project Euler Problem 172</a></p>
<p><a name="pe172-background"></a></p>
<h1 id="background">Background</h1>
<p>Project Euler Problem 172 is your classic Project Euler problem: short, simple, and overwhelmingly complicated.</p>
<p>To nail this one, it's important to start simple - very simple. What I'll do is walk through the process 
of breaking this problem down to find and generalize the patterns needed to count permutations of digits.</p>
<p>First, in combinatorics problems it is important to think about what is changing, and how to count
possible outcomes one piece at a time. Then the overall pieces can be combined to get the total count. 
In this case, we can think about a case for each digit: the case of 3 occurrences, the case of 2 
occurrences, the case of 1 occurrence, and the case of 0 occurrences. Depending on the case, we limit 
our choices for later digits.</p>
<p>Let's start with a similar, but much simpler, problem: how do we construct a binary number with N 
digits and no more than m 0s and no more than m 1s?</p>
<p>In fact, let's make it even easier: how do we construct a 10 digit binary number with no more than 
5 0's and no more than 5 1's?</p>
<p>The answer is, there is only ONE way to choose no more than 5 0's and no more than 5 1's to form a 
10 digit number, and that's by having exactly 5 0's and 5 1's. Now that we know exactly how many of 
each digit we have, we can count the number of permutations of the number 0000011111 (the number of 
permutations).</p>
<p><a name="pe172-multiset"></a></p>
<h2 id="multiset-permutations">Multiset Permutations</h2>
<p>Note that multiset permutations are also discussed on the following wiki pages and blog posts:</p>
<ul>
<li><a href="https://charlesreid1.com/wiki/Project Euler/172">Wiki: Project Euler/172</a></li>
<li><a href="https://charlesreid1.com/wiki/Project Euler/15">Wiki: Project Euler/15</a></li>
<li><a href="https://charlesreid1.com/wiki/ Project Euler/502">Wiki: Project Euler/502</a></li>
<li><a href="https://charlesreid1.com/wiki/ AOCP/Multisets">Wiki: AOCP/Multisets</a></li>
<li><a href="https://charlesreid1.github.io/shortest-lattice-paths-and-multiset-permutations.html">Blog: Shortest Lattice Paths and Multiset Permutations</a></li>
</ul>
<p>If we are selecting from a group of <span class="math">\(N_1\)</span> things of type A, <span class="math">\(N_2\)</span> things of type B, and <span class="math">\(N_3\)</span> things of type C 
to form a total of <span class="math">\(N\)</span> things, this type of combinatorics problem is called a multiset permutation, and the 
total number of ways of arranging this set of 3 things is given by:</p>
<div class="math">$$
\binom{N}{N_1, N_2, N_3} = \dfrac{N!}{N_1! N_2! N_3!}
$$</div>
<p>In fact, this generalizes, for <span class="math">\(k\)</span> classes of things we have a <span class="math">\(k\)</span>-set permutation:</p>
<div class="math">$$
\binom{N}{N_1, \dots, N_k} = \dfrac{N!}{N_1! \dots N_k!}
$$</div>
<p><a name="pe172-problemsoln"></a></p>
<h2 id="a-simple-problem-and-solution">A Simple Problem (And Solution)</h2>
<p>Back to the problem at hand: to count the number of ways of placing 5 0s and 5 1s to form a 10 digit number.</p>
<p>Once we place 5 digits into any of the 10 available slots, that fixes the locations of the remaining 5 digits. 
However, we still have to include two 5! values, to account for all possible duplicates if we exchanged all 5 
of the 1s with one another, or all 5 of the 0s with one another. We use the expression:</p>
<div class="math">$$
\binom{10}{5} = \dfrac{10!}{5! 5!} = 10 \times 9 \times 8 \times 7 \times 6
$$</div>
<p><a name="pe172-complicated"></a></p>
<h2 id="a-slightly-more-complicated-problem">A slightly More Complicated Problem</h2>
<p>To solve a slightly more complicated problem: suppose we have to assemble a 10-digit binary number from no more than 6 0s and no more than 6 1s?</p>
<p>Now we have 3 possible cases of numbers of 0s:</p>
<div class="highlight"><pre><span></span>4 0s: 0000111111 - and its permutations

5 0s: 0000011111 - and its permutations

6 0s: 0000001111 - and its permutations
</pre></div>


<p>For each of these cases, we can think of it as the "bucket" of 0s containing 4 0s (5 and 6 0s, respectively) 
and the "bucket" of 1s containing 6 1s (5 and 4 1s, respectively). We still have a number of permutations 
that we can form using this given number of 0s and 1s, given by a multiset permutation expression.</p>
<p>For each case, we have a multiset permutation expression that tells us how many permutations we can form 
from the given number of 0s and 1s:</p>
<div class="math">$$
\binom{ N }{ N_0, N_1 }
$$</div>
<p>So we have three possible outcomes, and the total number of arrangements is the sum of these three cases:</p>
<div class="math">$$
N_{perms} = \binom{ 10 }{ 6, 4} + \binom{ 10 }{ 5, 5 } + \binom{ 10 }{ 6 , 4 }
$$</div>
<p><a name="pe172-algorithm"></a></p>
<h1 id="algorithm">Algorithm</h1>
<p>We can generalize the process. Suppose we are forming a number of length N from a number of digits/classes <span class="math">\(k\)</span> 
labeled from <span class="math">\(0 \dots k-1\)</span>, and each digit/class can only appear a maximum of <span class="math">\(m\)</span> times.</p>
<p>The number of combinations that can be formed for a given <span class="math">\(N, k, m\)</span> is given by the multiset permutation 
expression above. So the total number of permutations that can be formed is a sum of these multiset permutation 
expressions, over each possible combination of digits/classes into a number of length <span class="math">\(N\)</span>.</p>
<p>In computer science terms, we can think of this as a nested for loop or dynamic program; in mathematical terms, 
we can think of a sequence of summations whose limits depend on the variables in the other summations.</p>
<div class="math">$$
\sum_{N_1} \sum_{N_2} \dots \sum_{N_k} \binom{N}{N_0, N_1, N_2, \dots, N_{k-1}}
$$</div>
<p>where the limits of the summations are given by:</p>
<div class="math">$$
N_1 = \min \left(N - (k-1) m, 0 \right) \dots m
$$</div>
<div class="math">$$
N_2 = \min \left( N - N_1 - (k-2) m, 0 \right) \dots m
$$</div>
<p>etc...</p>
<div class="math">$$
N_{k-1} = \min \left( N - N_1 - N_2 - \dots - N_{k-2}, 0 \right) \dots m
$$</div>
<p>these all fix the number of zeros N_0:</p>
<div class="math">$$
N_0 = N - N_1 - N_2 - N_3 - \dots - N_k
$$</div>
<p>Notice that we ignore N_0 in the list of summations, because fixing the number of the first k-1 digits/classes 
(1s, 2s, 3s, ..., (k-1)s) will fix the number of 0s. Alternatively, we could count 0s and include a summation over <span class="math">\(N_0\)</span>, 
and eliminate the last summation over <span class="math">\(k-1\)</span>.</p>
<p>However, the multiset permutation expression includes ALL of the N's, from <span class="math">\(N_0\)</span> to <span class="math">\(N_{k-1}\)</span>, since the choice 
of each variable leads to additional permutations.</p>
<p>Also note that any algorithm implementing this procedure can save time by checking if, for the preceding combinations 
of <span class="math">\(N\)</span>, we have already reached the maximum possible digits that can be selected. (Alternatively, we could write the 
upper limit of the summations as expressions depending on the prior values of <span class="math">\(N_i\)</span>, but we'll keep it simple.) </p>
<p><a name="pe172-zero"></a></p>
<h2 id="ignoring-numbers-starting-with-zero">Ignoring Numbers Starting with Zero</h2>
<p>We have one last hurdle remaining, and that is how to ignore numbers that start with 0.</p>
<p>If we think about the problem as selecting the number of times each digit is repeated, then assembling that 
selection into all possible permutations, fixing the first digit as 0 is equivalent to removing one from the 
total length of the number that must be assembled, and removing one from the possible 0s that will go in the 
final number. Thus, if we are assembling an N digit number from <span class="math">\(N_0\)</span> 0s, <span class="math">\(N_1\)</span> 1s, <span class="math">\(N_2\)</span> 2s, <span class="math">\(N_3\)</span> 3s, on up to <span class="math">\(N_9\)</span> 9s, 
then the total number of permutations is given by:</p>
<div class="math">$$
\binom{ N }{N_0, N_1, \dots, N_9}
$$</div>
<p>If we fix the first digit as 0, the remaining number of permutations is given by:</p>
<div class="math">$$
\binom{N-1}{ N_0-1, N_1, \dots, N_9 }
$$</div>
<p>Therefore, the number of permutations, excluding those beginning with 0, is written:</p>
<div class="math">$$
\binom{ N }{N_0, N_1, \dots, N_9} - \binom{N-1}{ N_0-1, N_1, \dots, N_9 }
$$</div>
<p>Also, it is important to note that if N_0 = 0 to begin with, there are no possible ways of assembling numbers that begin with 0 because there are no 0s in the number, so the second term becomes 0:</p>
<div class="math">$$
\binom{ N }{0, N_1, \dots, N_9} - 0
$$</div>
<p><a name="pe172-code"></a></p>
<h1 id="code">Code</h1>
<p><a name="pe172-test-cases"></a></p>
<h2 id="test-cases">Test Cases</h2>
<h3 id="test-case-1">Test Case 1</h3>
<p>Assemble two digits <span class="math">\(\{0,1\}\)</span> into a 10-digit number, if each digit <span class="math">\(\{0,1\}\)</span> can occur up to 5 times.</p>
<p>In this case, we know that 0 and 1 must occur exactly 5 times each. Now we are asking how we can assemble 
two sets of 5 things into 10 slots. This is a multiset permutation problem:</p>
<div class="math">$$
\binom{10}{5,5} = \dfrac{10!}{5! \cdot 5!} = \dfrac{10 \cdot 9 \cdot 8 \cdot 7 \cdot 6}{5 \cdot 4 \cdot 3 \cdot 2 \cdot 1} = 252
$$</div>
<p>But wait! We also want to exclude numbers starting with 0, so we actually have:</p>
<div class="math">$$
\binom{10}{5, 5} - \binom{9}{4, 5} = 126
$$</div>
<p>which is half of 252 - exactly what we would expect.</p>
<h3 id="test-case-2">Test Case 2</h3>
<p>Assemble three digits <span class="math">\(\{[0, 1, 2\}\)</span> into a 6-digit number, if each digit <span class="math">\(\{0, 1, 2\}\)</span> can occur up to 3 times. No number should start with 0.</p>
<p>In the prior case, we had one outcome of number of 0s and 1s, but in this case, we have a larger number of outcomes that we might see.</p>
<p>Evaluating the expressions for the limits of <span class="math">\(N_i\)</span>, we get:</p>
<div class="math">$$
\sum_{N_0 = 0}^{3} \sum_{N_1 = \max(0, 3 - N_0) }^{3} \binom{6}{N_0, N_1, (N-N_0-N_1)}
$$</div>
<p>where <span class="math">\(N_2 = N - N_0 - N_1\)</span>. Written out, this becomes the total number of possible 6-digit numbers,</p>
<div class="math">$$
a = \binom{6}{0,3,3} + \binom{6}{1,2,3} + \binom{6}{1,3,2} + \binom{6}{2,1,3} + \binom{6}{2,2,2} + \\
\binom{6}{2,3,1} + \binom{6}{3,0,3} + \binom{6}{3,1,2} + \binom{6}{3,2,1} + \binom{6}{3,3,0}
$$</div>
<p>minus the number of 6-digit numbers starting with 0:</p>
<div class="math">$$
b = 0 + \binom{5}{0,2,3} + \binom{5}{0,3,2} + \binom{5}{1,1,3} + \binom{5}{1,2,2} + \\
\binom{5}{1,3,1} + \binom{5}{2,0,3} + \binom{5}{2,1,2} + \binom{5}{2,2,1} + \binom{5}{2,3,0}
$$</div>
<p>Let <span class="math">\(a\)</span> be the first expression and <span class="math">\(b\)</span> be the second expression; then the total is:</p>
<div class="highlight"><pre><span></span>In [40]: np.sum(a)
Out[40]: 510.0

In [41]: np.sum(b)
Out[41]: 170.0

In [42]: np.sum(a) - np.sum(b)
Out[42]: 340.0
</pre></div>


<div class="math">$$
a - b = 340
$$</div>
<p><a name="pe172-recursion"></a></p>
<h2 id="recursion">Recursion</h2>
<p>The essence of this problem is a nested for loop - but because we have 9 digits to deal with, a 9-level 
nested for loop would be a big headache and would not generalize well.</p>
<p>Instead, we can write a recursive method that is called for each of the <span class="math">\(k\)</span> (9) digits being selected 
to compose the final <span class="math">\(N\)</span>- (18-) digit number.</p>
<p>The recursive method looks something like this:</p>
<div class="highlight"><pre><span></span><span class="k">global</span> <span class="n">variable</span> <span class="n">solution_count</span>
<span class="k">global</span> <span class="n">variable</span> <span class="n">m</span>
<span class="k">global</span> <span class="n">variable</span> <span class="n">N</span>

<span class="k">def</span> <span class="nf">recursive_method</span><span class="p">(</span> <span class="n">n_tuple</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">n</span><span class="o">==</span><span class="mi">9</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">compute</span> <span class="n">multiset</span> <span class="n">permutation</span> <span class="n">combinations</span>
        <span class="n">increment</span> <span class="k">global</span> <span class="n">solutions</span> <span class="n">total</span>
        <span class="n">need</span> <span class="n">N</span><span class="p">,</span> <span class="n">N0</span><span class="p">,</span> <span class="n">N1</span><span class="p">,</span> <span class="n">N2</span><span class="p">,</span> <span class="n">etc</span><span class="o">.</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">assemble</span> <span class="n">choices</span> <span class="k">for</span> <span class="n">N_i</span>
        <span class="k">for</span><span class="p">(</span><span class="n">choice</span> <span class="ow">in</span> <span class="n">choices</span><span class="p">)</span> <span class="p">{</span>
            <span class="nb">set</span> <span class="n">N_i</span> <span class="n">to</span> <span class="n">choice</span>
            <span class="n">call</span> <span class="n">recursive_method</span><span class="p">()</span>
            <span class="n">unset</span> <span class="n">N_i</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p><a name="pe172-pseudocode"></a></p>
<h2 id="pseudocode">Pseudocode</h2>
<p>Computing the number of possible integers n that meet the specified criteria thus boils down to a long sequence of nested summations (nested loops).</p>
<p>The problem is posed for <span class="math">\(N = 18, k = 10, m = 3\)</span>. For this case, the final expression for the total number of permutations is:</p>
<div class="math">$$
\sum_{N_1} \sum_{N_2} \sum_{N_3} \sum_{N_4} \sum_{N_5} \sum_{N_6} \sum_{N_7} \sum_{N_8} \sum_{N_9} \binom{N}{N_0, N_1, N_2, \dots, N_9} - \binom{N-1}{N_0-1, N_1, N_2, \dots, N_9}
$$</div>
<p>where the limits of summation are given by:</p>
<div class="math">$$
N_1 = \max \left( N - (10-1) m, 0 \right) \dots m
$$</div>
<div class="math">$$
N_2 = \max \left( N - N_1 - (10-2) m, 0 \right) \dots m
$$</div>
<div class="math">$$
N_3 = \max \left( N - N_1 - N_2 - (10-3) m, 0 \right) \dots m
$$</div>
<div class="math">$$
N_4 = \max \left( N - N_1 - N_2 - N_3 - (10-4) m, 0 \right) \dots m
$$</div>
<p>etc...</p>
<div class="math">$$
N_9 = \max \left( N - N_1 - N_2 - \dots - N_7 - N_8, 0 \right) \dots m
$$</div>
<p>and from these, <span class="math">\(N_0\)</span> is determined by:</p>
<div class="math">$$
N_0 = N - N_1 - N_2 - \dots - N_8 - N_9
$$</div>
<p><a name="pe172-python-code"></a></p>
<h2 id="python-code">Python Code</h2>
<p><a href="https://git.charlesreid1.com/cs/euler/raw/master/scratch/Round7_170-180/Problem172.py">Link to Problem 172 Python Code at git.charlesreid1.com</a></p>
<p>To implement the solution to Problem 172 in Python, we used recursion, as mentioned above.
THe only tricky part of implementing this recursive method was the usual challenge with 
recursive methods: keeping track of the total number of solutions found via a global variable.</p>
<p>To do this in Python, we declare a variable outside the scope of a given function, and we use
that variable as a global variable by declaring it with the global keyword.</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="c1"># Real problem:</span>
<span class="n">k</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">m</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">N</span> <span class="o">=</span> <span class="mi">18</span>


<span class="n">solution_count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">factorials</span> <span class="o">=</span> <span class="p">{}</span>
</pre></div>


<p>Now we have a <code>main()</code> driver method to call the recursive method:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">solution_count</span>
    <span class="n">n_tuple</span> <span class="o">=</span> <span class="p">[</span><span class="bp">None</span><span class="p">,]</span><span class="o">*</span><span class="n">k</span>
    <span class="n">recursive_method</span><span class="p">(</span><span class="n">n_tuple</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Total number of permutations:&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">solution_count</span><span class="p">))</span>
</pre></div>


<p>We have the recursive backtracking method that constructs
all combinations of <span class="math">\(k\)</span> digits into <span class="math">\(N\)</span>-digit numbers:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">recursive_method</span><span class="p">(</span> <span class="n">n_tuple</span><span class="p">,</span> <span class="n">ni</span> <span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Use recursive backtracking to form all possible </span>
<span class="sd">    combinations of k digits into N-digit numbers </span>
<span class="sd">    such that the number of digits is m or less.</span>

<span class="sd">    (n_tuple is actually a list.)</span>

<span class="sd">    ni = current class step 1..(k-1)</span>
<span class="sd">    n_tuple = list of number of digits for each class 0 through k</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">solution_count</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">N</span>
    <span class="k">if</span><span class="p">(</span><span class="n">ni</span><span class="o">==</span><span class="n">k</span><span class="p">):</span>

        <span class="c1"># N_1 through N_(k-1) have been set,</span>
        <span class="c1"># now it is time to set N_0:</span>
        <span class="c1"># N_0 = N - N_1 - N_2 - N_3 - .. - N_{k-1}</span>
        <span class="n">sum_N</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">([</span><span class="n">n_tuple</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">k</span><span class="p">)])</span>
        <span class="n">n_tuple</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">N</span><span class="o">-</span><span class="n">sum_N</span><span class="p">)</span>

        <span class="c1"># Compute multiset permutation</span>
        <span class="n">solution_count</span> <span class="o">+=</span> <span class="n">multiset</span><span class="p">(</span><span class="n">N</span><span class="p">,</span><span class="n">n_tuple</span><span class="p">)</span> <span class="o">-</span> <span class="n">multiset_0</span><span class="p">(</span><span class="n">N</span><span class="p">,</span><span class="n">n_tuple</span><span class="p">)</span>

        <span class="k">return</span>

    <span class="k">else</span><span class="p">:</span>

        <span class="c1"># Problem: we are not stopping </span>
        <span class="c1"># when the sum of digits chosen</span>
        <span class="c1"># is greater than N</span>

        <span class="c1"># Assemble the minimum and maximum limits for N_i:</span>
        <span class="c1"># (Everything up to ni-1 should be defined, no TypeErrors due to None)</span>
        <span class="n">sum_N</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">([</span><span class="n">n_tuple</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">ni</span><span class="p">)])</span>
        <span class="n">ktm</span> <span class="o">=</span> <span class="p">(</span><span class="n">k</span> <span class="o">-</span> <span class="n">ni</span><span class="p">)</span><span class="o">*</span><span class="n">m</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="n">N</span> <span class="o">-</span> <span class="n">sum_N</span> <span class="o">-</span> <span class="n">ktm</span>
        <span class="n">minn</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="n">expr</span> <span class="p">))</span>

        <span class="c1"># Note: previously this was just maxx=m.</span>
        <span class="c1"># This required a check around each call to</span>
        <span class="c1"># recursive_method to see if the sum of n_tuple</span>
        <span class="c1"># was already maxed out. Now we just do it here.</span>
        <span class="n">maxx</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">N</span><span class="o">-</span><span class="n">sum_N</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">N_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">minn</span><span class="p">,</span><span class="n">maxx</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>

                <span class="c1"># Set</span>
                <span class="n">n_tuple</span><span class="p">[</span><span class="n">ni</span><span class="p">]</span> <span class="o">=</span> <span class="n">N_i</span>

                <span class="c1"># Explore</span>
                <span class="n">recursive_method</span><span class="p">(</span><span class="n">n_tuple</span><span class="p">,</span> <span class="n">ni</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>

                <span class="c1"># Unset</span>
                <span class="n">n_tuple</span><span class="p">[</span><span class="n">ni</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="k">return</span>
</pre></div>


<p>We have a <code>multiset()</code> method that evaluates the multiset permutation count formula:</p>
<div class="math">$$
\binom{N}{N_1, \dots, N_k} = \dfrac{N!}{N_1! \dots N_k!}
$$</div>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">multiset</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">n_tuple</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Number of multiset permutations</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">factorial</span><span class="p">(</span><span class="n">N</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">product</span><span class="p">([</span><span class="n">factorial</span><span class="p">(</span><span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">n_tuple</span><span class="p">]))</span>
    <span class="k">return</span> <span class="n">r</span>


<span class="k">def</span> <span class="nf">multiset_0</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">n_tuple</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Number of multiset permutations that start with 0</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">n_tuple</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">factorial</span><span class="p">(</span><span class="n">N</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">product</span><span class="p">([</span><span class="n">factorial</span><span class="p">(</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">if</span><span class="p">(</span><span class="n">i</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="k">else</span> <span class="n">factorial</span><span class="p">(</span><span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">n_tuple</span><span class="p">)]))</span>
        <span class="k">return</span> <span class="n">r</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>
</pre></div>


<p>And finally, we have a <code>factorial()</code> method:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">factorial</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Factorial utility</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">n</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Error: negative factorials not possible&quot;</span><span class="p">)</span>
    <span class="k">if</span><span class="p">(</span><span class="n">n</span><span class="o">==</span><span class="mi">1</span> <span class="ow">or</span> <span class="n">n</span><span class="o">==</span><span class="mi">0</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">n</span><span class="o">*</span><span class="n">factorial</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>


<p>At the bottom of the file, we ensure that the driver is run when the 
funtion is run directly through Python:</p>
<div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span><span class="o">==</span><span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>


<p><a name="pe172-final"></a></p>
<h1 id="final-answer">Final Answer</h1>
<p>Setting the correct parameters should result in the following result:</p>
<div class="math">$$
P = 227,485,267,000,992,000
$$</div>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script></div>

    </div>
</div>

<div class="v20"></div>

<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="tags">
            <p>Tags:&nbsp;&nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/computer-science.html">computer science</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/mathematics.html">mathematics</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/factors.html">factors</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/sequences.html">sequences</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/euler.html">euler</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/project-euler.html">project euler</a>
                    &nbsp;&nbsp;
        </div>

    </div>
</div>


<div class="v200"></div>
  	            	</article>
  	            	<article>
<header>
<div class="row">


    <div class="col-md-12">
        <div class="headtext" style="text-align: center;">
            <h1><b>
                4x4 Rubik's Cube: Part 4: Sequence Order
            </b></h1>
        
            <p class="lead">
                Posted 
                <time datetime="2018-01-25T10:00:00-08:00" pubdate>Thursday 01/25/2018</time>
                in 
                <a href="https://charlesreid1.github.io/category/rubiks-cube.html">Rubiks Cube</a>
                </p>
            <p>
            <span style="font-size: 14px">
                <a href="https://charlesreid1.github.io/4x4-rubiks-cube-part-4-sequence-order.html">permalink</a>
            </span>
            </p>
        </div>

    </div>

</div>
</header>


<div class="v50"></div>


<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="entry-content"><p><em>This is Part 4 of a 4-part blog post 
on the mathematics of the 4x4 Rubik's Cube, 
its relation to algorithms, and some 
curious properties of Rubik's Cubes.</em></p>
<p>See Part 1 of this blog post here: <a href="https://charlesreid1.github.io/4x4-rubiks-cube-part-1-representations.html">Part 1: Representations</a></p>
<p>See Part 2 of this blog post here: <a href="https://charlesreid1.github.io/4x4-rubiks-cube-part-2-permutations.html">Part 2: Permutations</a></p>
<p>See Part 3 of this blog post here: <a href="https://charlesreid1.github.io/4x4-rubiks-cube-part-3-factoring-permutations.html">Part 3: Factoring Permutations</a></p>
<p>You are currently reading Part 4 of this blog post: <strong>Part 4: Sequence Order</strong></p>
<h1 id="table-of-contents">Table of Contents</h1>
<ul>
<li>
<p><a href="#rubiks4-intro">Introduction</a></p>
<ul>
<li><a href="#rubiks4-intro-order">Order of a Sequence</a></li>
<li><a href="#rubiks4-intro-sofar">What We Have Covered So Far</a></li>
</ul>
</li>
<li>
<p><a href="#rubiks4-factoring">Factoring Rubik's Cube Permutations</a></p>
<ul>
<li><a href="#rubiks4-factoring-review">Factoring Permutations: A Review</a></li>
<li><a href="#rubiks4-factoring-cube">Factoring Rubik's Cube Permutations</a></li>
<li><a href="#rubiks4-factoring-R">Computing the Order of Sequence R</a></li>
<li><a href="#rubiks4-factoring-URUpRp">Computing the Order of Sequence U R U' R'</a></li>
<li><a href="#rubiks4-factoring-UR">Computing the Order of Sequence U R</a></li>
</ul>
</li>
<li>
<p><a href="#rubiks4-code">Code</a></p>
</li>
<li>
<p><a href="#rubiks4-conclusions">Project Conclusions</a></p>
</li>
<li>
<p><a href="#rubiks4-references">References</a></p>
</li>
<li>
<p><a href="#rubiks4-appendix">Appendix</a></p>
</li>
</ul>
<p><br />
<br />
<br /></p>
<p><a name="rubiks4-intro"></a></p>
<h1 id="introduction">Introduction</h1>
<p><a name="rubiks4-intro-order"></a></p>
<h2 id="order-of-a-sequence">Order of a Sequence</h2>
<p>As a reminder of our overarching goal: starting with a 
4x4 Rubik's Revenge cube, an arbitrary sequence of moves
will scramble the faces of the cube; but if that move sequence 
is repeatedly applied, eventually the cube will return to its
solved state. </p>
<p>The simplest example is rotating a single face: after applying
the rotation move four times to any face of a solved cube,
the cube will return back to the solved state.</p>
<p>This is also true of more complicated move sequences, such as
<code>U R U' R'</code>, which returns the cube back to its original state
after 6 applications, or the move sequence <code>U R</code>, which
must be applied 105 times before the cube returns back to
its original solved state.</p>
<p>Our goal is to predict this number: given a move sequence,
how many times must that move sequence be applied to a solved 
cube to return the cube back to its solved state?</p>
<p>This number is called the <em>order</em> of a sequence.</p>
<p><a name="rubiks4-intro-sofar"></a></p>
<h2 id="what-we-have-covered-so-far">What We Have Covered So Far</h2>
<p>In prior posts, we have covered a number of key topics 
that this post will synthesize.</p>
<p>We started <a href="https://charlesreid1.github.io/4x4-rubiks-cube-part-1-representations.html">Part 1</a> by discussing ways of representing 
the Rubik's Revenge cube, and we settled on a 96-tuple
representation indicating which faces had moved to what 
locations.</p>
<p>That led us to <a href="https://charlesreid1.github.io/4x4-rubiks-cube-part-2-permutations.html">Part 2</a>, in which we discussed the two-row
notation for the 96-tuple representing the cube, and 
demonstrated the utility of this representation by 
showing how moves and move sequences would lead to 
permutations that could be written as 96-tuples using
the two-row notation.</p>
<p>In <a href="https://charlesreid1.github.io/4x4-rubiks-cube-part-3-factoring-permutations.html">Part 3</a>, we covered some key theoretical results following
Donald Knuth's <u>Art of Computer Programming</u> which allowed
us to develop a permutation algebra to describe the effects 
moves have on the cube. We concluded the previous post 
with an algorithm for factoring permutations into their
intercalation products, and hinted that these permutation
factors were central </p>
<p><a name="rubiks4-factoring"></a></p>
<h1 id="factoring-rubiks-cube-permutations">Factoring Rubik's Cube Permutations</h1>
<p><a name="rubiks4-factoring-review"></a></p>
<h2 id="factoring-permutations-a-review">Factoring Permutations: A Review</h2>
<p>In <a href="https://charlesreid1.github.io/4x4-rubiks-cube-part-3-factoring-permutations.html">Part 3</a> of this series of blog posts, we looked at 
an example multiset permutation of characters. Here it is
written using the two-row notation:</p>
<div class="math">$$
\pi = \bigl(\begin{smallmatrix}
    a &amp; a &amp; b &amp; b &amp; b &amp; b &amp; b &amp; c &amp; c &amp; c &amp; d &amp; d &amp; d &amp; d &amp; d \\
    d &amp; b &amp; c &amp; b &amp; c &amp; a &amp; c &amp; d &amp; a &amp; d &amp; d &amp; b &amp; b &amp; b &amp; d
\end{smallmatrix}\bigr)
$$</div>
<p>We covered a technique for factoring this permutation
into independent cycles of faces,</p>
<div class="math">$$
\pi = \alpha \top \beta \top \dots \top \gamma
$$</div>
<p>and shared Python code to perform this operation. The resulting
factored permutation was:</p>
<div class="math">$$
\pi = \bigl( \begin{smallmatrix}
    a &amp; d &amp; d &amp; b &amp; c &amp; d &amp; b &amp; b &amp; c \\
    d &amp; d &amp; b &amp; c &amp; d &amp; b &amp; b &amp; c &amp; a
\end{smallmatrix} \bigr)
\top
\bigl( \begin{smallmatrix}
    a &amp; b \\
    b &amp; a 
\end{smallmatrix} \bigr)
\top 
\bigl( \begin{smallmatrix}
    b &amp; c &amp; d  \\
    c &amp; d &amp; b
\end{smallmatrix} \bigr)
\top 
\bigl( \begin{smallmatrix}
    d \\
    d
\end{smallmatrix} \bigr)
$$</div>
<p><a name="rubiks4-factoring-cube"></a></p>
<h2 id="factoring-rubiks-cube-permutations_1">Factoring Rubik's Cube Permutations</h2>
<p>To factor a Rubik's Cube permutation, we apply
Algorithm A from the prior post to the two-row
96-tuple representation of the Rubik's Cube 
after it has had the move sequence applied once.</p>
<p>(Note that we only need to apply the sequence
to the cube <em>once</em>, even if the order of that 
sequence is in the tens of thousands.)</p>
<p>Let's look at a few move sequences for 
some examples:</p>
<p><a name="rubiks4-factoring-R"></a></p>
<h2 id="computing-the-order-of-sequence-r">Computing the Order of Sequence R</h2>
<p>We begin with the solved state, and apply the 
move R to the cube. The result is the 
two-line representation:</p>
<div class="highlight"><pre><span></span>(01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96)
(01 02 03 36 05 06 07 40 09 10 11 44 13 14 15 48 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 84 37 38 39 88 41 42 43 92 45 46 47 96 61 57 53 49 62 58 54 50 63 59 55 51 64 60 56 52 16 66 67 68 12 70 71 72 08 74 75 76 04 78 79 80 81 82 83 77 85 86 87 73 89 90 91 69 93 94 95 65)
</pre></div>


<p>Now, we can carry out the Algorithm A procedure on
this two-row representation. When we do that, we will
find that there are a large number of one-element 
independent factors; these are the faces that do not 
move during the move sequence R. </p>
<p>Here is a list of factors that are found by Algorithm A:</p>
<div class="highlight"><pre><span></span>Factor sizes: {1, 4}
Factors:
[36, 84, 77, 4]
[40, 88, 73, 8]
[44, 92, 69, 12]
[48, 96, 65, 16]
[61, 64, 52, 49]
[57, 63, 56, 50]
[53, 62, 60, 51]
[58, 59, 55, 54]
Independent Faces: [1, 2, 3, 5, 6, 7, 9, 10, 11, 13, 14, 15, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 37, 38, 39, 41, 42, 43, 45, 46, 47, 66, 67, 68, 70, 71, 72, 74, 75, 76, 78, 79, 80, 81, 82, 83, 85, 86, 87, 89, 90, 91, 93, 94, 95]
Least common multiple: 4
</pre></div>


<p>The largest set of faces that are exchanged is 4, and 
the smallest is 1. No other groups of faces being 
exchanged have any other sizes. This means that if 
we apply the sequence 4 times, each of those groups 
of faces being interchanged will have returned to their 
original state.</p>
<p>This tells us what we already knew: that if we apply the 
sequence "R", it rotates groups of pieces in a sequence 
of 4 moves each, so overall the order of this permutation 
is 4 - if we apply the sequence R to a solved 4x4 Rubik's 
Revenge cube 4 times, the cube will return to the solved 
state.</p>
<p>To formalize this, if we have cycles with arbitrary lengths, 
we must apply the sequence a number of times equal to the 
least common multiple of each factor's size. (For example, 
if we had a cycle of length 3 above, the cycle order would 
have been 12 - because the sequence must be applied 12 times 
before the 4-cycle face exchanges "sync up" with the 3-cycle 
face exchanges.)</p>
<p>Let's look at a slightly more complicated move sequence
to illustrate this point.</p>
<p><a name="rubiks4-factoring-URUpRp"></a></p>
<h3 id="computing-the-order-of-sequence-u-r-u-r">Computing the Order of Sequence U R U' R'</h3>
<p>As before, we begin by applying the move sequence
once to a solved cube to generate the two-row
n-tuple representation:</p>
<div class="highlight"><pre><span></span>(01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96)
(01 02 03 77 05 06 07 73 09 10 11 69 16 12 08 20 17 18 19 36 21 22 23 24 25 26 27 28 29 30 31 32 49 50 51 33 37 38 39 40 41 42 43 44 45 46 47 48 13 56 60 64 53 54 55 34 57 58 59 35 61 62 63 04 96 66 67 68 14 70 71 72 15 74 75 76 65 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 52)
</pre></div>


<p>Next, we factor this permutation using Algorithm A:</p>
<div class="highlight"><pre><span></span>Factor sizes: {1, 3, 6}
Factors:
[77, 65, 96, 52, 64, 4]
[73, 15, 8]
[69, 14, 12]
[16, 20, 36, 33, 49, 13]
[50, 56, 34]
[51, 60, 35]
Independent Faces: [1, 2, 3, 5, 6, 7, 9, 10, 11, 17, 18, 19, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 53, 54, 55, 57, 58, 59, 61, 62, 63, 66, 67, 68, 70, 71, 72, 74, 75, 76, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95]
Least common multiple: 6
</pre></div>


<p>This time, we get a couple of cycles with different lengths.
We have four cycles of length 3, and two cycles of length 6,
plus many cycles of length 1 (the unpermuted faces).</p>
<p>The LCM of 3 and 6 is 6, so the overall order of the 
move sequence <code>U R U' R'</code> is 6.</p>
<p><a name="rubiks4-factoring-UR"></a></p>
<h3 id="computing-the-order-of-sequence-u-r">Computing the Order of Sequence U R</h3>
<p>The last sequence we'll look at is the move sequence UR.</p>
<p>This particular permutation represents an 
interesting corner case: in <a href="https://charlesreid1.github.io/4x4-rubiks-cube-part-1-representations.html">Part 1</a> of this post,
when we came up with our tuple representation
for the cube, we treated each face as being
non-interchangeable, by giving each face a 
unique number. This means that, for example,
we cannot swap two arbitrary red faces, since
they are attached to other faces via a double edge
or a corner piece.</p>
<p>This assumption does <em>not</em> hold for faces 
in the center of the cube. Because center faces
are not attached to any other faces (mechanically 
speaking), the four distinct integers representing
four colored faces can actually be interchanged.</p>
<p>This plays out with the sequence <code>U R</code> as follows:</p>
<p>We start with the two-line representation of the 
n-tuple:</p>
<div class="highlight"><pre><span></span>(01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96)
(13 09 05 01 14 10 06 02 15 11 07 03 48 44 40 36 33 34 35 84 21 22 23 24 25 26 27 28 29 30 31 32 61 57 53 49 37 38 39 88 41 42 43 92 45 46 47 96 16 66 67 68 62 58 54 50 63 59 55 51 64 60 56 52 17 18 19 20 12 70 71 72 08 74 75 76 04 78 79 80 81 82 83 77 85 86 87 73 89 90 91 69 93 94 95 65)
</pre></div>


<p>We can factor this tuple as follows:</p>
<div class="highlight"><pre><span></span>Factor sizes: {1, 3, 4, 7, 15}
Factors:
[13, 48, 96, 65, 17, 33, 61, 64, 52, 68, 20, 84, 77, 4, 1]
[9, 15, 40, 88, 73, 8, 2]
[5, 14, 44, 92, 69, 12, 3]
[10, 11, 7, 6]
[36, 49, 16]
[34, 57, 63, 56, 50, 66, 18]
[35, 53, 62, 60, 51, 67, 19]
[58, 59, 55, 54]
Independent Faces: [21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 37, 38, 39, 41, 42, 43, 45, 46, 47, 70, 71, 72, 74, 75, 76, 78, 79, 80, 81, 82, 83, 85, 86, 87, 89, 90, 91, 93, 94, 95]
Least common multiple: 420
</pre></div>


<p>However, the adventurous cuber will find, when actually 
carrying out this move sequence, that the order is in fact 
105, and not 420.</p>
<p>The reason the predicted cube order is 4 times larger than
expected is because, after 105 applications of the move 
sequence, the cube has not actually returned to its original
state, but the only remaining faces that are scrambled
are center faces, which are in fact interchangeable.</p>
<p>Note this group of 4 faces that are permuted:</p>
<div class="highlight"><pre><span></span>[10, 11, 7, 6]
</pre></div>


<p>These are the four center squares from the <code>U</code> face. 
If we exclude this group (treating 10, 11, 7, and 6 as 
perfectly interchangeable), the length of all factors
no longer contains 4:</p>
<div class="highlight"><pre><span></span>Factor sizes: {1, 3, 7, 15}
</pre></div>


<p>Including the 4, we had</p>
<p>LCM(1,3,4,7,15) = 420</p>
<p>but excluding the 4, we get:</p>
<p>LCM(1,3,7,15) = 105</p>
<p>Systematically, we can search for any groups that contain
<em>only</em>  faces from the center, and treat 1 such group of 
length n as n groups of length 1 (not contributing to the 
order of the move sequence).</p>
<p>This provides an interesting contrast between the 4x4 Rubik's 
Revenge cube, in which any center faces may be interchanged with 
any other center faces, and the 3x3 Rubik's Cube, in which
the center faces always remain fixed in relation to one another.</p>
<p><a name="rubiks4-factoring-UwRw"></a></p>
<h3 id="computing-the-order-of-sequence-uw-rw">Computing the Order of Sequence Uw Rw</h3>
<p>We mentioned in <a href="https://charlesreid1.github.io/4x4-rubiks-cube-part-1-representations.html">Part 1</a> 
that the move notation <code>Uw</code> or <code>Dw</code> indicates a 
quarter clockwise turn of two layers of a face,
not one. We can write the permutation that results
from the move sequence <code>Uw Rw</code> as:</p>
<div class="highlight"><pre><span></span>(01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96)
(13 09 05 01 14 10 06 02 47 43 39 35 48 44 40 36 33 34 83 84 37 38 87 88 25 26 27 28 29 30 31 32 61 57 53 49 62 58 54 50 41 42 91 92 45 46 95 96 16 15 67 68 12 11 71 72 63 59 55 51 64 60 56 52 17 18 19 20 21 22 23 24 08 07 75 76 04 03 79 80 81 82 78 77 85 86 74 73 89 90 70 69 93 94 66 65)
</pre></div>


<p>Factoring this permutation, we get:</p>
<div class="highlight"><pre><span></span>Factor sizes: {1, 3, 15}
Factors:
[13, 48, 96, 65, 17, 33, 61, 64, 52, 68, 20, 84, 77, 4, 1]
[9, 47, 95, 66, 18, 34, 57, 63, 56, 72, 24, 88, 73, 8, 2]
[5, 14, 44, 92, 69, 21, 37, 62, 60, 51, 67, 19, 83, 78, 3]
[10, 43, 91, 70, 22, 38, 58, 59, 55, 71, 23, 87, 74, 7, 6]
[39, 54, 11]
[35, 53, 12]
[40, 50, 15]
[36, 49, 16]
Independent Faces: [25, 26, 27, 28, 29, 30, 31, 32, 41, 42, 45, 46, 75, 76, 79, 80, 81, 82, 85, 86, 89, 90, 93, 94]
Least common multiple: 15
</pre></div>


<p>Several groups of 3 faces and of 15 faces, respectively, are permuted,
giving an LCM of 15. Thus, the order of move sequence <code>Uw Rw</code> is 15.</p>
<p>We'll look at the factoring of one last sequence: <code>U Rw</code>.</p>
<p><a name="rubiks4-factoring-URw"></a></p>
<h3 id="computing-the-order-of-sequence-u-rw">Computing the Order of Sequence U Rw</h3>
<p>Here is the permutation representing the 
permutation resulting from the sequence U Rw:</p>
<div class="highlight"><pre><span></span>(01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96)
(13 09 05 01 14 10 06 02 47 43 39 35 48 44 40 36 33 34 83 84 21 22 23 24 25 26 27 28 29 30 31 32 61 57 53 49 37 38 87 88 41 42 91 92 45 46 95 96 16 15 67 68 62 58 54 50 63 59 55 51 64 60 56 52 17 18 19 20 12 11 71 72 08 07 75 76 04 03 79 80 81 82 78 77 85 86 74 73 89 90 70 69 93 94 66 65)
</pre></div>


<p>Factoring this permutation, we get:</p>
<div class="highlight"><pre><span></span>Factor sizes: {1, 3, 4, 10, 15, 16}
Factors:
[13, 48, 96, 65, 17, 33, 61, 64, 52, 68, 20, 84, 77, 4, 1]
[9, 47, 95, 66, 18, 34, 57, 63, 56, 50, 15, 40, 88, 73, 8, 2]
[5, 14, 44, 92, 69, 12, 35, 53, 62, 60, 51, 67, 19, 83, 78, 3]
[10, 43, 91, 70, 11, 39, 87, 74, 7, 6]
[36, 49, 16]
[58, 59, 55, 54]
Independent Faces: [21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 37, 38, 41, 42, 45, 46, 71, 72, 75, 76, 79, 80, 81, 82, 85, 86, 89, 90, 93, 94]
Least common multiple: 240
</pre></div>


<p>The order of the move sequence <code>U Rw</code> is 240.</p>
<p><a name="rubiks4-code"></a></p>
<h1 id="code">Code</h1>
<p>The code that forms the permutation tuple for a given move sequence
and performs the factoring of that tuple is in <a href="https://git.charlesreid1.com/charlesreid1/rubiks-cube-cycles/src/master/sequence_order.py">sequence_order.py</a>.</p>
<p>The <code>sequence_order.py</code> file utilizes the 
<a href="https://github.com/dwalton76/rubiks-cube-NxNxN-solver">dwalton76/rubiks-cube-NxNxN-solver</a>
library from Github to apply the move sequence once to a cube
to determine the resulting permutation tuple. It then factors 
this tuple into products and finds the LCM of their lengths.</p>
<p>The code in <code>sequence_order.py</code> is grouped into functions,
with the key funtion being <code>factor_permutation(top, bottom)</code>, which 
takes the top and bottom rows of the two-row representation
of a move sequence's permutation.</p>
<p>The method then performs the factoring procedure covered in
<a href="https://charlesreid1.github.io/4x4-rubiks-cube-part-3-factoring-permutations.html">Part 3</a>.</p>
<p>Here is the body of the method:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">factor_permutation</span><span class="p">(</span><span class="n">perm_top</span><span class="p">,</span><span class="n">perm_bot</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Factor a permutation into its lowest terms</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">MAX</span> <span class="o">=</span> <span class="mi">96</span>

    <span class="c1"># Need a way to also mark them as used... bit vector</span>
    <span class="n">used_vector</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">perm_top</span><span class="p">)</span>

    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">perm_top</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">used_vector</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">factors</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># If we still have values to pick out:</span>
    <span class="k">while</span><span class="p">(</span><span class="mi">0</span> <span class="ow">in</span> <span class="n">used_vector</span><span class="p">):</span>

        <span class="n">factor</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">while</span><span class="p">(</span><span class="bp">True</span><span class="p">):</span>
            <span class="n">used_vector</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">leader</span> <span class="o">=</span> <span class="n">perm_top</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">follower</span> <span class="o">=</span> <span class="n">perm_bot</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

            <span class="n">i</span> <span class="o">=</span> <span class="n">perm_top</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">follower</span><span class="p">)</span>
            <span class="k">while</span><span class="p">(</span><span class="n">used_vector</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">):</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">if</span><span class="p">(</span><span class="n">i</span><span class="o">&gt;=</span><span class="n">MAX</span><span class="p">):</span>
                    <span class="k">break</span>

            <span class="k">if</span><span class="p">(</span><span class="n">i</span><span class="o">&gt;=</span><span class="n">MAX</span><span class="p">):</span>
                <span class="k">break</span>
            <span class="k">elif</span><span class="p">(</span><span class="n">follower</span><span class="o">==</span><span class="n">start</span><span class="p">):</span>
                <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">factor</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">follower</span><span class="p">)</span>

        <span class="c1"># add start to end</span>
        <span class="n">factor</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>

        <span class="n">factors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">factor</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1">#import pdb; pdb.set_trace()</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">used_vector</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">start</span> <span class="o">=</span> <span class="n">perm_top</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">break</span>

    <span class="k">return</span> <span class="n">factors</span>
</pre></div>


<p>This was called by the method applying move sequences
to the Rubik's Cube to obtain the two-row permutation
corresponding to the move sequence of interest.</p>
<p><a name="rubiks4-conclusions"></a></p>
<h1 id="project-conclusions">Project Conclusions</h1>
<p>In addition to being interesting, this project led to 
some deep insights into the workings of the Rubik's Cube
and ways to think about move sequences.</p>
<p>More than that, the Rubik's Cube is a toy that provides 
real insight into combinatorics and group theory. The 
concept of order, and the process of thinking through 
different representations of the cube and their consequences
for the implemetation of the final algorithm, provide 
good practice for problems in other, related domains.</p>
<p>This project began with a simple question. 
While playing with the Rubik's Cube,
we discovered this property of cycles 
(it is actually difficult to miss,
even when learning the beginner method,
as many of the move sequences involved in the 
beginner method have small orders, so it is 
easy to see them repeat.)
The question we set out to answer was,
given an arbitrary sequence, can we determine
the order of that sequence? </p>
<p>The key to answering this question ultimately
lies in the representation of the permutations;
the right representation makes finding the 
order possible. but it took some trial 
and error with different representations 
before discovering the right approach.</p>
<p>To anyone who has played with the Rubik's Cube
before, it seems natural that there would be 
<em>some</em> way to represent moves applied to the cube
in some kind of algebraic terms.
The intercalation product was the key concept
for developing a permutation algebra.
Knuth's Algorithm A was the key concept 
for factoring permutations into their 
respective independent cycles.</p>
<p>Once an algorithm to factor permutations was developed,
the rest was a straightforward calculation of the LCM
of the lengths of each factor.</p>
<p>The project was computationally challenging;
recursion was required to implement Algorithm A,
the Rubik's Cube solver had to be modified,
and there were many bugs along the way.</p>
<p>The procedure we used here can be applied to other problems.
Our procedure was:</p>
<ul>
<li>Find a proper, convenient representation for the system state</li>
<li>Break down the variations of the system into simple cases or steps</li>
<li>Move away from the specific system, 
    and keep the approach mathematially general. <strong>This is by far the the most 
    important step!</strong></li>
<li>Study the literature and solutions to problems, to become familiar
    with different ways of representing a problem. Different problems
    lend themselves well to different representations, so the more familiar
    you are with different representations, the more problems you'll be able
    to tackle.</li>
<li>The only way to get familiar with different problem-solving approaches 
    is through practice. It helps to start with easier problems, both because
    you can score some quick points and feel more confident, and also because
    combinatorics and group theory problems often tend to appear simple,
    but deceptively so. The devil is in the details.</li>
</ul>
<p><a name="rubiks4-references"></a></p>
<h1 id="references">References</h1>
<ol>
<li>
<p>"Rubik's Cube". Charlesreid1.com wiki, Charles Reid. Edited 25 January 2017. Accessed 25 January 2017.
&lt;<a href="https://charlesreid1.com/wiki/Rubiks_Cube">https://charlesreid1.com/wiki/Rubiks_Cube</a>&gt;</p>
</li>
<li>
<p>"Rubik's Revenge". Charlesreid1.com wiki, Charles Reid. Edited 25 January 2017. Accessed 25 January 2017.
&lt;<a href="https://charlesreid1.com/wiki/Rubiks_Revenge">https://charlesreid1.com/wiki/Rubiks_Revenge</a>&gt;</p>
</li>
<li>
<p>"Rubik's Cube/Tuple". Charlesreid1.com wiki, Charles Reid. Edited 25 January 2017. Accessed 25 January 2017.
&lt;<a href="https://charlesreid1.com/wiki/Rubiks_Cube/Tuple">https://charlesreid1.com/wiki/Rubiks_Cube/Tuple</a>&gt;</p>
</li>
<li>
<p>"Rubik's Cube/Permutations". Charlesreid1.com wiki, Charles Reid. Edited 25 January 2017. Accessed 25 January 2017.
&lt;<a href="https://charlesreid1.com/wiki/Rubiks_Cube/Permutations">https://charlesreid1.com/wiki/Rubiks_Cube/Permutations</a>&gt;</p>
</li>
<li>
<p>"Github - dwalton76/rubiks-cube-NxNxN-solver". dwalton76, Github Repository, Github Inc. Accessed 11 January 2017.
&lt;<a href="https://github.com/dwalton76/rubiks-cube-NxNxN-solver">https://github.com/dwalton76/rubiks-cube-NxNxN-solver</a>&gt;</p>
</li>
<li>
<p>"Rubik's Cube NxNxN Solver". Git repository, git.charlesreid1.com. Charles Reid. Updated 25 January 2017.
&lt;<a href="https://git.charlesreid1.com/charlesreid1/rubiks-cube-nnn-solver">https://git.charlesreid1.com/charlesreid1/rubiks-cube-nnn-solver</a>&gt;</p>
</li>
<li>
<p>"Rubiks Cube Cycles". Git repository, git.charlesreid1.com. Charles Reid. Updated 25 January 2017.
&lt;<a href="https://git.charlesreid1.com/charlesreid1/rubiks-cube-cycles">https://git.charlesreid1.com/charlesreid1/rubiks-cube-cycles</a>&gt;</p>
</li>
</ol>
<p><a name="rubiks4-appendix"></a></p>
<h1 id="appendix">Appendix</h1>
<p>That concludes our discussion of computing the order of move sequences
on a Rubik's Cube. There are many move sequences, and many orders, 
ranging from 1 or 2 up to nearly 100,000. We plan to assemble a 
web site to help readers explore some move sequences and their 
orders - so check back soon...</p>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script></div>

    </div>
</div>

<div class="v20"></div>

<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="tags">
            <p>Tags:&nbsp;&nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/rubiks-cube.html">rubiks cube</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/combinatorics.html">combinatorics</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/permutations.html">permutations</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/python.html">python</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/puzzles.html">puzzles</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/art-of-computer-programming.html">art of computer programming</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/knuth.html">knuth</a>
                    &nbsp;&nbsp;
        </div>

    </div>
</div>


<div class="v200"></div>
  	            	</article>

<div class="row">
    <div class="col-md-4 col-centered" style="text-align: center;">

        <div class="pagination">

            <a class="next" href="https://charlesreid1.github.io/index12.html">&larr; Newer</a>

            &nbsp;
            &nbsp;
            &nbsp;
            &nbsp;
            &nbsp;

            <a class="prev" href="https://charlesreid1.github.io/index14.html">Older &rarr;</a>
        
          <br />
        </div>

    </div>
</div>

<div class="v50"></div>


        </div>

        <div class="col-md-4" style="text-align: center;">
<a name="a_archive"></a>


        <div class="well">

            <h2>March 2020</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/using-mock-api-servers.html">Using Mock API Servers</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>February 2020</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/creating-mock-api-servers.html">Creating Mock API Servers</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/python-from-args-to-kwargs.html">Python: From Args to Kwargs</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/confuse-a-constructor-when-class-as-constructor-returns-objects-of-type-b.html">Confuse-A-Constructor: When Class A's Constructor Returns Objects of Type B</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/python-patterns-the-registry.html">Python Patterns: The Registry</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/incorporating-terraform-commands-into-makefiles.html">Incorporating Terraform Commands into Makefiles</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>December 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/automatically-generating-up-to-date-requirementstxt-for-python-projects.html">Automatically Generating Up-To-Date requirements.txt for Python Projects</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/git-workflows-part-3-refactoring-large-branches-and-pull-requests.html">Git Workflows, Part 3: Refactoring Large Branches and Pull Requests</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>November 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/git-workflows-part-2-crafting-commits.html">Git Workflows, Part 2: Crafting Commits</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>October 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/git-workflows-part-1-supercharging-your-git-config.html">Git Workflows, Part 1: Supercharging your Git Config</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>September 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/mocking-aws-in-unit-tests.html">Mocking AWS in Unit Tests</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>May 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/deconvoluting-convolutional-neural-networks.html">Deconvoluting Convolutional Neural Networks</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/graphs-for-bioinformatics-part-2-finding-eulerian-paths.html">Graphs for Bioinformatics, Part 2: Finding Eulerian Paths</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/graphs-for-bioinformatics-part-1-de-bruijn-graphs-hamiltonian-paths-and-eulerian-paths.html">Graphs for Bioinformatics, Part 1: de Bruijn Graphs, Hamiltonian Paths, and Eulerian Paths</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>April 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/the-git-commit-ectomy.html">The Git-Commit-Ectomy</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>March 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/the-josephus-problem-part-3-solving-the-double-step-case.html">The Josephus Problem: Part 3: Solving the Double Step Case</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/the-josephus-problem-part-2-two-examples.html">The Josephus Problem: Part 2: Two Examples</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/the-josephus-problem-part-1-the-problem.html">The Josephus Problem: Part 1: The Problem</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/approximating-pi-happy-pi-day.html">Approximating Pi (Happy Pi Day)</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/five-letter-words-part-5-the-try-trie-tree.html">Five Letter Words: Part 5: The Try Trie Tree</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/five-letter-words-part-4-revisiting-diff-by-one.html">Five Letter Words: Part 4: Revisiting Diff by One</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/centillion-a-document-search-engine.html">centillion: a document search engine</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>February 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/any-color-you-like-as-long-as-its-00add8.html">Any Color You Like, As Long As It's 00ADD8</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/a-few-of-my-favorite-peps.html">A Few of My Favorite PEPs</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/context-managers-in-python.html">Context Managers in Python</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>January 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/building-snakemake-command-line-wrappers-for-kubernetes-workflows.html">Building Snakemake Command Line Wrappers for Kubernetes Workflows</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/building-snakemake-command-line-wrappers-for-workflows.html">Building Snakemake Command Line Wrappers for Workflows</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/recursive-backtracking-in-go-for-bioinformatics-applications-3-go-implementation-of-backtracking.html">Recursive Backtracking in Go for Bioinformatics Applications: 3. Go Implementation of Backtracking</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>December 2018</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/recursive-backtracking-in-go-for-bioinformatics-applications-2-generating-variations.html">Recursive Backtracking in Go for Bioinformatics Applications: 2. Generating Variations</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/recursive-backtracking-in-go-for-bioinformatics-applications-1-counting-variations.html">Recursive Backtracking in Go for Bioinformatics Applications: 1. Counting Variations</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/basic-data-structures-in-go-maps.html">Basic Data Structures in Go: Maps</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/learning-bioinformatics-with-go-and-rosalind.html">Learning Bioinformatics with Go and Rosalind</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>October 2018</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/first-post-of-the-fall-part-2-flaskadillo.html">First Post of the Fall, Part 2: Flaskadillo</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/first-post-of-the-fall-part-1-data-commons.html">First Post of the Fall, Part 1: Data Commons</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>May 2018</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/current-projects.html">Current Projects</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>March 2018</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/charlesreid1com-stack.html">Charlesreid1.com Stack</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>February 2018</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/d3-calendar-visualizations.html">D3 Calendar Visualizations</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/project-euler-problem-172.html">Project Euler Problem 172</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>January 2018</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/4x4-rubiks-cube-part-4-sequence-order.html">4x4 Rubik's Cube: Part 4: Sequence Order</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/4x4-rubiks-cube-part-3-factoring-permutations.html">4x4 Rubik's Cube: Part 3: Factoring Permutations</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/4x4-rubiks-cube-part-2-permutations.html">4x4 Rubik's Cube: Part 2: Permutations</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/4x4-rubiks-cube-part-1-representations.html">4x4 Rubik's Cube: Part 1: Representations</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/lets-generate-permutations.html">Let's Generate Permutations!</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>September 2017</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/five-letter-words-part-3-letter-coverage-and-dynamic-programming.html">Five Letter Words: Part 3: Letter Coverage and Dynamic Programming</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/five-letter-words-part-2-more-five-word-algorithms.html">Five Letter Words: Part 2: More Five-Word Algorithms</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/five-letter-words-part-1-getting-familiar-with-the-list.html">Five Letter Words: Part 1: Getting Familiar With The List</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>August 2017</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/eulers-theorem-the-totient-function-and-calculating-totients-by-hand.html">Euler's Theorem, the Totient Function, and Calculating Totients By Hand</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>July 2017</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/mad-combinatoric-castles.html">Mad Combinatoric Castles</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/project-euler-problem-1.html">Project Euler Problem 1</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/shortest-lattice-paths-and-multiset-permutations.html">Shortest Lattice Paths and Multiset Permutations</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/computing-square-roots-part-2-using-continued-fractions.html">Computing Square Roots: Part 2: Using Continued Fractions</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/computing-square-roots-part-1-using-newtons-method.html">Computing Square Roots: Part 1: Using Newton's Method</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>June 2017</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/cse-143-final-project-hilbert-sort-3-the-code.html">CSE 143 Final Project: Hilbert Sort: 3. The Code</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/cse-143-final-project-hilbert-sort-2-the-solution-algorithm.html">CSE 143 Final Project: Hilbert Sort: 2. The Solution Algorithm</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/cse-143-final-project-hilbert-sort-1-the-problem.html">CSE 143 Final Project: Hilbert Sort: 1. The Problem</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/cse-143-final-project-classy.html">CSE 143 Final Project: Classy</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/cse-143-final-project-checkers.html">CSE 143 Final Project: Checkers</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>May 2017</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/teaching-recursion-with-the-n-queens-problem.html">Teaching Recursion with the N Queens Problem</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/undergraduate-research-project-wireless-sensor-networks-for-internet-of-things-applications-part-2-the-technologies.html">Undergraduate Research Project: Wireless Sensor Networks for Internet of Things Applications (Part 2: The Technologies)</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/undergraduate-research-project-wireless-sensor-networks-for-internet-of-things-applications-part-1-the-project.html">Undergraduate Research Project: Wireless Sensor Networks for Internet of Things Applications (Part 1: The Project)</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>April 2017</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/stunnel.html">Stunnel</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/traveling-schoolteacher-problem.html">Traveling Schoolteacher Problem</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/the-z-machine-a-simple-turing-machine.html">The Z-Machine: A Simple Turing Machine</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/awsome-day-seattle-notes-part-2-networking-security-and-miscellany.html">AWSome Day Seattle Notes: Part 2: Networking, Security, and Miscellany</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/awsome-day-seattle-notes-part-1-the-basics.html">AWSome Day Seattle Notes: Part 1: The Basics</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/setting-up-a-self-hosted-github-clone-with-gitea.html">Setting Up a Self-Hosted Github Clone with Gitea</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/better-timing-of-guava-traveling-salesperson-problem-code-timing-scripts.html">Better Timing of Guava Traveling Salesperson Problem Code: Timing Scripts</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>March 2017</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/fixing-bottlenecks-in-the-guava-traveling-salesperson-problem-code.html">Fixing Bottlenecks in the Guava Traveling Salesperson Problem Code</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/python-vs-perl-n-queens-problem.html">Python vs. Perl: N Queens Problem</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/solving-the-traveling-salesperson-problem-with-java-and-guava.html">Solving the Traveling Salesperson Problem with Java and Guava</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/perl-vs-java-n-queens-problem.html">Perl vs. Java: N Queens Problem</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/enigma-cipher-implementation-part-4-combinatorics.html">Enigma Cipher Implementation: Part 4: Combinatorics</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/enigma-cipher-implementation-part-3-enigma-in-java-without-objects.html">Enigma Cipher Implementation: Part 3: Enigma in Java Without Objects</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/enigma-cipher-implementation-part-2-pseudocode.html">Enigma Cipher Implementation: Part 2: Pseudocode</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/enigma-cipher-implementation-part-1-how-it-works.html">Enigma Cipher Implementation: Part 1: How It Works</a>
            </p>

        </div>

        <div class="v20"></div>



<div class="v100"></div>
        </div>

    </div>



</div>



<script type="text/javascript" src="https://charlesreid1.github.io/theme/js/jquery-1.11.2.js"></script>
<script type="text/javascript" src="https://charlesreid1.github.io/theme/js/bootstrap-3.3.4.js"></script>
<script type="text/javascript" src="https://charlesreid1.github.io/theme/js/d3-3.5.5.js"></script><script type="text/javascript" src="https://charlesreid1.github.io/theme/js/jquery-1.11.2.js"></script>
<script type="text/javascript" src="https://charlesreid1.github.io/theme/js/bootstrap-3.3.4.js"></script>

<footer id="contentinfo" class="body">
<p>&nbsp;</p>
<p>&nbsp;</p>
<center>
	<hr />
</center>
<p>&nbsp;</p>
<p style="text-align: center">
    <span class="fa-stack fa-lg">
        <i class="fa fa-square fa-stack-2x" style="color:#000;"></i>
        <i class="fa fa-terminal fa-stack-1x fa-inverse"></i>
    </span>
    Made from the command line with vim by 
    <a href="http://charlesreid1.com">charlesreid1</a><br />
    with help from <a href="https://getbootstrap.com/">Bootstrap</a> and <a href="http://getpelican.com">Pelican</a>.
</p>

<br />

<p style="text-align: center">
    <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">
    <span class="fa-stack fa-lg">
        <i class="fa fa-square fa-stack-2x" style="color:#000;"></i>
        <i class="fa fa-creative-commons fa-stack-1x fa-inverse"></i>
    </span>
    </a>
    <br />
    Licensed under the <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 License</a>.
</p>

<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=11611748;
var sc_invisible=1;
var sc_security="9fcba820";
</script>
<script type="text/javascript"
src="https://www.statcounter.com/counter/counter.js"
async></script>

<noscript><div class="statcounter"><a title="Web Analytics"
href="http://statcounter.com/" target="_blank"><img
class="statcounter"
src="//c.statcounter.com/11611748/0/9fcba820/1/" alt="Web
Analytics"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->
</footer><!-- /#contentinfo -->
</body>
</html>