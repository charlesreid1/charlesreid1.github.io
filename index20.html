<!DOCTYPE html>
<html lang="en">
<head>
        <title>charlesreid1</title>
        <meta charset="utf-8" />

        <!--
        CSS styles
        -->
        <link href="https://charlesreid1.github.io/theme/css/bootstrap.css"       rel="stylesheet" type="text/css">
        <link href="https://charlesreid1.github.io/theme/css/slate.css"              rel="stylesheet" type="text/css">
        <link href="https://charlesreid1.github.io/theme/css/font-awesome.css"       rel="stylesheet" type="text/css"/>
        <link href="https://charlesreid1.github.io/theme/css/pygment-solarized.css"  rel="stylesheet" type="text/css"/>

        <!--
        my CSS styles
        -->
        <link href="https://charlesreid1.github.io/theme/css/main.css"            rel="stylesheet" type="text/css">
        <link href="https://charlesreid1.github.io/theme/css/dox.css"             rel="stylesheet" type="text/css">


        <!--
        include Angular first
        -->
        <script type="text/javascript" src="https://charlesreid1.github.io/theme/js/angular-1.3.15.js"></script>
        <script type="text/javascript" src="https://charlesreid1.github.io/theme/js/skrollr-0.6.29.js"></script>
        <script type="text/javascript" src="https://charlesreid1.github.io/theme/js/d3-3.5.5.js"></script>

        <!--
        this seems like a bad idea.
        but if I don't put jquery first, I get errors about unrecognized $s.
        -->
        <script type="text/javascript" src="https://charlesreid1.github.io/theme/js/jquery-1.11.2.js"></script>

</head>
<body id="index">
<nav class="navbar navbar-default">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span> 
            </button>
            <a href="https://charlesreid1.github.io" class="navbar-brand">charlesreid1.github.io</a>
        </div>
        <div>
            <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav">

                    <li>
                        <a href="https://charlesreid1.com/wiki">Wiki</a>
                    </li>
                    <li>
                        <a href="https://git.charlesreid1.com/explore">Git</a>
                    </li>
                    <li>
                        <a href="http://spotify.charlesreid1.com">Music</a>
                    </li>
                    <li>
                        <a href="https://charlesreid1.com/life">Life</a>
                    </li>
                    <li>
                        <a href="https://charlesreid1.github.io">Blog</a>
                    </li>
                    <li>
                        <a href="https://charlesreid1.com/about">About Me</a>
                    </li>

                </ul>
            </div>
        </div>
    </div>
</nav>



<div class="container">

    <div class="row">
        <div class="col-md-12 col-centered" style="text-align: center;">
            <div class="v50"></div>
            <div class="cosmojumbo">
                <h1 class="jumbojumbo">charlesreid1.com blog<h1>
            </div>
        </div>
    </div>


    <div class="v50"></div>


    <div class="row">

        <div class="col-md-8" style="text-align: center;">

  	            	<article>
<header>
<div class="row">


    <div class="col-md-12">
        <div class="headtext" style="text-align: center;">
            <h1><b>
                Python vs. Perl: N Queens Problem
            </b></h1>
        
            <p class="lead">
                Posted 
                <time datetime="2017-03-25T20:00:00-07:00" pubdate>Saturday 03/25/2017</time>
                in 
                <a href="https://charlesreid1.github.io/category/computer-science.html">Computer Science</a>
                </p>
            <p>
            <span style="font-size: 14px">
                <a href="https://charlesreid1.github.io/python-vs-perl-n-queens-problem.html">permalink</a>
            </span>
            </p>
        </div>

    </div>

</div>
</header>


<div class="v50"></div>


<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="entry-content"><h2>Table of Contents</h2>
<ul>
<li><a href="#pvp-background">Background</a></li>
<li><a href="#pvp-nqueens">N Queens Revisited</a></li>
<li><a href="#pvp-perlsoln">Perl Solution</a></li>
<li><a href="#pvp-pythonsoln">Python Solution</a></li>
<li><a href="#pvp-h2hnqueens">Python vs. Perl: Walltime vs. Number of Queens</a></li>
<li><a href="#pvp-perlprof">Perl Profiling and Results</a></li>
<li><a href="#pvp-pythonprof">Python Profiling</a></li>
<li><a href="#pvp-pythonprofresults">Python Profiling Results</a></li>
<li><a href="#pvp-pythonperl">Comparing Python to Perl</a></li>
<li><a href="#pvp-h2hops">Python vs. Perl: Walltime vs. Number of Solutions Tested</a></li>
<li><a href="#pvp-winner">The Winner: Perl for Small Problems, Python for Big Ones</a></li>
<li><a href="#pvp-sources">Sources</a></li>
</ul>
<p><a name="pvp-background"></a></p>
<h2>Background</h2>
<p>Revisiting the N queens problem, this time implementing the solution in Python.</p>
<p>Verb-oriented solution, functional, and based on Perl solution</p>
<p>More fair comparison - both are interpreted languages, not compiled languages</p>
<p>Compare Python and Perl, ease of implementation, speed, flexibility</p>
<p><a name="pvp-nqueensproblem"></a></p>
<h2>N Queens Problem</h2>
<p>As a recap from the last post about the N queens problem, we're solving a chess puzzle that asks:
how many different configurations are there for placing <span class="math">\(N\)</span> queens on an <span class="math">\(N \times N\)</span> chessboard
such that no queen attacks any other queen?</p>
<p>This is a popular problem in computer science because solutions often implement recursive backtracking.</p>
<p>See <a href="https://en.wikipedia.org/wiki/N_Queens_Problem">the Wikipedia article</a> for details.</p>
<p><a name="pvp-nqueenssoln"></a></p>
<h2>N Queens Solution</h2>
<p>Here is the pseudocode of the N queens solution being implemented here:</p>
<div class="highlight"><pre><span></span><span class="nv">explore</span><span class="ss">(</span><span class="nv">column</span><span class="ss">)</span>:
    <span class="k">if</span> <span class="nv">last</span> <span class="nv">column</span>:
        # <span class="nv">base</span> <span class="nv">case</span>
        <span class="nv">add</span> <span class="nv">to</span> <span class="nv">solutions</span>
    <span class="k">else</span>:
        # <span class="nv">recursive</span> <span class="nv">case</span>
        <span class="k">for</span> <span class="nv">each</span> <span class="nv">row</span>:
            <span class="k">if</span> <span class="nv">this</span> <span class="nv">is</span> <span class="nv">a</span> <span class="nv">safe</span> <span class="nv">row</span>:
                <span class="nv">place</span> <span class="nv">queen</span> <span class="nv">on</span> <span class="nv">this</span> <span class="nv">row</span>
                <span class="nv">explore</span><span class="ss">(</span><span class="nv">column</span><span class="o">+</span><span class="mi">1</span><span class="ss">)</span>
                <span class="nv">remove</span> <span class="nv">queen</span> <span class="nv">from</span> <span class="nv">this</span> <span class="nv">row</span>
</pre></div>


<p>This solution implements recursive backtracking to explore choices of where to place each queen.
It keeps solutions simple, and can be implemented using only primitive built-in data types.
Solutions are stringified version of these arrays, consisting of 8 digits, so they are likewise very simple.</p>
<p><a name="pvp-perlsoln"></a></p>
<h3>Perl Solution</h3>
<p>As a reminder, the Perl solution was originally from <a href="http://rosettacode.org/wiki/N-queens_problem#Perl">Rosetta Code</a>.
Here's another link to the Perl solution on Github.</p>
<p><a href="https://gist.github.com/charlesreid1/4ce97a5f896ff1c89855a5d038d51535">Github gist: nqueens.pl</a></p>
<p><a name="pvp-pythonsoln"></a></p>
<h3>Python Solution</h3>
<p>The solution requires the use of one array of data that is fixed in size,
which for a given column stores a list of rows already occupied by queens, 
and one array of data that is variable in size, which stores where each queen has been placed.</p>
<p>The Python solution makes use of lists by using a fixed-size list for the occupied rows
and a variable size list for storing queen locations. 
It utilizes buit-in methods for the list data type to append and pop, or add and remove items from the end of the list.</p>
<p><a href="https://gist.github.com/charlesreid1/1a2ecb3a83284290d4a9daf747d0d7e4">Github gist: nqueens.py</a></p>
<p><a name="pvp-h2hnqueens"></a></p>
<h2>Head to Head: Walltime vs. Number of Queens</h2>
<p><img alt="Graph of walltime versus number of queens" src="/images/python-vs-perl-nqueens.png"></p>
<div class="highlight"><pre><span></span><span class="c1">----------------------------------------------------------</span>
<span class="o">|</span> <span class="n">NQueens</span> <span class="o">|</span> <span class="n">Nsolutions</span> <span class="o">|</span> <span class="n">Java</span>      <span class="o">|</span> <span class="n">Perl</span>     <span class="o">|</span> <span class="n">Python</span>   <span class="o">|</span>
<span class="o">|</span><span class="c1">---------|------------|-----------|----------|----------|</span>
<span class="o">|</span> <span class="mi">8</span>       <span class="o">|</span> <span class="mi">92</span>         <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">003628</span>  <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">016</span>    <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">018</span>    <span class="o">|</span>
<span class="o">|</span> <span class="mi">9</span>       <span class="o">|</span> <span class="mi">352</span>        <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">006709</span>  <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">067</span>    <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">077</span>    <span class="o">|</span>
<span class="o">|</span> <span class="mi">10</span>      <span class="o">|</span> <span class="mi">724</span>        <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">017473</span>  <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">259</span>    <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">359</span>    <span class="o">|</span>
<span class="o">|</span> <span class="mi">11</span>      <span class="o">|</span> <span class="mi">2680</span>       <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">061291</span>  <span class="o">|</span> <span class="mi">1</span><span class="p">.</span><span class="mi">542</span>    <span class="o">|</span> <span class="mi">1</span><span class="p">.</span><span class="mi">684</span>    <span class="o">|</span>
<span class="o">|</span> <span class="mi">12</span>      <span class="o">|</span> <span class="mi">14200</span>      <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">240463</span>  <span class="o">|</span> <span class="mi">8</span><span class="p">.</span><span class="mi">431</span>    <span class="o">|</span> <span class="mi">8</span><span class="p">.</span><span class="mi">618</span>    <span class="o">|</span>
<span class="o">|</span> <span class="mi">13</span>      <span class="o">|</span> <span class="mi">73712</span>      <span class="o">|</span> <span class="mi">1</span><span class="p">.</span><span class="mi">113491</span>  <span class="o">|</span> <span class="mi">48</span><span class="p">.</span><span class="mi">542</span>   <span class="o">|</span> <span class="mi">50</span><span class="p">.</span><span class="mi">401</span>   <span class="o">|</span>
<span class="o">|</span> <span class="mi">14</span>      <span class="o">|</span> <span class="mi">365596</span>     <span class="o">|</span> <span class="mi">6</span><span class="p">.</span><span class="mi">557336</span>  <span class="o">|</span> <span class="mi">303</span><span class="p">.</span><span class="mi">278</span>  <span class="o">|</span> <span class="mi">322</span><span class="p">.</span><span class="mi">576</span>  <span class="o">|</span>
<span class="o">|</span> <span class="mi">15</span>      <span class="o">|</span> <span class="mi">2279184</span>    <span class="o">|</span> <span class="mi">42</span><span class="p">.</span><span class="mi">619426</span> <span class="o">|</span> <span class="mi">2057</span><span class="p">.</span><span class="mi">052</span> <span class="o">|</span> <span class="mi">1979</span><span class="p">.</span><span class="mi">343</span> <span class="o">|</span>
<span class="c1">----------------------------------------------------------</span>
</pre></div>


<p>The results of this test show that Python and Perl
are fairly closely matched.</p>
<p><a name="pvp-perlprof"></a></p>
<h2>Perl Profiling</h2>
<p>Results of profiling the Perl code with <code>Devel::NYTProf</code> were detailed in a prior post.</p>
<p>Here are those results once again,
for the 11 queens problem:</p>
<div class="highlight"><pre><span></span><span class="c1"># Profile data generated by Devel::NYTProf::Reader</span>
<span class="c1"># Version: v6.04</span>
<span class="c1"># More information at http://metacpan.org/release/Devel-NYTProf/</span>
<span class="c1"># Format: time,calls,time/call,code</span>
<span class="mf">0.000238</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.000119</span><span class="p">,</span><span class="k">use</span> <span class="nn">Time::HiRes</span> <span class="sx">qw(time)</span><span class="p">;</span>
<span class="mf">0.000039</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.000019</span><span class="p">,</span><span class="k">use</span> <span class="nn">strict</span><span class="p">;</span>
<span class="mf">0.000491</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.000246</span><span class="p">,</span><span class="k">use</span> <span class="nn">warnings</span><span class="p">;</span>
<span class="mf">0.000021</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.000021</span><span class="p">,</span><span class="k">my</span> <span class="nv">$start</span> <span class="o">=</span> <span class="nb">time</span><span class="p">;</span>
<span class="mf">0.010338</span><span class="p">,</span><span class="mi">2680</span><span class="p">,</span><span class="mf">0.000004</span><span class="p">,</span><span class="nb">push</span> <span class="nv">@solutions</span><span class="p">,</span> <span class="s">&quot;@queens\n&quot;</span><span class="p">;</span>
<span class="mf">0.009993</span><span class="p">,</span><span class="mi">2680</span><span class="p">,</span><span class="mf">0.000004</span><span class="p">,</span><span class="k">return</span><span class="p">;</span>
<span class="mf">0.186298</span><span class="p">,</span><span class="mi">164246</span><span class="p">,</span><span class="mf">0.000001</span><span class="p">,</span><span class="nv">$#attacked</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="nv">$board_size</span><span class="p">;</span>
<span class="mf">0.150338</span><span class="p">,</span><span class="mi">164246</span><span class="p">,</span><span class="mf">0.000001</span><span class="p">,</span><span class="k">for</span><span class="p">(</span> <span class="mi">0</span> <span class="o">..</span> <span class="nv">$#queens</span><span class="p">)</span> <span class="p">{</span> 
<span class="mf">0.675523</span><span class="p">,</span><span class="mf">1.26035e+06</span><span class="p">,</span><span class="mf">0.000001</span><span class="p">,</span><span class="nv">$attacked</span><span class="p">[</span> <span class="nv">$ix2</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="mf">1.242624</span><span class="p">,</span><span class="mi">164246</span><span class="p">,</span><span class="mf">0.000008</span><span class="p">,</span><span class="k">for</span> <span class="k">my</span> <span class="nv">$row</span> <span class="p">(</span><span class="mi">0</span> <span class="o">..</span> <span class="nv">$board_size</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
<span class="mf">0.267469</span><span class="p">,</span><span class="mi">166925</span><span class="p">,</span><span class="mf">0.000002</span><span class="p">,</span><span class="n">explore</span><span class="p">(</span><span class="nv">$depth</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
<span class="mf">0.125272</span><span class="p">,</span><span class="mi">166925</span><span class="p">,</span><span class="mf">0.000001</span><span class="p">,</span><span class="nv">$occupied</span><span class="p">[</span><span class="nv">$row</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="mf">0.000002</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.000002</span><span class="p">,</span><span class="n">explore</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="mf">0.000011</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.000011</span><span class="p">,</span><span class="k">my</span> <span class="nv">$duration</span> <span class="o">=</span> <span class="nb">time</span> <span class="o">-</span> <span class="nv">$start</span><span class="p">;</span>
<span class="mf">0.000075</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.000075</span><span class="p">,</span><span class="k">print</span> <span class="s">&quot;Found &quot;</span><span class="p">,</span> <span class="nb">scalar</span><span class="p">(</span><span class="nv">@solutions</span><span class="p">),</span> <span class="s">&quot; solutions\n&quot;</span><span class="p">;</span>
<span class="mf">0.000050</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.000050</span><span class="p">,</span><span class="nb">printf</span> <span class="s">&quot;Execution time: %0.3f s \n&quot;</span><span class="p">,</span><span class="nv">$duration</span><span class="p">;</span>
</pre></div>


<p><a name="pvp-pythonprof"></a></p>
<h2>Python Profiling</h2>
<p>The Python N queens solution was profiled with two tools: <code>cProfile</code> and <code>line_profiler</code>. </p>
<p>The built-in profiling tool <code>cProfile</code> gives a summary of how much time was spent in each method,
but nothing lower level than that. It is similar to Java profiling tools. <a href="https://docs.python.org/2/library/profile.html">(cProfile documentation)</a></p>
<p>The <code>line_profiler</code> tool is designed to profile Python code line-by-line, which gives a much more useful
breakdown of where the code spent all of its time. It is also helpful because this can be compared one-to-one
with the results from Perl, and we can get an equal basis for comparing the two languages.</p>
<p><a name="pvp-pythonprofresults"></a></p>
<h2>Python Profiling Results</h2>
<h3><code>cProfile</code> Results</h3>
<p>Here are the results from running the N queens problem for N = 11 through cProfile:</p>
<div class="highlight"><pre><span></span><span class="o">**************************************</span>
<span class="n">Profiling</span> <span class="mi">11</span> <span class="n">queens</span> <span class="n">problem</span> <span class="k">with</span> <span class="n">Python</span><span class="p">...</span>
<span class="o">*******************************</span>
<span class="n">cProfile</span><span class="p">:</span>
<span class="o">*******************************</span>
<span class="k">Found</span> <span class="mi">2680</span> <span class="n">solutions</span>
         <span class="mi">996197</span> <span class="k">function</span> <span class="n">calls</span> <span class="p">(</span><span class="mi">829272</span> <span class="n">primitive</span> <span class="n">calls</span><span class="p">)</span> <span class="k">in</span> <span class="mi">2</span><span class="p">.</span><span class="mi">237</span> <span class="n">seconds</span>

   <span class="n">Ordered</span> <span class="k">by</span><span class="p">:</span> <span class="n">internal</span> <span class="n">time</span>

   <span class="n">ncalls</span>  <span class="n">tottime</span>  <span class="n">percall</span>  <span class="n">cumtime</span>  <span class="n">percall</span> <span class="n">filename</span><span class="p">:</span><span class="n">lineno</span><span class="p">(</span><span class="k">function</span><span class="p">)</span>
 <span class="mi">166926</span><span class="o">/</span><span class="mi">1</span>    <span class="mi">1</span><span class="p">.</span><span class="mi">845</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span>    <span class="mi">2</span><span class="p">.</span><span class="mi">237</span>    <span class="mi">2</span><span class="p">.</span><span class="mi">237</span> <span class="o">/</span><span class="n">Volumes</span><span class="o">/</span><span class="n">noospace</span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">charles</span><span class="o">/</span><span class="n">codes</span><span class="o">/</span><span class="n">hello</span><span class="o">-</span><span class="n">world</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">nqueens</span><span class="o">/</span><span class="n">nqueens</span><span class="p">.</span><span class="n">py</span><span class="p">:</span><span class="mi">12</span><span class="p">(</span><span class="n">explore</span><span class="p">)</span>
   <span class="mi">328492</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">275</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">275</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span> <span class="err">{</span><span class="n">range</span><span class="err">}</span>
   <span class="mi">166925</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">062</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">062</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span> <span class="err">{</span><span class="k">method</span> <span class="s1">&#39;pop&#39;</span> <span class="k">of</span> <span class="s1">&#39;list&#39;</span> <span class="n">objects</span><span class="err">}</span>
   <span class="mi">169605</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">029</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">029</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span> <span class="err">{</span><span class="k">method</span> <span class="s1">&#39;append&#39;</span> <span class="k">of</span> <span class="s1">&#39;list&#39;</span> <span class="n">objects</span><span class="err">}</span>
   <span class="mi">164247</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">026</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">026</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span> <span class="err">{</span><span class="n">len</span><span class="err">}</span>
        <span class="mi">1</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span>    <span class="mi">2</span><span class="p">.</span><span class="mi">237</span>    <span class="mi">2</span><span class="p">.</span><span class="mi">237</span> <span class="o">/</span><span class="n">Volumes</span><span class="o">/</span><span class="n">noospace</span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">charles</span><span class="o">/</span><span class="n">codes</span><span class="o">/</span><span class="n">hello</span><span class="o">-</span><span class="n">world</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">nqueens</span><span class="o">/</span><span class="n">nqueens</span><span class="p">.</span><span class="n">py</span><span class="p">:</span><span class="mi">4</span><span class="p">(</span><span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span><span class="p">)</span>
        <span class="mi">1</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">000</span> <span class="err">{</span><span class="k">method</span> <span class="s1">&#39;disable&#39;</span> <span class="k">of</span> <span class="s1">&#39;_lsprof.Profiler&#39;</span> <span class="n">objects</span><span class="err">}</span>
</pre></div>


<h3><code>line_profiler</code> Results</h3>
<p>The <code>line_profiler</code> tool gives a more detailed picture of the code and where it spends its time,
breaking down profiling information line-by-line. This tool can be installed with pip: <code>pip install line_profiler</code>.
The (INSERT LINK)(nqueens repository on github) has a file that demonstrates how to use this tool.
See <a href="https://charlesreid1.com/wiki/Python/Profiling">Python/Profiling</a></p>
<p>Here are the results from the <code>line_profiler</code> tool run on the same (11 queens) problem:</p>
<div class="highlight"><pre><span></span><span class="o">**************************************</span>
<span class="nv">Profiling</span> <span class="mi">11</span> <span class="nv">queens</span> <span class="nv">problem</span> <span class="nv">with</span> <span class="nv">Python</span>...
<span class="nv">Found</span> <span class="mi">2680</span> <span class="nv">solutions</span>
<span class="nv">Wrote</span> <span class="nv">profile</span> <span class="nv">results</span> <span class="nv">to</span> <span class="nv">nqueens</span>.<span class="nv">py</span>.<span class="nv">lprof</span>
<span class="nv">Timer</span> <span class="nv">unit</span>: <span class="mi">1</span><span class="nv">e</span><span class="o">-</span><span class="mi">06</span> <span class="nv">s</span>

<span class="nv">Total</span> <span class="nv">time</span>: <span class="mi">14</span>.<span class="mi">2258</span> <span class="nv">s</span>
<span class="nv">File</span>: <span class="nv">nqueens</span>.<span class="nv">py</span>
<span class="nv">Function</span>: <span class="nv">explore</span> <span class="nv">at</span> <span class="nv">line</span> <span class="mi">11</span>

<span class="nv">Line</span> #      <span class="nv">Hits</span>         <span class="nv">Time</span>  <span class="nv">Per</span> <span class="nv">Hit</span>   <span class="o">%</span> <span class="nv">Time</span>  <span class="nv">Line</span> <span class="nv">Contents</span>
<span class="o">==============================================================</span>
    <span class="mi">11</span>                                           @<span class="nv">profile</span>
    <span class="mi">12</span>                                           <span class="nv">def</span> <span class="nv">explore</span><span class="ss">(</span><span class="nv">depth</span><span class="ss">)</span>:
    <span class="mi">13</span>                                               # <span class="nv">base</span> <span class="nv">case</span>
    <span class="mi">14</span>    <span class="mi">166926</span>       <span class="mi">187573</span>      <span class="mi">1</span>.<span class="mi">1</span>      <span class="mi">1</span>.<span class="mi">3</span>      <span class="k">if</span><span class="ss">(</span><span class="nv">depth</span><span class="o">==</span><span class="nv">board_size</span><span class="ss">)</span>:
    <span class="mi">15</span>                                                   # <span class="nv">stringify</span><span class="o">/</span><span class="nv">serialize</span> <span class="nv">the</span> <span class="nv">solution</span>
    <span class="mi">16</span>      <span class="mi">2680</span>        <span class="mi">31497</span>     <span class="mi">11</span>.<span class="mi">8</span>      <span class="mi">0</span>.<span class="mi">2</span>          <span class="nv">solutions</span>.<span class="nv">append</span><span class="ss">(</span><span class="s2">&quot;</span><span class="s">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="ss">(</span><span class="nv">queens</span><span class="ss">))</span>
    <span class="mi">17</span>      <span class="mi">2680</span>         <span class="mi">3117</span>      <span class="mi">1</span>.<span class="mi">2</span>      <span class="mi">0</span>.<span class="mi">0</span>          <span class="k">return</span>
    <span class="mi">18</span>                                           
    <span class="mi">19</span>                                               <span class="k">else</span>:
    <span class="mi">20</span>    <span class="mi">164246</span>       <span class="mi">384688</span>      <span class="mi">2</span>.<span class="mi">3</span>      <span class="mi">2</span>.<span class="mi">7</span>          <span class="nv">attacked</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="nv">board_size</span><span class="o">*</span>[<span class="mi">0</span>,]
    <span class="mi">21</span>   <span class="mi">1424595</span>      <span class="mi">1690693</span>      <span class="mi">1</span>.<span class="mi">2</span>     <span class="mi">11</span>.<span class="mi">9</span>          <span class="k">for</span> <span class="nv">i</span> <span class="nv">in</span> <span class="nv">range</span><span class="ss">(</span><span class="mi">0</span>,<span class="nv">len</span><span class="ss">(</span><span class="nv">queens</span><span class="ss">))</span>:
    <span class="mi">22</span>   <span class="mi">1260349</span>      <span class="mi">1471304</span>      <span class="mi">1</span>.<span class="mi">2</span>     <span class="mi">10</span>.<span class="mi">3</span>              <span class="nv">ix1</span> <span class="o">=</span> <span class="nv">queens</span>[<span class="nv">i</span>] <span class="o">+</span> <span class="nv">depth</span> <span class="o">-</span> <span class="nv">i</span>
    <span class="mi">23</span>   <span class="mi">1260349</span>      <span class="mi">1405141</span>      <span class="mi">1</span>.<span class="mi">1</span>      <span class="mi">9</span>.<span class="mi">9</span>              <span class="nv">attacked</span>[<span class="nv">ix1</span>] <span class="o">=</span> <span class="mi">1</span>
    <span class="mi">24</span>                                           
    <span class="mi">25</span>   <span class="mi">1260349</span>      <span class="mi">1494095</span>      <span class="mi">1</span>.<span class="mi">2</span>     <span class="mi">10</span>.<span class="mi">5</span>              <span class="nv">ix2</span> <span class="o">=</span> <span class="nv">queens</span>[<span class="nv">i</span>] <span class="o">-</span> <span class="nv">depth</span> <span class="o">+</span> <span class="nv">i</span>
    <span class="mi">26</span>   <span class="mi">1260349</span>      <span class="mi">1392563</span>      <span class="mi">1</span>.<span class="mi">1</span>      <span class="mi">9</span>.<span class="mi">8</span>              <span class="nv">attacked</span>[<span class="nv">ix2</span>] <span class="o">=</span> <span class="mi">1</span>
    <span class="mi">27</span>                                           
    <span class="mi">28</span>   <span class="mi">1970952</span>      <span class="mi">2229922</span>      <span class="mi">1</span>.<span class="mi">1</span>     <span class="mi">15</span>.<span class="mi">7</span>          <span class="k">for</span> <span class="nv">row</span> <span class="nv">in</span> <span class="nv">range</span><span class="ss">(</span><span class="mi">0</span>,<span class="nv">board_size</span><span class="ss">)</span>:
    <span class="mi">29</span>   <span class="mi">1806706</span>      <span class="mi">2031139</span>      <span class="mi">1</span>.<span class="mi">1</span>     <span class="mi">14</span>.<span class="mi">3</span>              <span class="k">if</span><span class="ss">(</span><span class="nv">occupied</span>[<span class="nv">row</span>] <span class="nv">or</span> <span class="nv">attacked</span>[<span class="nv">row</span>]<span class="ss">)</span>:
    <span class="mi">30</span>    <span class="mi">379432</span>       <span class="mi">374466</span>      <span class="mi">1</span>.<span class="mi">0</span>      <span class="mi">2</span>.<span class="mi">6</span>                  <span class="k">continue</span>
    <span class="mi">31</span>                                           
    <span class="mi">32</span>                                                       # <span class="nv">make</span> <span class="nv">a</span> <span class="nv">choice</span>
    <span class="mi">33</span>    <span class="mi">166925</span>       <span class="mi">241114</span>      <span class="mi">1</span>.<span class="mi">4</span>      <span class="mi">1</span>.<span class="mi">7</span>              <span class="nv">queens</span>.<span class="nv">append</span><span class="ss">(</span><span class="nv">row</span><span class="ss">)</span>
    <span class="mi">34</span>    <span class="mi">166925</span>       <span class="mi">186833</span>      <span class="mi">1</span>.<span class="mi">1</span>      <span class="mi">1</span>.<span class="mi">3</span>              <span class="nv">occupied</span>[<span class="nv">row</span>] <span class="o">=</span> <span class="mi">1</span>
    <span class="mi">35</span>                                           
    <span class="mi">36</span>                                                       # <span class="nv">explore</span> <span class="nv">the</span> <span class="nv">consequences</span>
    <span class="mi">37</span>    <span class="mi">166925</span>       <span class="mi">610396</span>      <span class="mi">3</span>.<span class="mi">7</span>      <span class="mi">4</span>.<span class="mi">3</span>              <span class="nv">explore</span><span class="ss">(</span><span class="nv">depth</span><span class="o">+</span><span class="mi">1</span><span class="ss">)</span>
    <span class="mi">38</span>                                           
    <span class="mi">39</span>                                                       # <span class="nv">unmake</span> <span class="nv">the</span> <span class="nv">choice</span>
    <span class="mi">40</span>    <span class="mi">166925</span>       <span class="mi">288667</span>      <span class="mi">1</span>.<span class="mi">7</span>      <span class="mi">2</span>.<span class="mi">0</span>              <span class="nv">queens</span>.<span class="nv">pop</span><span class="ss">()</span>
    <span class="mi">41</span>    <span class="mi">166925</span>       <span class="mi">202555</span>      <span class="mi">1</span>.<span class="mi">2</span>      <span class="mi">1</span>.<span class="mi">4</span>              <span class="nv">occupied</span>[<span class="nv">row</span>] <span class="o">=</span> <span class="mi">0</span>
</pre></div>


<p><a name="pvp-h2hopts"></a></p>
<h2>Python vs Perl: Walltime vs. Number of Solutions Tested</h2>
<p>As with the prior post, I verified that both codes were testing the same number of solutions.
Here is that table of the number of solutions for each value of N, together with the number of solutions tested:</p>
<div class="highlight"><pre><span></span><span class="c1">-----------------------------------------------------------------------------</span>
<span class="o">|</span> <span class="n">NQueens</span> <span class="o">|</span> <span class="n">Nsolutions</span> <span class="o">|</span> <span class="n">NsolutionsTested</span> <span class="o">|</span> <span class="n">Java</span>      <span class="o">|</span> <span class="n">Perl</span>     <span class="o">|</span> <span class="n">Python</span>   <span class="o">|</span>
<span class="o">|</span><span class="c1">---------|------------|------------------|-----------|----------|----------|</span>
<span class="o">|</span> <span class="mi">8</span>       <span class="o">|</span> <span class="mi">92</span>         <span class="o">|</span> <span class="mi">1965</span>             <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">003628</span>  <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">016</span>    <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">018</span>    <span class="o">|</span>
<span class="o">|</span> <span class="mi">9</span>       <span class="o">|</span> <span class="mi">352</span>        <span class="o">|</span> <span class="mi">8042</span>             <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">006709</span>  <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">067</span>    <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">077</span>    <span class="o">|</span>
<span class="o">|</span> <span class="mi">10</span>      <span class="o">|</span> <span class="mi">724</span>        <span class="o">|</span> <span class="mi">34815</span>            <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">017473</span>  <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">259</span>    <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">359</span>    <span class="o">|</span>
<span class="o">|</span> <span class="mi">11</span>      <span class="o">|</span> <span class="mi">2680</span>       <span class="o">|</span> <span class="mi">164246</span>           <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">061291</span>  <span class="o">|</span> <span class="mi">1</span><span class="p">.</span><span class="mi">542</span>    <span class="o">|</span> <span class="mi">1</span><span class="p">.</span><span class="mi">684</span>    <span class="o">|</span>
<span class="o">|</span> <span class="mi">12</span>      <span class="o">|</span> <span class="mi">14200</span>      <span class="o">|</span> <span class="mi">841989</span>           <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">240463</span>  <span class="o">|</span> <span class="mi">8</span><span class="p">.</span><span class="mi">431</span>    <span class="o">|</span> <span class="mi">8</span><span class="p">.</span><span class="mi">618</span>    <span class="o">|</span>
<span class="o">|</span> <span class="mi">13</span>      <span class="o">|</span> <span class="mi">73712</span>      <span class="o">|</span> <span class="mi">4601178</span>          <span class="o">|</span> <span class="mi">1</span><span class="p">.</span><span class="mi">113491</span>  <span class="o">|</span> <span class="mi">48</span><span class="p">.</span><span class="mi">542</span>   <span class="o">|</span> <span class="mi">50</span><span class="p">.</span><span class="mi">401</span>   <span class="o">|</span>
<span class="o">|</span> <span class="mi">14</span>      <span class="o">|</span> <span class="mi">365596</span>     <span class="o">|</span> <span class="mi">26992957</span>         <span class="o">|</span> <span class="mi">6</span><span class="p">.</span><span class="mi">557336</span>  <span class="o">|</span> <span class="mi">303</span><span class="p">.</span><span class="mi">278</span>  <span class="o">|</span> <span class="mi">322</span><span class="p">.</span><span class="mi">576</span>  <span class="o">|</span>
<span class="o">|</span> <span class="mi">15</span>      <span class="o">|</span> <span class="mi">2279184</span>    <span class="o">|</span> <span class="mi">168849888</span>        <span class="o">|</span> <span class="mi">42</span><span class="p">.</span><span class="mi">619426</span> <span class="o">|</span> <span class="mi">2057</span><span class="p">.</span><span class="mi">052</span> <span class="o">|</span> <span class="mi">1979</span><span class="p">.</span><span class="mi">343</span> <span class="o">|</span>
<span class="c1">-----------------------------------------------------------------------------</span>
</pre></div>


<p><img alt="Graph of walltime versus number of solutions tested" src="/images/python-vs-perl-ntested.png"></p>
<p><a name="pvp-winner"></a></p>
<h2>The Winner: Perl for Small Problems, Python for Big Ones</h2>
<p>It was not a big surprise to see that Perl and Python were nearly identical in their performance,
and it testament to the fact that interpreted scripting languages like Perl and Python operate at one speed,
and compiled code in C++ or Java operates at a completely different speed that is an order of magnitude faster 
(see the comparison of Perl and Java in a prior blog post).</p>
<p>Perl and Python were close enough in performance that, although Perl came out ahead on smaller problems
and Python came out ahead on the biggest, a different CPU or platform, micro-optimizations, and various butterfly effects 
could easily turn the tables. </p>
<p><a name="pvp-sources"></a></p>
<h2>Sources</h2>
<ol>
<li>
<p>"N-Queens Problem". Rosetta Code, GNU Free Documentation License. Edited 6 March 2017. Accessed 21 March 2017.
&lt;<a href="https://web.archive.org/web/20170320081421/http://rosettacode.org/wiki/N-queens_problem">https://web.archive.org/web/20170320081421/http://rosettacode.org/wiki/N-queens_problem</a>&gt;</p>
</li>
<li>
<p>"nqueens.py". Charles Reid. Github Gist, Github Inc. Edited 25 March 2017. Accessed 25 March 2017.
&lt;<a href="https://gist.github.com/charlesreid1/1a2ecb3a83284290d4a9daf747d0d7e4">https://gist.github.com/charlesreid1/1a2ecb3a83284290d4a9daf747d0d7e4</a>&gt;</p>
</li>
<li>
<p>"nqueens.pl". Charles Reid. Github Gist, Github Inc. Edited 20 March 2017. Accessed 23 March 2017.
&lt;<a href="https://gist.github.com/charlesreid1/4ce97a5f896ff1c89855a5d038d51535">https://gist.github.com/charlesreid1/4ce97a5f896ff1c89855a5d038d51535</a>&gt;</p>
</li>
<li>
<p>"The Python Profilers". Python 2.7.13 Documentation, Python Software Foundation. Updated 20 February 2017. Accessed 23 March 2017. 
&lt;<a href="https://docs.python.org/2/library/profile.html">https://docs.python.org/2/library/profile.html</a>&gt;</p>
</li>
<li>
<p>"line_profiler". Python Package Index, Python Software Foundation. Updated 20 October 2016. Accessed 23 March 2017.
&lt;<a href="https://pypi.python.org/pypi/line_profiler/">https://pypi.python.org/pypi/line_profiler/</a>&gt;</p>
</li>
<li>
<p>"Github - rkern/line_profiler". rkern, Github Repository, Github Inc. Updated 20 October 2016. Accessed 23 March 2017.
&lt;<a href="https://github.com/rkern/line_profiler">https://github.com/rkern/line_profiler</a>&gt;</p>
</li>
<li>
<p>"Python/Profiling". Charlesreid1.com wiki, Charles Reid. Edited 23 March 2017. Accessed 23 March 2017.
&lt;<a href="https://web.archive.org/web/20170326031708/http://charlesreid1.com/wiki/Python/Profiling">https://web.archive.org/web/20170326031708/http://charlesreid1.com/wiki/Python/Profiling</a>&gt;</p>
</li>
</ol>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script></div>

    </div>
</div>

<div class="v20"></div>

<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="tags">
            <p>Tags:&nbsp;&nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/python.html">python</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/perl.html">perl</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/java.html">java</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/algorithms.html">algorithms</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/recursion.html">recursion</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/n-queens.html">n-queens</a>
                    &nbsp;&nbsp;
        </div>

    </div>
</div>


<div class="v200"></div>
  	            	</article>
  	            	<article>
<header>
<div class="row">


    <div class="col-md-12">
        <div class="headtext" style="text-align: center;">
            <h1><b>
                Solving the Traveling Salesperson Problem with Java and Guava
            </b></h1>
        
            <p class="lead">
                Posted 
                <time datetime="2017-03-23T11:00:00-07:00" pubdate>Thursday 03/23/2017</time>
                in 
                <a href="https://charlesreid1.github.io/category/java.html">Java</a>
                </p>
            <p>
            <span style="font-size: 14px">
                <a href="https://charlesreid1.github.io/solving-the-traveling-salesperson-problem-with-java-and-guava.html">permalink</a>
            </span>
            </p>
        </div>

    </div>

</div>
</header>


<div class="v50"></div>


<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="entry-content"><h2>Table of Contents</h2>
<ul>
<li><a href="#tsp1-bkg">Background: Traveling Salesperson Problem (TSP)</a></li>
<li><a href="#tsp1-graphs">Graphs</a><ul>
<li><a href="#tsp1-nedges">Number of Edges</a></li>
</ul>
</li>
<li><a href="#tsp1-bktk">Solution: Recursive Backtracking</a> </li>
<li><a href="#tsp1-guava">Solving the TSP with Java and Guava</a> <ul>
<li><a href="#tsp1-basic-guava">Basics of Guava</a></li>
<li><a href="#tsp1-guava-graphs">Guava Graphs</a></li>
<li><a href="#tsp1-guava-mutable-immutable">Guava Mutable vs Immutable</a></li>
<li><a href="#tsp1-importing-guava">Importing Guava</a></li>
<li><a href="#tsp1-tsp-class">TSP Class</a></li>
<li><a href="#tsp1-node-class">Node Class</a></li>
<li><a href="#tsp1-edge-class">Edge Class</a></li>
</ul>
</li>
<li><a href="#tsp1-building-graph">TSP Constructor and Building the Graph</a><ul>
<li><a href="#tsp1-constructor">Constructor</a></li>
<li><a href="#tsp1-build-graph-method">Build Graph Method</a></li>
</ul>
</li>
<li><a href="#tsp1-solving-exploring">Solving and Exploring with Recursive Backtracking</a><ul>
<li><a href="#tsp1-solve">Solve Method</a></li>
<li><a href="#tsp1-explore">Explore (Backtrack) Method</a></li>
</ul>
</li>
<li><a href="#tsp1-nextsteps">Next Steps: Timing and Profiling</a></li>
<li><a href="#tsp1-sources">Sources</a></li>
</ul>
<p><a name="tsp1-bkg"></a></p>
<h2>Background: Traveling Salesperson Problem (TSP)</h2>
<p>The traveling salesperson problem, or TSP, is a classic programming problem and an important one in computer science,
and applications in operations research and optimization.</p>
<p>The idea is that you have a set of <span class="math">\(N\)</span> cities, connected by various roads, each with their own distances.
That is, we have a set of <span class="math">\(E\)</span> roads, each with their own distance <span class="math">\(d_j, j=1 \dots E\)</span>. </p>
<p>The question is, what is the shortest path that a salesperson can take to visit all <span class="math">\(N\)</span> cities, traveling the shortest possible total distance
and visiting each city once and only once?</p>
<p>Like the N queens problem, the traveling salesperson problem is a good candidate for recursive backtracking.
Also like the N queens problem, there are certain shortcuts we can take to trim down the possibilities we explore.</p>
<p>Computer science pages on Wikipedia are generally pretty high in quality, and the <a href="https://en.wikipedia.org/wiki/Traveling_salesman_problem">traveling salesman problem</a>
page is no exception. It give a very thorough overview of the important aspects of the problem.</p>
<p><a name="tsp1-graphs"></a></p>
<h2>Graphs</h2>
<p>Graphs are mathematical objects first utilized by Leonhard Euler to solve the
<a href="https://en.wikipedia.org/wiki/Seven_Bridges_of_K%C3%B6nigsberg">Seven Bridges of Köningsberg</a> problem.
The concept is simple: you have a bunch of dots connected with lines.</p>
<p>The dots are called nodes, and the lines are called edges.</p>
<p>Graphs can be directed, meaning the edges are like arrows with particular directions, or undirected, 
meaning the edges simply represent a connection between the two nodes.</p>
<p>Here is an example of a graph with five nodes, with each edge labeled with its distance:</p>
<p><img style="background:#fff;" alt="A basic graph with five nodes" src="/images/basic-graph.png" /></p>
<p>We will skip over a vast amount of detail about graph theory that is both fascinating and useful,
but M. E. J. Newman's paper <a href="http://www-personal.umich.edu/~mejn/courses/2004/cscs535/review.pdf">"The structure and function of complex networks"</a> 
(self-published and written as a course review) is an extremely detailed
and academically rigorous overview of just about every important detail of the field.</p>
<p><a name="tsp1-nedges"></a></p>
<h3>Number of Edges</h3>
<p>The maximum number of roads or edges <span class="math">\(E\)</span> depends on the number of nodes as <span class="math">\(E = \dfrac{N(N-1)}{2}\)</span>, which is derived from
the formula for 2 choose N (because edges connect 2 nodes). For k choose N, the formula is given by:</p>
<p><span class="math">\($
C_{N,k} = \dfrac{N!}{k! (N-k)!}
$\)</span></p>
<p>and for 2 choose N, it is given by:</p>
<p><span class="math">\($
C_{N,2} = \dfrac{N(N-1)}{2}
$\)</span></p>
<p>This is the maximum number of undirected edges in a graph. 
If the graph is directed, then order matters (the edgge <code>A-&gt;B</code> is no longer the same as <code>B-&gt;A</code>),
so we have to use the formula for k pick N, </p>
<p><span class="math">\($
P_{N,k} = \dfrac{N!}{(N-k)!}
$\)</span></p>
<p>which results in</p>
<p><span class="math">\($
P_{N,2} = N (N-1)
$\)</span></p>
<p>possible edges.</p>
<p><a name="tsp1-nsolutions"></a></p>
<h3>Number of Solutions</h3>
<p>Naturally, the question of the total solution space arises.
Assuming the graph of cities is perfectly connected (representing an upper limit on problem complexity),
how does the number of solutions change as the number of nodes increases?</p>
<p>We can start with a trivial graph, and count the number of possible paths
through the entire graph, starting with a specific node.
This is equivalent to counting permutations of a string that start with a specific character.</p>
<div class="highlight"><pre><span></span><span class="n">ABCDE</span>
<span class="n">ABCED</span>
<span class="n">ABDCE</span>
<span class="n">ABDEC</span>
<span class="n">ABECD</span>
<span class="n">ABEDC</span>
</pre></div>


<p>For a string of length <span class="math">\(N\)</span>, the string has <span class="math">\((N-1)!\)</span> possible permutations that start with a specific character.
Therefore, as the number of nodes <span class="math">\(N\)</span> increases, the number of possible solutions increases as <span class="math">\((N-1)!\)</span>, 
making the complexity class of the problem <span class="math">\(O(N!)\)</span>.</p>
<p><a name="tsp1-bktk"></a></p>
<h2>Solution: Recursive Backtracking</h2>
<p>Here is pseudocode for a recursive backtracking method:</p>
<div class="highlight"><pre><span></span><span class="nv">explore</span><span class="ss">(</span><span class="nv">neighbors</span><span class="ss">)</span>:

    <span class="k">if</span><span class="ss">(</span><span class="nv">no</span> <span class="nv">more</span> <span class="nv">unvisited</span> <span class="nv">neighbors</span><span class="ss">)</span>:
        # <span class="nv">This</span> <span class="nv">is</span> <span class="nv">the</span> <span class="nv">base</span> <span class="nv">case</span>.
        <span class="k">if</span> <span class="nv">total</span> <span class="nv">distance</span> <span class="nv">is</span> <span class="nv">less</span> <span class="nv">than</span> <span class="nv">current</span> <span class="nv">minimum</span>:
            <span class="nv">save</span> <span class="nv">path</span> <span class="nv">and</span> <span class="nv">new</span> <span class="nv">minimum</span>

    <span class="k">else</span>:
        # <span class="nv">This</span> <span class="nv">is</span> <span class="nv">the</span> <span class="nv">recursive</span> <span class="nv">case</span>.
        <span class="k">for</span> <span class="nv">neighbor</span> <span class="nv">in</span> <span class="nv">unvisited</span> <span class="nv">neighbors</span>:
            <span class="nv">visit</span> <span class="nv">neighbor</span>
            <span class="nv">explore</span><span class="ss">(</span><span class="nv">new_neighbors</span><span class="ss">)</span>
            <span class="nv">unvisit</span> <span class="nv">neighbor</span>
</pre></div>


<p>Care is needed to prevent infinite loops in which the traveling salesperson goes back and forth between two cities.
As we traverse the graph, we can mark each node as visited, to ensure we don't revisit nodes and go in circles.</p>
<p>Nodes can be implemented as a <code>Node</code> object in Java, with each Node having a few characteristics:</p>
<ul>
<li>String label</li>
<li>Container of Node pointers pointing to neighbors</li>
<li>Boolean flag: have we visited this node already?</li>
</ul>
<p>Likewise, the graph edges can be represented using integers or doubles.</p>
<p><a name="tsp1-guava"></a></p>
<h2>Solving the TSP with Java and Guava</h2>
<p><a href="https://github.com/google/guava">Google Guava</a> is a library of high-performance data containers in Java.
The library provides some useful graph objects that we can use to easily solve the TSP on a graph.</p>
<p><a name="tsp1-basic-guava"></a></p>
<h3>Basics of Guava</h3>
<p>Install and use Guava by visiting the <a href="https://github.com/google/guava">Guava project on Github</a>, 
find the page for their latest release (<a href="https://github.com/google/guava/wiki/Release21">here is version 21.0</a>), 
and getting the latest <code>.jar</code> file.</p>
<p>To compile with the jar file, you can either utilize an IDE like <a href="http://www.eclipse.org/">Eclipse</a> or <a href="https://www.jetbrains.com/idea/">IntelliJ</a>,
or you can compile from the command line, specifying the class path using the <code>-cp</code> flag:</p>
<div class="highlight"><pre><span></span>$ javac -cp <span class="s1">&#39;.:/path/to/guava/jars/guava-21.0.jar&#39;</span> TSP.java
$ java -cp <span class="s1">&#39;.:/path/to/guava/jars/guava-21.0.jar&#39;</span> TSP
</pre></div>


<p>More information can be found on the charlesreid1.com wiki: <a href="https://charlesreid1.com/wiki/Guava">Guava</a></p>
<p><a name="tsp1-guava-graphs"></a></p>
<h3>Guava Graphs</h3>
<p>Graph objects in Guava are implemented using a set of objects: Graphs, ValueGraphs, and Networks.</p>
<p>Graph objects treat edges as very simple and assumes they contain no information and simply link nodes. </p>
<p>ValueGraphs associate a single non-unique value with each edge on the graph. This can also be used to solve the TSP.</p>
<p>Network objects treat nodes and edges both as objects, and has the ability to deal with more complex edges: model multi-edges, repeated edges, directed edges, etc.</p>
<p>We will use a Network object and design our own graph Node and Edge objects.</p>
<p><a href="https://github.com/google/guava/wiki/GraphsExplained#building-graph-instances">Link to Guava wiki on how to build graph instances</a></p>
<p><a href="http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/graph/Network.html">Guava API Documentation: Network</a></p>
<p><a href="http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/graph/Graph.html">Guava API Documentation: Graph</a></p>
<p><a href="http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/graph/ValueGraph.html">Guava API Documentation: ValueGraph</a></p>
<p><a name="tsp1-guava-mutable-immutable"></a></p>
<h3>Guava Mutable vs Immutable</h3>
<p>Guava makes a distinction between mutable graphs, which can be modified, and immutable graphs, which cannot.
Immutability provides some safety and assurances to programmers, and can make things faster.</p>
<p>When we construct the network, we need a mutable graph to modify (add nodes and edges). 
But once the network is constructed, it is finished: we don't need to modify the network while we're solving the problem.</p>
<p>Therefore, we construct a mutable network, assemble the graph for the given problem, and copy it into an immutable graph.
We then use the immutable graph to access the graph while solving.</p>
<p><a name="tsp1-importing-guava"></a></p>
<h3>Importing Guava</h3>
<p>Starting with import statements, we'll use a couple of objects from the Java API, and from Google's Guava library:</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.Set</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.TreeMap</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.google.common.graph.Network</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.google.common.graph.NetworkBuilder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.google.common.graph.ImmutableNetwork</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.google.common.graph.MutableNetwork</span><span class="o">;</span>
</pre></div>


<p>For more info on why we don't just do the lazier</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.google.common.graph.*</span><span class="o">;</span>
</pre></div>


<p>see <a href="https://google.github.io/styleguide/javaguide.html">Google's Java style guide</a>.</p>
<p><a name="tsp1-tsp-class"></a></p>
<h3>TSP Class</h3>
<p>Let's lay out the TSP class definition. This class is simple, and wraps a few pieces of data:
the current route, the current distance, and the minimum distance.
Note that we could also save the solution in a container, instead of printing it,
by defining a static class to hold solutions, but we'll keep it simple.</p>
<div class="highlight"><pre><span></span><span class="cm">/** This class solves the traveling salesman problem on a graph. */</span>
<span class="kd">class</span> <span class="nc">TSP</span> <span class="o">{</span>
    <span class="c1">// The actual graph of cities</span>
    <span class="n">ImmutableNetwork</span><span class="o">&lt;</span><span class="n">Node</span><span class="o">,</span><span class="n">Edge</span><span class="o">&gt;</span> <span class="n">graph</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">graphSize</span><span class="o">;</span>

    <span class="c1">// Storage variables used when searching for a solution </span>
    <span class="n">String</span><span class="o">[]</span> <span class="n">route</span><span class="o">;</span>         <span class="c1">// store the route</span>
    <span class="kt">double</span> <span class="n">this_distance</span><span class="o">;</span>   <span class="c1">// store the total distance</span>
    <span class="kt">double</span> <span class="n">min_distance</span><span class="o">;</span>    <span class="c1">// store the shortest path found so far</span>

    <span class="cm">/** Defaut constructor generates the graph and initializes storage variables */</span>
    <span class="kd">public</span> <span class="nf">TSP</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// TODO</span>
    <span class="o">}</span>

    <span class="cm">/** This method actually constructs the graph. */</span>
    <span class="kd">public</span> <span class="n">ImmutableNetwork</span><span class="o">&lt;</span><span class="n">Node</span><span class="o">,</span><span class="n">Edge</span><span class="o">&gt;</span> <span class="nf">buildGraph</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// TODO</span>
    <span class="o">}</span>

    <span class="cm">/** Public solve method will call the recursive backtracking method to search for solutions on the graph */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">solve</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// TODO</span>
    <span class="o">}</span>

    <span class="cm">/** Recursive backtracking method: explore possible solutions starting at this node, having made nchoices */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">explore</span><span class="o">(</span><span class="n">Node</span> <span class="n">node</span><span class="o">,</span> <span class="kt">int</span> <span class="n">nchoices</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// TODO</span>
    <span class="o">}</span>

    <span class="cm">/** Print out solution */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">printSolution</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// TODO</span>
    <span class="o">}</span>

    <span class="cm">/** Print out failed path */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">printFailure</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// TODO</span>
    <span class="o">}</span>
</pre></div>


<p><a name="tsp1-node-class"></a></p>
<h3>Node Class (Cities)</h3>
<p>Now we can define the Node class to represent cities on the graph.</p>
<div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">Node</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="n">label</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="n">visited</span><span class="o">;</span> <span class="c1">// Helps us to keep track of where we&#39;ve been on the graph</span>
    <span class="kd">public</span> <span class="nf">Node</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">){</span>
        <span class="k">this</span><span class="o">.</span><span class="na">label</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">visited</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">visit</span><span class="o">(){</span>
        <span class="k">this</span><span class="o">.</span><span class="na">visited</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">unvisit</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">visited</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>Like a lined list node, we want to keep graph nodes simple. 
Note that Nodes don't need to store information about their neighbors.
That's what we'll use Google Guava for!</p>
<p><a name="tsp1-edge-class"></a></p>
<h3>Edge Class (Roads)</h3>
<p>Edge classes are even simpler, wrapping a single integer:</p>
<div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">Edge</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="n">value</span><span class="o">;</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="n">left</span><span class="o">,</span> <span class="n">right</span><span class="o">;</span> <span class="c1">// For convenience in construction process. Not necessary.</span>
    <span class="kd">public</span> <span class="nf">Edge</span><span class="o">(</span><span class="n">String</span> <span class="n">left</span><span class="o">,</span> <span class="n">String</span> <span class="n">right</span><span class="o">,</span> <span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">left</span> <span class="o">=</span> <span class="n">left</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">right</span> <span class="o">=</span> <span class="n">right</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>Note that left and right are used for convenience only during the graph construction process.
Like the nodes, the edges don't need to know who their neighbors are, 
since that's what the Google Guava graph object will take care of.</p>
<p><a name="tsp1-building-graph"></a></p>
<h2>TSP Constructor and Building the Graph</h2>
<p><a name="tsp1-constructor"></a></p>
<h3>Constructor</h3>
<p>The TSP class constructor should do a few things:</p>
<ul>
<li>Construct a graph, with a given set of cities and distances.</li>
<li>Initialize arrays and cumulative variables that will be used by the backtracking method.</li>
</ul>
<p>The actual graph construction process is put into another function called <code>buildGraph()</code>,
so really the constructor just calls a function and then does #2.</p>
<div class="highlight"><pre><span></span>    <span class="cm">/** Defaut constructor generates the graph and initializes storage variables */</span>
    <span class="kd">public</span> <span class="nf">TSP</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Build the graph</span>
        <span class="k">this</span><span class="o">.</span><span class="na">graph</span> <span class="o">=</span> <span class="n">buildGraph</span><span class="o">();</span>
        <span class="k">this</span><span class="o">.</span><span class="na">graphSize</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">graph</span><span class="o">.</span><span class="na">nodes</span><span class="o">().</span><span class="na">size</span><span class="o">();</span>

        <span class="c1">// Initialize route variable, shared across recursive method instances</span>
        <span class="k">this</span><span class="o">.</span><span class="na">route</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[</span><span class="k">this</span><span class="o">.</span><span class="na">graphSize</span><span class="o">];</span>

        <span class="c1">// Initialize distance variable, shared across recursive method instances</span>
        <span class="k">this</span><span class="o">.</span><span class="na">this_distance</span> <span class="o">=</span> <span class="mf">0.0</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">min_distance</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span><span class="o">;</span> <span class="c1">// negative min means uninitialized</span>
    <span class="o">}</span>
</pre></div>


<p><a name="tsp1-build-graph-method"></a></p>
<h3>Build Graph Method</h3>
<p>Now we actually use Guava's Immutable Network object,
which takes two templated types, T1 and T2, 
which correspond to the node types and the edge types.</p>
<p>We use a NetworkBuilder object to build the Network 
(an example of the factory template).
This returns a MutableNetwork of Node and Edge objects,
which we can then connect up using some built-in methods.</p>
<p>Here are some built-in methods available for a MutableNetwork:</p>
<div class="highlight"><pre><span></span>    <span class="n">addEdge</span><span class="p">(</span><span class="n">node1</span><span class="p">,</span> <span class="n">node2</span><span class="p">,</span> <span class="n">edge</span><span class="p">)</span>
    <span class="n">addNode</span><span class="p">(</span><span class="n">node1</span><span class="p">)</span>
    <span class="n">removeEdge</span><span class="p">(</span><span class="n">edge</span><span class="p">)</span>
    <span class="n">removeNode</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</pre></div>


<p>Now here is the construction of the graph, using the Google Guava library.
There are two loops here: one for cities, and one for edges.
In the loop over each city,we create a new node and add it to the graph.
To be able to easily retrieve the Nodes we have created, 
we also store references to the nodes in a map called <code>all_nodes</code>.</p>
<p>When we construct edges, we use the map of all nodes <code>all_nodes</code> to get references to the Node objects
that correspond to a label. That way, if an edge connects "A" with "B" at a distance of 24, 
we can turn "A" and "B" into references to the Node objects A and B.</p>
<div class="highlight"><pre><span></span>    <span class="cm">/** This method actually constructs the graph. */</span>
    <span class="kd">public</span> <span class="n">ImmutableNetwork</span><span class="o">&lt;</span><span class="n">Node</span><span class="o">,</span><span class="n">Edge</span><span class="o">&gt;</span> <span class="nf">buildGraph</span><span class="o">()</span> <span class="o">{</span>

        <span class="c1">// MutableNetwork is an interface requiring a type for nodes and a type for edges</span>
        <span class="n">MutableNetwork</span><span class="o">&lt;</span><span class="n">Node</span><span class="o">,</span><span class="n">Edge</span><span class="o">&gt;</span> <span class="n">roads</span> <span class="o">=</span> <span class="n">NetworkBuilder</span><span class="o">.</span><span class="na">undirected</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>

        <span class="c1">// Construct Nodes for cities,</span>
        <span class="c1">// and add them to a map</span>
        <span class="n">String</span><span class="o">[]</span> <span class="n">cities</span> <span class="o">=</span> <span class="o">{</span><span class="s">&quot;A&quot;</span><span class="o">,</span><span class="s">&quot;B&quot;</span><span class="o">,</span><span class="s">&quot;C&quot;</span><span class="o">,</span><span class="s">&quot;D&quot;</span><span class="o">,</span><span class="s">&quot;E&quot;</span><span class="o">};</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">Node</span><span class="o">&gt;</span> <span class="n">all_nodes</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">Node</span><span class="o">&gt;();</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">cities</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="c1">// Add nodes to map</span>
            <span class="n">Node</span> <span class="n">node</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Node</span><span class="o">(</span><span class="n">cities</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
            <span class="n">all_nodes</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">cities</span><span class="o">[</span><span class="n">i</span><span class="o">],</span> <span class="n">node</span><span class="o">);</span>

            <span class="c1">// Add nodes to network</span>
            <span class="n">roads</span><span class="o">.</span><span class="na">addNode</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="c1">// Construct Edges for roads,</span>
        <span class="c1">// and add them to a map</span>
        <span class="n">String</span><span class="o">[]</span> <span class="n">distances</span> <span class="o">=</span> <span class="o">{</span><span class="s">&quot;A:B:24&quot;</span><span class="o">,</span><span class="s">&quot;A:C:5&quot;</span><span class="o">,</span><span class="s">&quot;A:D:20&quot;</span><span class="o">,</span><span class="s">&quot;A:E:18&quot;</span><span class="o">,</span><span class="s">&quot;B:C:10&quot;</span><span class="o">,</span><span class="s">&quot;B:D:20&quot;</span><span class="o">,</span><span class="s">&quot;C:D:4&quot;</span><span class="o">,</span><span class="s">&quot;C:E:28&quot;</span><span class="o">,</span><span class="s">&quot;D:E:3&quot;</span><span class="o">};</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">Edge</span><span class="o">&gt;</span> <span class="n">all_edges</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">Edge</span><span class="o">&gt;();</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">distances</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
            <span class="c1">// Parse out (city1):(city2):(distance)</span>
            <span class="n">String</span><span class="o">[]</span> <span class="n">splitresult</span> <span class="o">=</span> <span class="n">distances</span><span class="o">[</span><span class="n">j</span><span class="o">].</span><span class="na">split</span><span class="o">(</span><span class="s">&quot;:&quot;</span><span class="o">);</span>
            <span class="n">String</span> <span class="n">left</span> <span class="o">=</span> <span class="n">splitresult</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
            <span class="n">String</span> <span class="n">right</span> <span class="o">=</span> <span class="n">splitresult</span><span class="o">[</span><span class="mi">1</span><span class="o">];</span>
            <span class="n">String</span> <span class="n">label</span> <span class="o">=</span> <span class="n">left</span> <span class="o">+</span> <span class="s">&quot;:&quot;</span> <span class="o">+</span> <span class="n">right</span><span class="o">;</span>
            <span class="kt">int</span> <span class="n">value</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">splitresult</span><span class="o">[</span><span class="mi">2</span><span class="o">]);</span>

            <span class="c1">// Add edges to map</span>
            <span class="n">Edge</span> <span class="n">edge</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Edge</span><span class="o">(</span><span class="n">left</span><span class="o">,</span> <span class="n">right</span><span class="o">,</span> <span class="n">value</span><span class="o">);</span>
            <span class="n">all_edges</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">label</span><span class="o">,</span> <span class="n">edge</span><span class="o">);</span>

            <span class="c1">// Add edges to network</span>
            <span class="n">roads</span><span class="o">.</span><span class="na">addEdge</span><span class="o">(</span><span class="n">all_nodes</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">edge</span><span class="o">.</span><span class="na">left</span><span class="o">),</span> <span class="n">all_nodes</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">edge</span><span class="o">.</span><span class="na">right</span><span class="o">),</span> <span class="n">edge</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="c1">// Freeze the network</span>
        <span class="n">ImmutableNetwork</span><span class="o">&lt;</span><span class="n">Node</span><span class="o">,</span><span class="n">Edge</span><span class="o">&gt;</span> <span class="n">frozen_roads</span> <span class="o">=</span> <span class="n">ImmutableNetwork</span><span class="o">.</span><span class="na">copyOf</span><span class="o">(</span><span class="n">roads</span><span class="o">);</span>

        <span class="k">return</span> <span class="n">frozen_roads</span><span class="o">;</span>
    <span class="o">}</span>
</pre></div>


<p><a name="tsp1-recursive-backtracking"></a></p>
<h2>Solving and Exploring with Recursive Backtracking</h2>
<h3>Solve Method</h3>
<p>The structure of some recursive backtracking problems is to create a public and a private interface,
with the public interface taking no parameters or a single parameter that the user will know, 
and the private method taking a parameter specific to the implementation. That's the pattern we use here.</p>
<p>The solve method sets up the problem by picking a starting node (in this case, an arbitrary starting node).
It then gets a reference to that node on the graph, and calls the recursive <code>explore()</code> method,
which begins the recursive backtracking method.</p>
<div class="highlight"><pre><span></span>    <span class="cm">/** Public solve method will call the recursive backtracking method to search for solutions on the graph */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">solve</span><span class="o">()</span> <span class="o">{</span>
        <span class="cm">/** To solve the traveling salesman problem:</span>
<span class="cm">         * Set up the graph, choose a starting node, then call the recursive backtracking method and pass it the starting node.</span>
<span class="cm">         */</span>

        <span class="c1">// We need to pass a starting node to recursive backtracking method</span>
        <span class="n">Node</span> <span class="n">startNode</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

        <span class="c1">// Grab a node, any node...</span>
        <span class="k">for</span><span class="o">(</span> <span class="n">Node</span> <span class="n">n</span> <span class="o">:</span> <span class="n">graph</span><span class="o">.</span><span class="na">nodes</span><span class="o">()</span> <span class="o">)</span> <span class="o">{</span>
            <span class="n">startNode</span> <span class="o">=</span> <span class="n">n</span><span class="o">;</span>
            <span class="k">break</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="c1">// Visit the first node</span>
        <span class="n">startNode</span><span class="o">.</span><span class="na">visit</span><span class="o">();</span>

        <span class="c1">// Add first node to the route</span>
        <span class="k">this</span><span class="o">.</span><span class="na">route</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="n">startNode</span><span class="o">.</span><span class="na">label</span><span class="o">;</span>

        <span class="c1">// Pass the number of choices made</span>
        <span class="kt">int</span> <span class="n">nchoices</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>

        <span class="c1">// Recursive backtracking</span>
        <span class="n">explore</span><span class="o">(</span><span class="n">startNode</span><span class="o">,</span> <span class="n">nchoices</span><span class="o">);</span>
    <span class="o">}</span>
</pre></div>


<h3>Explore (Backtrack) Method</h3>
<p>And now, on to the recursive backtracking method.</p>
<p>The method takes as a parameter which node we are currently on and the number of cities we have visited.
As multiple explore methods choose different paths, they pass references to different node objects in the graph,
and they pass different values of <code>nchoices</code>. </p>
<p>The methods, when they do not encounter a solution, will choose a next node and call the explore method on it.
Each instance of the explore method marks nodes as visited or unvisited on the same shared graph object.
This allows instances of the function to share information about their choices with other instances of the function.</p>
<p>All recursive methods must consist of a base case and a recursive case:</p>
<p>Base case:
- We've visited as many cities as are on the graph.
- Check if this is a new solution (distance less than the current minimum).</p>
<p>Recursive case:
- Make a choice (mark node as visited, add city to route).
- Explore the consequences (recursive call).
- Unmake the choice (mark node as unvisited, remove city from route).
- Move on to next choice.</p>
<div class="highlight"><pre><span></span>    <span class="cm">/** Recursive backtracking method: explore possible solutions starting at this node, having made nchoices */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">explore</span><span class="o">(</span><span class="n">Node</span> <span class="n">node</span><span class="o">,</span> <span class="kt">int</span> <span class="n">nchoices</span><span class="o">)</span> <span class="o">{</span>
        <span class="cm">/**</span>
<span class="cm">         * Solution strategy: recursive backtracking.</span>
<span class="cm">         */</span>

        <span class="k">if</span><span class="o">(</span><span class="n">nchoices</span> <span class="o">==</span> <span class="n">graphSize</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// </span>
            <span class="c1">// BASE CASE</span>
            <span class="c1">//</span>
            <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">this_distance</span> <span class="o">&lt;</span> <span class="k">this</span><span class="o">.</span><span class="na">min_distance</span> <span class="o">||</span> <span class="k">this</span><span class="o">.</span><span class="na">min_distance</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">// if this_distance &lt; min_distance, this is our new minimum distance</span>
                <span class="c1">// if min_distance &lt; 0, this is our first minimium distance</span>
                <span class="k">this</span><span class="o">.</span><span class="na">min_distance</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">this_distance</span><span class="o">;</span>
                <span class="n">printSolution</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="n">printFailure</span><span class="o">();</span>
            <span class="o">}</span>

        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="c1">//</span>
            <span class="c1">// RECURSIVE CASE</span>
            <span class="c1">//  </span>
            <span class="n">Set</span><span class="o">&lt;</span><span class="n">Node</span><span class="o">&gt;</span> <span class="n">neighbors</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="na">adjacentNodes</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
            <span class="k">for</span><span class="o">(</span><span class="n">Node</span> <span class="n">neighbor</span> <span class="o">:</span> <span class="n">neighbors</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span><span class="o">(</span><span class="n">neighbor</span><span class="o">.</span><span class="na">visited</span> <span class="o">==</span> <span class="kc">false</span><span class="o">)</span> <span class="o">{</span>

                    <span class="kt">int</span> <span class="n">distance_btwn</span><span class="o">;</span>

                    <span class="k">for</span><span class="o">(</span> <span class="n">Edge</span> <span class="n">edge</span> <span class="o">:</span> <span class="n">graph</span><span class="o">.</span><span class="na">edgesConnecting</span><span class="o">(</span><span class="n">node</span><span class="o">,</span> <span class="n">neighbor</span><span class="o">)</span> <span class="o">)</span> <span class="o">{</span>
                        <span class="n">distance_btwn</span> <span class="o">=</span> <span class="n">edge</span><span class="o">.</span><span class="na">value</span><span class="o">;</span>
                    <span class="o">}</span>

                    <span class="c1">// Make a choice</span>
                    <span class="k">this</span><span class="o">.</span><span class="na">route</span><span class="o">[</span><span class="n">nchoices</span><span class="o">]</span> <span class="o">=</span> <span class="n">neighbor</span><span class="o">.</span><span class="na">label</span><span class="o">;</span>
                    <span class="n">neighbor</span><span class="o">.</span><span class="na">visit</span><span class="o">();</span>
                    <span class="k">this</span><span class="o">.</span><span class="na">this_distance</span> <span class="o">+=</span> <span class="n">distance_btwn</span><span class="o">;</span>

                    <span class="c1">// Explore the consequences</span>
                    <span class="n">explore</span><span class="o">(</span><span class="n">neighbor</span><span class="o">,</span><span class="n">nchoices</span><span class="o">+</span><span class="mi">1</span><span class="o">);</span>

                    <span class="c1">// Unmake the choice</span>
                    <span class="k">this</span><span class="o">.</span><span class="na">route</span><span class="o">[</span><span class="n">nchoices</span><span class="o">]</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
                    <span class="n">neighbor</span><span class="o">.</span><span class="na">unvisit</span><span class="o">();</span>
                    <span class="k">this</span><span class="o">.</span><span class="na">this_distance</span> <span class="o">-=</span> <span class="n">distance_btwn</span><span class="o">;</span>
                <span class="o">}</span>
                <span class="c1">// Move on to the next choice (continue loop)</span>
            <span class="o">}</span>               
        <span class="o">}</span> <span class="c1">// End base/recursive case</span>
    <span class="o">}</span>
</pre></div>


<h2>Main and Utility Methods</h2>
<p>Last but not least, add the method that actually calls the TSP object's solve method,
and define what to do when we encounter a new solution.
This program just prints out new solutions as they are found, 
but you could also add them to a map (map routes to distances),
or quietly keep track of the shortest path and not print it until the end.</p>
<div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">TSP</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span> 
        <span class="n">TSP</span> <span class="n">t</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TSP</span><span class="o">();</span>
        <span class="n">t</span><span class="o">.</span><span class="na">solve</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="o">...</span>
</pre></div>


<p>Additionally, we may want to perform a certain action when we find a new minimum distance.
Note that this method may be called multiple times during the solution procedure.</p>
<div class="highlight"><pre><span></span>    <span class="cm">/** Print out solution */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">printSolution</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">&quot;@@@@@@@@@@\tNEW SOLUTION\t&quot;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Route: &quot;</span><span class="o">+</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">route</span><span class="o">)</span>
                          <span class="o">+</span><span class="s">&quot;\tDistance: &quot;</span><span class="o">+</span><span class="k">this</span><span class="o">.</span><span class="na">min_distance</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="cm">/** Do nothing with failed path */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">printFailure</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Nope</span>
    <span class="o">}</span>
</pre></div>


<h2>Program Output</h2>
<h3>Initial Graph Structure and Solution</h3>
<p>In the construction of the graph, we defined our graph as:</p>
<div class="highlight"><pre><span></span><span class="n">String</span><span class="o">[]</span> <span class="n">distances</span> <span class="o">=</span> <span class="o">{</span><span class="s">&quot;A:B:24&quot;</span><span class="o">,</span><span class="s">&quot;A:C:5&quot;</span><span class="o">,</span><span class="s">&quot;A:D:20&quot;</span><span class="o">,</span><span class="s">&quot;A:E:18&quot;</span><span class="o">,</span><span class="s">&quot;B:C:10&quot;</span><span class="o">,</span><span class="s">&quot;B:D:20&quot;</span><span class="o">,</span><span class="s">&quot;C:D:4&quot;</span><span class="o">,</span><span class="s">&quot;C:E:28&quot;</span><span class="o">,</span><span class="s">&quot;D:E:3&quot;</span><span class="o">};</span>
</pre></div>


<p>This is the graph that we're solving the TSP problem on.
Here are the results when the program is compiled and run:</p>
<div class="highlight"><pre><span></span>$ javac -cp <span class="s1">&#39;.:/Users/charles/codes/guava/jars/guava-21.0.jar&#39;</span> TSP.java

$ java -cp <span class="s1">&#39;.:/Users/charles/codes/guava/jars/guava-21.0.jar&#39;</span> TSP

@@@@@@@@@@  NEW SOLUTION    Route: <span class="o">[</span>A, B, C, D, E<span class="o">]</span>  Distance: <span class="m">41</span>.0
@@@@@@@@@@  NEW SOLUTION    Route: <span class="o">[</span>A, C, B, D, E<span class="o">]</span>  Distance: <span class="m">38</span>.0
@@@@@@@@@@  NEW SOLUTION    Route: <span class="o">[</span>A, E, D, C, B<span class="o">]</span>  Distance: <span class="m">35</span>.0
</pre></div>


<p>The answers given were satisfactory and correct, so we moved on to 
a more advanced graph construction process that utilized a static class
to generate random, fully-connected graphs. This also implemented 
additional functionality to export to Dot format. This static RandomGraph
class will be covered in later post.</p>
<p>Here is the resulting output of the random graph generator for a 6-node TSP problem,
with the sequence of shortest routes found by the algorithm:</p>
<p><img alt="Six-node traveling salesperson problem" src="graphviz_tsp_6.png"></p>
<div class="highlight"><pre><span></span><span class="n">java</span> <span class="o">-</span><span class="n">cp</span> <span class="s1">&#39;.:/Users/charles/codes/guava/jars/guava-21.0.jar&#39;</span> <span class="n">TSP</span> <span class="mi">6</span> 
<span class="c1">------------------- TSP ----------------------</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">291</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">249</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">246</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">203</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">178</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">163</span><span class="p">.</span><span class="mi">0</span>
 <span class="n">Done</span><span class="p">.</span>
</pre></div>


<p>And for 12 nodes, a problem twice that size, here is the graph and corresponding output:</p>
<p><img alt="Twelve-node traveling salesperson problem" src="graphviz_tsp_12.png"></p>
<p>and the output:</p>
<div class="highlight"><pre><span></span><span class="n">java</span> <span class="o">-</span><span class="n">cp</span> <span class="s1">&#39;.:/Users/charles/codes/guava/jars/guava-21.0.jar&#39;</span> <span class="n">TSP</span> <span class="mi">12</span> 
<span class="c1">------------------- TSP Version 2: The Pessimistic Algorithm ----------------------</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">11</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">585</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">558</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">11</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">522</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">11</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">499</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">460</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">459</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">449</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">419</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">408</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">402</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">385</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">377</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">374</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">371</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">363</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">352</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">350</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">347</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">345</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">323</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">322</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">316</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">313</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">306</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">302</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">289</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">11</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">286</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">283</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">274</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">260</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">259</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">256</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">248</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">245</span><span class="p">.</span><span class="mi">0</span>
<span class="o">!!!!!</span><span class="n">YAY</span><span class="o">!!!!!!</span>  <span class="k">NEW</span> <span class="n">SOLUTION</span>    <span class="n">Route</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>   <span class="n">Distance</span><span class="p">:</span> <span class="mi">236</span><span class="p">.</span><span class="mi">0</span>
 <span class="n">Done</span><span class="p">.</span>
</pre></div>


<p>Note that these random graphs are fully connected - every node connects to every other node.
Among the many interesting aspects of the problem, one of them is the impact of connectivity
on the solution time. </p>
<p>Another aspect of the problem is the topology of the network, and exploring how 
a larger number of unconnected nodes, or groups of nodes clustered together but isolated from one another,
affect the final solution time and the final route.</p>
<p>But before get to that, we have some other things to work out.</p>
<h2>Next Steps: Timing and Profiling</h2>
<p>This post described a working implementation of a recursive backtracking solution 
to the traveling salesperson problem on a graph. This is a naive solution, however,
and in the next few posts about the traveling salesperson problem we'll focus on using
timing and profiling tools for Java to profile this Guava program, identify bottlenecks, 
and speed it up. In fact, there is one small tweak we can make to the algorithm covered above
that will improve the performance by orders of magnitude. But more on that in a future post.</p>
<p><a name="tsp1-sources"></a></p>
<h2>Sources</h2>
<ol>
<li>
<p>"Traveling Salesman Problem". Wikipedia, the Free Encyclopedia. The Wikimedia Foundation. Edited 12 March 2017. Accessed 23 March 2017. 
&lt;<a href="https://en.wikipedia.org/wiki/Travelling_salesman_problem">https://en.wikipedia.org/wiki/Travelling_salesman_problem</a>&gt;</p>
</li>
<li>
<p>"Seven Bridges of Königsberg". Wikipedia, the Free Encyclopedia. The Wikimedia Foundation. Edited 11 March 2017. Accessed 23 March 2017.
&lt;<a href="https://en.wikipedia.org/wiki/Seven_Bridges_of_K%C3%B6nigsberg">https://en.wikipedia.org/wiki/Seven_Bridges_of_K%C3%B6nigsberg</a>&gt;</p>
</li>
<li>
<p>"The structure and function of complex networks". M. E. J. Newman. 
&lt;<a href="http://www-personal.umich.edu/~mejn/courses/2004/cscs535/review.pdf">http://www-personal.umich.edu/~mejn/courses/2004/cscs535/review.pdf</a>&gt;</p>
</li>
<li>
<p>"Google Guava - Github". Alphabet, Inc. Released under the Apache 2.0 License. Accessed 20 March 2017.
&lt;<a href="https://github.com/google/guava">https://github.com/google/guava</a>&gt;</p>
</li>
<li>
<p>"Guava". Charles Reid. Edited 23 March 2017. Accessed 23 March 2017.
&lt;<a href="https://www.charlesreid1.com/wiki/Guava">https://www.charlesreid1.com/wiki/Guava</a>&gt;</p>
</li>
<li>
<p>"Graphs Explained". Google Guava Wiki. Accessed 23 March 2017.
&lt;<a href="https://github.com/google/guava/wiki/GraphsExplained">https://github.com/google/guava/wiki/GraphsExplained</a>&gt;</p>
</li>
<li>
<p>"Network". Google Guava API Documentation. Accessed 23 March 2017.
&lt;<a href="http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/graph/Network.html">http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/graph/Network.html</a>&gt;</p>
</li>
<li>
<p>"Graph". Google Guava API Documentation. Accessed 23 March 2017.
&lt;<a href="http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/graph/Graph.html">http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/graph/Graph.html</a>&gt;</p>
</li>
<li>
<p>"Value Graph". Google Guava API Documentation. Accessed 23 March 2017.
&lt;<a href="http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/graph/ValueGraph.html">http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/graph/ValueGraph.html</a>&gt;</p>
</li>
<li>
<p>"Google Java Style Guide". Alphabet Inc. Accessed 21 March 2017.
&lt;<a href="https://google.github.io/styleguide/javaguide.html">https://google.github.io/styleguide/javaguide.html</a>&gt;</p>
</li>
</ol>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script></div>

    </div>
</div>

<div class="v20"></div>

<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="tags">
            <p>Tags:&nbsp;&nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/computer-science.html">computer science</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/guava.html">guava</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/graph.html">graph</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/tsp.html">TSP</a>
                    &nbsp;&nbsp;
        </div>

    </div>
</div>


<div class="v200"></div>
  	            	</article>
  	            	<article>
<header>
<div class="row">


    <div class="col-md-12">
        <div class="headtext" style="text-align: center;">
            <h1><b>
                Perl vs. Java: N Queens Problem
            </b></h1>
        
            <p class="lead">
                Posted 
                <time datetime="2017-03-22T22:00:00-07:00" pubdate>Wednesday 03/22/2017</time>
                in 
                <a href="https://charlesreid1.github.io/category/computer-science.html">Computer Science</a>
                </p>
            <p>
            <span style="font-size: 14px">
                <a href="https://charlesreid1.github.io/perl-vs-java-n-queens-problem.html">permalink</a>
            </span>
            </p>
        </div>

    </div>

</div>
</header>


<div class="v50"></div>


<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="entry-content"><h2>Table of Contents</h2>
<ul>
<li><a href="#pvj-background">Background: Huh?</a></li>
<li><a href="#pvj-nqueensproblem">N Queens Problem</a></li>
<li><a href="#pvj-nqueenssoln">N Queens Solution</a><ul>
<li><a href="#pvj-perlsoln">Perl Solution</a></li>
<li><a href="#pvj-javasoln">Java Solution</a></li>
</ul>
</li>
<li><a href="#pvj-h2hnqueens">Head to Head: Walltime vs. Number of Queens</a></li>
<li><a href="#pvj-perlprof">Perl Profiling</a></li>
<li><a href="#pvj-perlprofresults">Perl Profiling Results</a></li>
<li><a href="#pvj-javaprof">Java Profiling</a></li>
<li><a href="#pvj-javaprofresults">Java Profiling Results</a></li>
<li><a href="#pvj-h2hntested">Head to Head: Walltime vs. Number of Solutions Tested</a></li>
<li><a href="#pvj-applesoranges">Apples and Oranges</a></li>
<li><a href="#pvj-sources">Sources</a></li>
</ul>
<h2>Summary</h2>
<p>In this post, we describe an implementation of the <a href="https://en.wikipedia.org/wiki/Eight_queens_puzzle">N Queens Problem</a>,
which is a puzzle related to optimization, combinatorics, and recursive backtracking.
The puzzle asks: how many configurations are there for placing 8 queens on a chessboard
such that no queen can attack any othr queen?</p>
<p>This problem was implemented in Perl and in Java, the solution results were timed,
and the codes were profiled. While Perl is an interpreted language, and is therefore
fully expeted to be much slower than Java (which indeed it is), it is still useful
to compare the performance between these two codes to gain an appreciation for 
the advantages and disadvantages to both approaches.</p>
<p><a name="pvj-background"></a></p>
<h2>Background: Huh?</h2>
<p>Recently I read an <a href="http://steve-yegge.blogspot.com/2006/03/execution-in-kingdom-of-nouns.html">(11 year old) article</a> 
by Steve Yegge entitled "Execution in the Kingdom of Nouns." In it, Steve describes the way that in Java, 
"Classes are really the only modeling tool Java provides you. 
So whenever a new idea occurs to you, you have to sculpt it or wrap it or smash at it until it becomes a thing, 
even if it began life as an action, a process, or any other non-'thing' concept."</p>
<p>The article inspired me to try on this verb-oriented mode of thinking in a more... active way. 
Prior experiences with OCaml were confusing, and Haskell continues to evade me,
so it was easier to dust off old Perl skills than learn enough Haskell or Ocaml to solve N queens problem.
Perl was the next-closest verb-oriented "scripting" language.</p>
<p>I was also familiar with the N queens problem, since I'm a programming instructor (I'll let you guess which language),
and it seemed like a nice problem for both noun-based and verb-based approaches. 
But it also meant I had to learn enough Perl to solve the N queens problem.</p>
<p>...or, use the <a href="http://rosettacode.org/wiki/N-queens_problem#Perl">Perl solution to the N queens problem from Rosetta Code</a>.</p>
<p>Right...</p>
<p>So here's the plan: study a verb-oriented implementation of this canonical, deceptively subtle programming problem in Perl; 
translate it into a verb-oriented Java program; and run the two head-to-head, using a profiler to understand the results.</p>
<p><a name="pvj-nqueensproblem"></a></p>
<h2>N Queens Problem</h2>
<p>The N queens problem predates computers - it's a chess puzzle that asks: how many ways can you place 8 queens on a chessboard
such that no queen can attack any other queen? </p>
<p>The number of possible configurations of queens on a chessboard is 64 pick 8, or</p>
<p><span class="math">\($
\dfrac{64!}{(64-8)!} = 64 \times 63 \times \dots \times 57 \times 56 = 178,462,987,637,760 
$\)</span></p>
<p>Here's that calculation in Python:</p>
<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="kp">prod</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">64</span><span class="o">-</span><span class="mi">8</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="mi">64</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
<span class="mi">178462987637760</span>
</pre></div>


<p>That's bigger than the net worth of most U.S. Presidents!</p>
<p>If we implemented a dumb brute-force solution that tested each of these configurations, we'd be waiting until the heat death of the universe.</p>
<p>Fortunately, as we place queens on the board we can check if it is an invalid placement, and rule out any configurations that would follow from that choice.
As long as we are making our choices in an orderly fashion, this enables us to rule out most of the nearly 10 quadrillion possibilities. 
If we place queens column-by-column and rule out rows where there are already queens, by keeping track of where queens have already been placed, 
we can reduce the number of possible rows by 1 with each queen placed. The first queen has 8 possible rows where it can be placed,
the second queen has 7 possible rows (excluding the row that the first queen was placed on), and so on. The number of possiblities is:</p>
<p><span class="math">\($
8! = 8 \times 7 \times \dots \times 2 \times 1 = 40,320
$\)</span></p>
<p>A big improvement! Here's that calculation in Python:</p>
<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">fact</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
<span class="o">...</span>     <span class="k">if</span><span class="p">(</span><span class="n">n</span><span class="o">==</span><span class="mi">1</span><span class="p">):</span>
<span class="o">...</span>         <span class="k">return</span> <span class="mi">1</span>
<span class="o">...</span>     <span class="k">else</span><span class="p">:</span>
<span class="o">...</span>         <span class="k">return</span> <span class="n">n</span><span class="o">*</span><span class="n">fact</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">fact</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="mi">40320</span>
</pre></div>


<p>This still-large number of possibilities can be further reduced by using the same procedure, but checking for invalid rows based on the diagonal squares that each already-placed queen attacks.
This covers each precondition for a solved board, and allows the base case of the recursive backtracking method to be as simple as,
"If you've reached this point, you have a valid solution. Add it to the solutions bucket."</p>
<p>Now, let's get to the solution algorithm.</p>
<p><a name="pvj-nqueenssoln"></a></p>
<h2>N Queens Solution</h2>
<p>As a recap, we dusted off our Perl skills to utilize an N queens solution in Perl from <a href="http://rosettacode.org/wiki/N-queens_problem#Perl">Rosetta Code</a>.</p>
<p>Here's the pseudocode:</p>
<div class="highlight"><pre><span></span><span class="nv">explore</span><span class="ss">(</span><span class="nv">column</span><span class="ss">)</span>:
    <span class="k">if</span> <span class="nv">last</span> <span class="nv">column</span>:
        # <span class="nv">base</span> <span class="nv">case</span>
        <span class="nv">add</span> <span class="nv">to</span> <span class="nv">solutions</span>
    <span class="k">else</span>:
        # <span class="nv">recursive</span> <span class="nv">case</span>
        <span class="k">for</span> <span class="nv">each</span> <span class="nv">row</span>:
            <span class="k">if</span> <span class="nv">this</span> <span class="nv">is</span> <span class="nv">a</span> <span class="nv">safe</span> <span class="nv">row</span>:
                <span class="nv">place</span> <span class="nv">queen</span> <span class="nv">on</span> <span class="nv">this</span> <span class="nv">row</span>
                <span class="nv">explore</span><span class="ss">(</span><span class="nv">column</span><span class="o">+</span><span class="mi">1</span><span class="ss">)</span>
                <span class="nv">remove</span> <span class="nv">queen</span> <span class="nv">from</span> <span class="nv">this</span> <span class="nv">row</span>
</pre></div>


<p>Both codes use integer arrays to keep track of where queens are placed. 
Solutions are stringified version of these arrays, consisting of 8 digits.</p>
<p><a name="pvj-perlsoln"></a></p>
<h3>Perl Solution</h3>
<p>After looking at the Rosetta Code solution for a (long) while and marking it up with comments to understand what it was doing, 
I decided it was precisely the kind of verb-oriented solution I wanted to test out to compare Perl and Java.
It uses no objects, but instead relies on fast built-in data structures (arrays), 
for loop expansion (only <code>for my $i (1 .. $N)</code>, no <code>for($i=1; $i&lt;=$N; $i++)</code>),
and basic integer math. The cost of solving the problem comes down to basic indexing and array access.</p>
<p>This is the kind of solution I imagine a human calculator like Alan Turing or John Von Neuman looking at, nodding, and saying, "Makes sense! (And by the way the answer is 92.)"</p>
<p><a href="https://gist.github.com/charlesreid1/4ce97a5f896ff1c89855a5d038d51535">Github gist: nqueens.pl</a></p>
<div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/perl</span>

<span class="c1"># Solve the N queens problem</span>
<span class="c1"># using recursive backtracking.</span>
<span class="c1"># </span>
<span class="c1"># Author: Charles Reid</span>
<span class="c1"># Date: March 2017</span>

<span class="c1"># Create an array to store solutions</span>
<span class="k">my</span> <span class="nv">@solutions</span><span class="p">;</span>

<span class="c1"># Create an array to store where queens have been placed</span>
<span class="k">my</span> <span class="nv">@queens</span><span class="p">;</span>

<span class="c1"># Mark the rows already used (useful for lookup)</span>
<span class="k">my</span> <span class="nv">@occupied</span><span class="p">;</span>

<span class="c1"># explore() implements a recursive, depth-first backtracking method</span>
<span class="k">sub</span> <span class="nf">explore</span> <span class="p">{</span> 
    <span class="c1"># Parameters:</span>
    <span class="c1">#   depth : this is the argument passed by the user</span>

    <span class="c1"># First argument passed to the function is $depth </span>
    <span class="c1"># (how many queens we&#39;ve placed on the board),</span>
    <span class="c1"># so use shift to pop that out of the parameters </span>
    <span class="k">my</span> <span class="p">(</span><span class="nv">$depth</span><span class="p">,</span> <span class="nv">@diag</span><span class="p">)</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>

    <span class="c1"># Explore is a recursive method,</span>
    <span class="c1"># so we need a base case and a recursive case.</span>
    <span class="c1">#</span>
    <span class="c1"># The base case is, we&#39;ve reached a leaf node,</span>
    <span class="c1"># placed 8 queens, and had no problems, </span>
    <span class="c1"># so we found a solution.</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$depth</span><span class="o">==</span><span class="nv">$board_size</span><span class="p">)</span> <span class="p">{</span> 
        <span class="c1"># Here, we store the stringified version of @queens,</span>
        <span class="c1"># which are the row numbers of prior queens. </span>
        <span class="c1"># This is a global variable that is shared across</span>
        <span class="c1"># instances of this recursive function.</span>
        <span class="nb">push</span> <span class="nv">@solutions</span><span class="p">,</span> <span class="s">&quot;@queens\n&quot;</span><span class="p">;</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1"># Mark the squares that are attackable, </span>
    <span class="c1"># so that we can cut down on the search space.</span>
    <span class="nv">$#diag</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="nv">$board_size</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span> <span class="mi">0</span> <span class="o">..</span> <span class="nv">$#queens</span><span class="p">)</span> <span class="p">{</span> 
        <span class="nv">$ix1</span> <span class="o">=</span> <span class="nv">$queens</span><span class="p">[</span><span class="nv">$_</span><span class="p">]</span> <span class="o">+</span> <span class="nv">$depth</span> <span class="o">-</span> <span class="nv">$_</span> <span class="p">;</span>
        <span class="nv">$diag</span><span class="p">[</span> <span class="nv">$ix1</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

        <span class="nv">$ix2</span> <span class="o">=</span> <span class="nv">$queens</span><span class="p">[</span><span class="nv">$_</span><span class="p">]</span> <span class="o">-</span> <span class="nv">$depth</span> <span class="o">+</span> <span class="nv">$_</span> <span class="p">;</span>
        <span class="nv">$diag</span><span class="p">[</span> <span class="nv">$ix2</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="k">my</span> <span class="nv">$row</span> <span class="p">(</span><span class="mi">0</span> <span class="o">..</span> <span class="nv">$board_size</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1"># Cut down on the search space:</span>
        <span class="c1"># if this square is already occupied</span>
        <span class="c1"># or will lead to an invalid solution,</span>
        <span class="c1"># don&#39;t bother exploring it.</span>
        <span class="k">next</span> <span class="k">if</span> <span class="nv">$occupied</span><span class="p">[</span><span class="nv">$row</span><span class="p">]</span> <span class="o">||</span> <span class="nv">$diag</span><span class="p">[</span><span class="nv">$row</span><span class="p">];</span>

        <span class="c1"># Make a choice</span>
        <span class="nb">push</span> <span class="nv">@queens</span><span class="p">,</span> <span class="nv">$row</span><span class="p">;</span>
        <span class="c1"># Mark the square as occupied</span>
        <span class="nv">$occupied</span><span class="p">[</span><span class="nv">$row</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

        <span class="c1"># Explore the consequences</span>
        <span class="n">explore</span><span class="p">(</span><span class="nv">$depth</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>

        <span class="c1"># Unmake the choice</span>
        <span class="nb">pop</span> <span class="nv">@queens</span><span class="p">;</span>

        <span class="c1"># Mark the square as unoccupied</span>
        <span class="nv">$occupied</span><span class="p">[</span><span class="nv">$row</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="p">}</span>
<span class="p">}</span>

<span class="nv">$board_size</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span> 

<span class="n">explore</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

<span class="k">print</span> <span class="s">&quot;total &quot;</span><span class="p">,</span> <span class="nb">scalar</span><span class="p">(</span><span class="nv">@solutions</span><span class="p">),</span> <span class="s">&quot; solutions\n&quot;</span><span class="p">;</span>
</pre></div>


<p><a name="pvj-javasoln"></a></p>
<h3>Java Solution</h3>
<p>Starting with the Rosetta Code solution in Perl, I translated the algorithm into Java, sticking as closely as possible to the Way of the Verb.
I replicated the solution in Java with a minimal amount of object-oriented-ness. 
A Board class simply wraps the same set of arrays and array manipulations that the Perl solution implements directly.
These constitute the lookahead check for safe places to put the queen. </p>
<p>The Java solution implements a static class containing a Linked List to store solutions. 
This is the only use of non-array objects and has a trivial impact on the solution walltime.</p>
<p><a href="https://gist.github.com/charlesreid1/4ce97a5f896ff1c89855a5d038d51535">Github gist: NQueens.java</a></p>
<p>(Verbatim code not included for length.)</p>
<p><a name="pvj-h2hnqueens"></a></p>
<h2>Head to Head: Walltime vs. Number of Queens</h2>
<p><img alt="Graph of walltime versus number of queens" src="/images/perl-vs-java-nqueens.png"></p>
<div class="highlight"><pre><span></span><span class="c1">-----------------------------------------------</span>
<span class="o">|</span><span class="w"> </span><span class="n">NQueens</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Nsolutions</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Java</span><span class="w"> </span><span class="o">[</span><span class="n">s</span><span class="o">]</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">Perl</span><span class="w"> </span><span class="o">[</span><span class="n">s</span><span class="o">]</span><span class="w"> </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="c1">---------|------------|-----------|----------|</span>
<span class="o">|</span><span class="w"> </span><span class="mi">8</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="mi">92</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="mf">0.003</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">0.016</span><span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">9</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="mi">352</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="mf">0.006</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">0.067</span><span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">10</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">724</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="mf">0.017</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">0.259</span><span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">11</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">2680</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="mf">0.061</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">1.542</span><span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">12</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">14200</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mf">0.240</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">8.431</span><span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">13</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">73712</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mf">1.113</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">48.542</span><span class="w">   </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">14</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">365596</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">6.557</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">303.278</span><span class="w">  </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">15</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">2279184</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mf">42.619</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mf">2057.052</span><span class="w"> </span><span class="o">|</span><span class="w"></span>
<span class="c1">-----------------------------------------------</span>
</pre></div>


<p>Java smokes Perl.</p>
<p>Initially I was using the Unix <code>time</code> utility to time these two,
and it seemed to be close for smaller problem sizes (N=9 or smaller) - 
Perl would start up and run faster than Java, measured end-to-end.
But when you time the program by using timers built into the language, 
it removes some of the overhead from the timing comparisons,
and Java becomes the clear winner.</p>
<p>We can dig deeper and understand this comparison better by using some profiling tools.</p>
<p><a name="pvj-perlprof"></a></p>
<h2>Perl Profiling</h2>
<p>I profiled Perl with <code>Devel::NYTProf</code> , 
an excellent Perl module <a href="http://search.cpan.org/~timb/Devel-NYTProf-6.04/lib/Devel/NYTProf.pm">available here on Cpanm</a>.</p>
<p>More details about the profiling tools I used for Perl are on the charlesreid1 wiki at 
<a href="https://charlesreid1.com/wiki/Perl/Profiling">Perl/Profiling</a>. </p>
<p>To run with <code>Devel::NYTProf</code>, use `cpanm:</p>
<div class="highlight"><pre><span></span>$ cpanm Devel::NYTProf
</pre></div>


<p>Now you can run Perl with <code>Devel::NYTProf</code> by doing:</p>
<div class="highlight"><pre><span></span>$ perl -d:NYTProf nqueens.pl
</pre></div>


<p>This results in a binary output file called <code>nytprof.out</code> that can be processed with several 
NYTProf post-processing tools. Use the CSV file tool to begin with:</p>
<div class="highlight"><pre><span></span>$ nytprofcsv nytprof.out
</pre></div>


<p>This puts the CSV file in a folder called <code>nytprof/</code>.</p>
<p><a name="pvj-perlprofresults"></a></p>
<h2>Perl Profiling Results</h2>
<p>The CSV output of the NYTProf module gives a breakdown of 
the amount of time spent in each method call, how many times it was called, and how much time per call was spent.
From this we can see the busiest lines are the lines accessing the arrays, and looping over the rows.
This is confirmation that this algorithm is testing the performance of the arrays,
and confirms the N queens problem is profiling Perl's core performance with its built-in data structures.</p>
<p>The profiling results of the 11 queens problem are shown below.</p>
<div class="highlight"><pre><span></span><span class="c1"># Profile data generated by Devel::NYTProf::Reader</span>
<span class="c1"># Version: v6.04</span>
<span class="c1"># More information at http://metacpan.org/release/Devel-NYTProf/</span>
<span class="c1"># Format: time,calls,time/call,code</span>
<span class="mf">0.000238</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.000119</span><span class="p">,</span><span class="k">use</span> <span class="nn">Time::HiRes</span> <span class="sx">qw(time)</span><span class="p">;</span>
<span class="mf">0.000039</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.000019</span><span class="p">,</span><span class="k">use</span> <span class="nn">strict</span><span class="p">;</span>
<span class="mf">0.000491</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.000246</span><span class="p">,</span><span class="k">use</span> <span class="nn">warnings</span><span class="p">;</span>
<span class="mf">0.000021</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.000021</span><span class="p">,</span><span class="k">my</span> <span class="nv">$start</span> <span class="o">=</span> <span class="nb">time</span><span class="p">;</span>
<span class="mf">0.010338</span><span class="p">,</span><span class="mi">2680</span><span class="p">,</span><span class="mf">0.000004</span><span class="p">,</span><span class="nb">push</span> <span class="nv">@solutions</span><span class="p">,</span> <span class="s">&quot;@queens\n&quot;</span><span class="p">;</span>
<span class="mf">0.009993</span><span class="p">,</span><span class="mi">2680</span><span class="p">,</span><span class="mf">0.000004</span><span class="p">,</span><span class="k">return</span><span class="p">;</span>
<span class="mf">0.186298</span><span class="p">,</span><span class="mi">164246</span><span class="p">,</span><span class="mf">0.000001</span><span class="p">,</span><span class="nv">$#attacked</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="nv">$board_size</span><span class="p">;</span>
<span class="mf">0.150338</span><span class="p">,</span><span class="mi">164246</span><span class="p">,</span><span class="mf">0.000001</span><span class="p">,</span><span class="k">for</span><span class="p">(</span> <span class="mi">0</span> <span class="o">..</span> <span class="nv">$#queens</span><span class="p">)</span> <span class="p">{</span> 
<span class="mf">0.675523</span><span class="p">,</span><span class="mf">1.26035e+06</span><span class="p">,</span><span class="mf">0.000001</span><span class="p">,</span><span class="nv">$attacked</span><span class="p">[</span> <span class="nv">$ix2</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="mf">1.242624</span><span class="p">,</span><span class="mi">164246</span><span class="p">,</span><span class="mf">0.000008</span><span class="p">,</span><span class="k">for</span> <span class="k">my</span> <span class="nv">$row</span> <span class="p">(</span><span class="mi">0</span> <span class="o">..</span> <span class="nv">$board_size</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
<span class="mf">0.267469</span><span class="p">,</span><span class="mi">166925</span><span class="p">,</span><span class="mf">0.000002</span><span class="p">,</span><span class="n">explore</span><span class="p">(</span><span class="nv">$depth</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
<span class="mf">0.125272</span><span class="p">,</span><span class="mi">166925</span><span class="p">,</span><span class="mf">0.000001</span><span class="p">,</span><span class="nv">$occupied</span><span class="p">[</span><span class="nv">$row</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="mf">0.000002</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.000002</span><span class="p">,</span><span class="n">explore</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="mf">0.000011</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.000011</span><span class="p">,</span><span class="k">my</span> <span class="nv">$duration</span> <span class="o">=</span> <span class="nb">time</span> <span class="o">-</span> <span class="nv">$start</span><span class="p">;</span>
<span class="mf">0.000075</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.000075</span><span class="p">,</span><span class="k">print</span> <span class="s">&quot;Found &quot;</span><span class="p">,</span> <span class="nb">scalar</span><span class="p">(</span><span class="nv">@solutions</span><span class="p">),</span> <span class="s">&quot; solutions\n&quot;</span><span class="p">;</span>
<span class="mf">0.000050</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.000050</span><span class="p">,</span><span class="nb">printf</span> <span class="s">&quot;Execution time: %0.3f s \n&quot;</span><span class="p">,</span><span class="nv">$duration</span><span class="p">;</span>
</pre></div>


<p>One of the more interesting pieces of information comes from several lines 
populating the squares that are on the diagonals with other queens (<code>$attacked</code>):</p>
<div class="highlight"><pre><span></span><span class="o">#</span> <span class="n">Format</span><span class="p">:</span> <span class="n">time</span><span class="p">,</span><span class="n">calls</span><span class="p">,</span><span class="n">time</span><span class="o">/</span><span class="k">call</span><span class="p">,</span><span class="n">code</span>
<span class="mi">0</span><span class="p">.</span><span class="mi">186298</span><span class="p">,</span><span class="mi">164246</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">000001</span><span class="p">,</span><span class="err">$</span><span class="o">#</span><span class="n">attacked</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="err">$</span><span class="n">board_size</span><span class="p">;</span>
</pre></div>


<p>The second column gives the number of times this line is executed - 164,246.
This is actually the number of solutions that are tried,
excluding the deepest depth of the tree (the base recursive case).</p>
<p>The Java profiler will show us that Java explores the exact same number of solutions,
which is confirmation that these tests are comparing the two languages on equal footing.</p>
<p><a name="pvj-javaprof"></a></p>
<h2>Java Profiling</h2>
<p>More details about the profiling tools I used for Java are on the charlesreid1 wiki at 
<a href="https://charlesreid1.com/wiki/Java/Profiling">Java/Profiling</a></p>
<p>I profiled Java with two tools, the <a href="http://jiprof.sourceforge.net/">Java Interactive Profiler (JIP)</a>
and the <a href="https://docs.oracle.com/javase/7/docs/technotes/samples/hprof.html">HPROF tool</a> 
that Oracle provides with Java.</p>
<p>No special compiler flags are needed, so compile as normal:</p>
<div class="highlight"><pre><span></span>$ javac NQueens.java
</pre></div>


<p>If you are profiling with JIP, you want the JIP jar, as described on the wiki: <a href="https://charlesreid1.com/wiki/Java/Profiling">Java/Profiling</a> 
Then run Java with the <code>-javaagent</code> flag:</p>
<div class="highlight"><pre><span></span>$ <span class="nb">export</span> <span class="nv">PATH2JIP</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span><span class="s2">/Downloads/jip&quot;</span>
$ java -javaagent:<span class="si">${</span><span class="nv">PATH2JIP</span><span class="si">}</span>/profile/profile.jar NQueens
</pre></div>


<p>This results in a <code>profile.txt</code> file with detailed profiling information
(an example is shown below).</p>
<p>The HPROF tool likewise requires no special compiler flags. 
It can be run with various options from the command line. 
Here's a basic usage of HPROF that will reduce the amount of output slightly,
making the size of the output file a little smaller:</p>
<div class="highlight"><pre><span></span>$ java -agentlib:hprof<span class="o">=</span><span class="nv">verbose</span><span class="o">=</span>n NQueens
</pre></div>


<p>This dumps out a file called <code>java.hprof.txt</code> that contains a significant amount of information.
The most useful, though, is at the end, so use tail to get a quick overview of the results:</p>
<div class="highlight"><pre><span></span>$ tail -n <span class="m">100</span> java.hprof.txt
</pre></div>


<p><a name="pvj-javaprof"></a></p>
<h2>Java Profiling Results</h2>
<p>The profiling results from JIP for the 11 queens problem are shown below.</p>
<div class="highlight"><pre><span></span><span class="o">+</span><span class="c1">----------------------------------------------------------------------</span>
<span class="o">|</span>  <span class="n">File</span><span class="p">:</span> <span class="n">profile</span><span class="p">.</span><span class="n">txt</span>
<span class="o">|</span>  <span class="nb">Date</span><span class="p">:</span> <span class="mi">2017</span><span class="p">.</span><span class="mi">03</span><span class="p">.</span><span class="mi">19</span> <span class="mi">19</span><span class="p">:</span><span class="mi">34</span><span class="p">:</span><span class="mi">18</span> <span class="n">PM</span>
<span class="o">+</span><span class="c1">----------------------------------------------------------------------</span>

<span class="o">+</span><span class="c1">--------------------------------------+</span>
<span class="o">|</span> <span class="n">Most</span> <span class="n">expensive</span> <span class="n">methods</span> <span class="n">summarized</span>    <span class="o">|</span>
<span class="o">+</span><span class="c1">--------------------------------------+</span>

               <span class="n">Net</span>
          <span class="c1">------------</span>
 <span class="k">Count</span>     <span class="n">Time</span>    <span class="n">Pct</span>  <span class="k">Location</span>
 <span class="o">=====</span>     <span class="o">====</span>    <span class="o">===</span>  <span class="o">========</span>
<span class="mi">166926</span>    <span class="mi">909</span><span class="p">.</span><span class="mi">5</span>   <span class="mi">82</span><span class="p">.</span><span class="mi">2</span>  <span class="n">NQueens</span><span class="p">:</span><span class="n">explore</span>
<span class="mi">164246</span>     <span class="mi">55</span><span class="p">.</span><span class="mi">6</span>    <span class="mi">5</span><span class="p">.</span><span class="mi">0</span>  <span class="n">Board</span><span class="p">:</span><span class="n">getDiagAttacked</span>
<span class="mi">166925</span>     <span class="mi">41</span><span class="p">.</span><span class="mi">4</span>    <span class="mi">3</span><span class="p">.</span><span class="mi">7</span>  <span class="n">Board</span><span class="p">:</span><span class="n">unchoose</span>
<span class="mi">166925</span>     <span class="mi">40</span><span class="p">.</span><span class="mi">7</span>    <span class="mi">3</span><span class="p">.</span><span class="mi">7</span>  <span class="n">Board</span><span class="p">:</span><span class="n">choose</span>
<span class="mi">164246</span>     <span class="mi">31</span><span class="p">.</span><span class="mi">0</span>    <span class="mi">2</span><span class="p">.</span><span class="mi">8</span>  <span class="n">Board</span><span class="p">:</span><span class="n">getOccupied</span>
     <span class="mi">1</span>     <span class="mi">18</span><span class="p">.</span><span class="mi">2</span>    <span class="mi">1</span><span class="p">.</span><span class="mi">6</span>  <span class="n">NQueens</span><span class="p">:</span><span class="n">main</span>
  <span class="mi">2680</span>      <span class="mi">7</span><span class="p">.</span><span class="mi">3</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">7</span>  <span class="n">Board</span><span class="p">:</span><span class="n">toString</span>
  <span class="mi">2680</span>      <span class="mi">2</span><span class="p">.</span><span class="mi">3</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">2</span>  <span class="n">SolutionSaver</span><span class="p">:</span><span class="n">saveSolution</span>
     <span class="mi">1</span>      <span class="mi">0</span><span class="p">.</span><span class="mi">2</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">0</span>  <span class="n">SolutionSaver</span><span class="p">:</span><span class="n">nSolutions</span>
     <span class="mi">1</span>      <span class="mi">0</span><span class="p">.</span><span class="mi">1</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">0</span>  <span class="n">SolutionSaver</span><span class="p">:</span><span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;</span>
     <span class="mi">1</span>      <span class="mi">0</span><span class="p">.</span><span class="mi">0</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">0</span>  <span class="n">Board</span><span class="p">:</span><span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;</span>
</pre></div>


<p>From this output we can see that the method getDiagAttacked, 
which is called each time we check a solution in the recursive case,
is called 164,246 times - exactly the same number of solutions that the Perl profiler showed.
One of the downsides of the JIP profiler is that it only gives high-level 
profiling information about methods and classes - it stops there.</p>
<p>Fortunately, however, the HPROF tool picks up where JIP leaves off.
The HPROF tool makes the program much slower but yields a huge amount of information.
In addition to an enormous heap dump of all objects appearing on Java's heap at any point,
it also shows where the time was spent in the low-level methods.</p>
<div class="highlight"><pre><span></span><span class="nv">SITES</span> <span class="nv">BEGIN</span> <span class="ss">(</span><span class="nv">ordered</span> <span class="nv">by</span> <span class="nv">live</span> <span class="nv">bytes</span><span class="ss">)</span> <span class="nv">Sun</span> <span class="nv">Mar</span> <span class="mi">19</span> <span class="mi">19</span>:<span class="mi">34</span>:<span class="mi">21</span> <span class="mi">2017</span>
          <span class="nv">percent</span>          <span class="nv">live</span>          <span class="nv">alloc</span><span class="s1">&#39;</span><span class="s">ed  stack class</span>
 <span class="nv">rank</span>   <span class="nv">self</span>  <span class="nv">accum</span>     <span class="nv">bytes</span> <span class="nv">objs</span>     <span class="nv">bytes</span>  <span class="nv">objs</span> <span class="nv">trace</span> <span class="nv">name</span>
    <span class="mi">1</span> <span class="mi">86</span>.<span class="mi">01</span><span class="o">%</span> <span class="mi">86</span>.<span class="mi">01</span><span class="o">%</span>  <span class="mi">10510976</span> <span class="mi">164234</span>  <span class="mi">10510976</span> <span class="mi">164234</span> <span class="mi">300462</span> <span class="nv">int</span>[]
    <span class="mi">2</span>  <span class="mi">1</span>.<span class="mi">93</span><span class="o">%</span> <span class="mi">87</span>.<span class="mi">94</span><span class="o">%</span>    <span class="mi">235840</span> <span class="mi">2680</span>    <span class="mi">235840</span>  <span class="mi">2680</span> <span class="mi">300467</span> <span class="nv">char</span>[]
    <span class="mi">3</span>  <span class="mi">1</span>.<span class="mi">09</span><span class="o">%</span> <span class="mi">89</span>.<span class="mi">03</span><span class="o">%</span>    <span class="mi">133320</span> <span class="mi">1515</span>    <span class="mi">133320</span>  <span class="mi">1515</span> <span class="mi">300465</span> <span class="nv">char</span>[]
    <span class="mi">4</span>  <span class="mi">1</span>.<span class="mi">07</span><span class="o">%</span> <span class="mi">90</span>.<span class="mi">11</span><span class="o">%</span>    <span class="mi">131200</span>    <span class="mi">8</span>    <span class="mi">131200</span>     <span class="mi">8</span> <span class="mi">300263</span> <span class="nv">char</span>[]
    <span class="mi">5</span>  <span class="mi">1</span>.<span class="mi">05</span><span class="o">%</span> <span class="mi">91</span>.<span class="mi">16</span><span class="o">%</span>    <span class="mi">128640</span> <span class="mi">2680</span>    <span class="mi">128640</span>  <span class="mi">2680</span> <span class="mi">300464</span> <span class="nv">char</span>[]
    <span class="mi">6</span>  <span class="mi">1</span>.<span class="mi">04</span><span class="o">%</span> <span class="mi">92</span>.<span class="mi">20</span><span class="o">%</span>    <span class="mi">127560</span> <span class="mi">1313</span>    <span class="mi">127560</span>  <span class="mi">1313</span> <span class="mi">300010</span> <span class="nv">char</span>[]
    <span class="mi">7</span>  <span class="mi">0</span>.<span class="mi">76</span><span class="o">%</span> <span class="mi">92</span>.<span class="mi">96</span><span class="o">%</span>     <span class="mi">92728</span> <span class="mi">1009</span>     <span class="mi">92728</span>  <span class="mi">1009</span> <span class="mi">300000</span> <span class="nv">char</span>[]
    <span class="mi">8</span>  <span class="mi">0</span>.<span class="mi">54</span><span class="o">%</span> <span class="mi">93</span>.<span class="mi">50</span><span class="o">%</span>     <span class="mi">65664</span>    <span class="mi">8</span>     <span class="mi">65664</span>     <span class="mi">8</span> <span class="mi">300260</span> <span class="nv">byte</span>[]
    <span class="mi">9</span>  <span class="mi">0</span>.<span class="mi">53</span><span class="o">%</span> <span class="mi">94</span>.<span class="mi">02</span><span class="o">%</span>     <span class="mi">64320</span> <span class="mi">2680</span>     <span class="mi">64320</span>  <span class="mi">2680</span> <span class="mi">300468</span> <span class="nv">java</span>.<span class="nv">util</span>.<span class="nv">LinkedList</span>$<span class="nv">Node</span>
   <span class="mi">10</span>  <span class="mi">0</span>.<span class="mi">53</span><span class="o">%</span> <span class="mi">94</span>.<span class="mi">55</span><span class="o">%</span>     <span class="mi">64320</span> <span class="mi">2680</span>     <span class="mi">64320</span>  <span class="mi">2680</span> <span class="mi">300466</span> <span class="nv">java</span>.<span class="nv">lang</span>.<span class="nv">String</span>
<span class="nv">SITES</span> <span class="k">END</span>
</pre></div>


<p>HPROF tells us that over 86% of the time spent on this program was spent accessing integer arrays.
Again, confirmation that we are getting a fair measurement of Java's performance with a core data type, the integer array.</p>
<p><a name="pvj-h2hntested"></a></p>
<h2>Head to Head: Walltime vs. Number of Solutions Tested</h2>
<p>Using the results of the profilers from each N queens problem, <code>N = 8 .. 15</code>, 
I extracted the total number of solutions tried, and confirmed that these numbers were the same 
between Java and Perl for each of the problem sizes.</p>
<p>Here is a table of the number of solutions found, and number of solutions tried, versus problem size:</p>
<div class="highlight"><pre><span></span><span class="c1">-------------------------------------------------------------</span>
<span class="o">|</span><span class="w"> </span><span class="n">NQueens</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Nsolutions</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Ntested</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">Java</span><span class="w"> </span><span class="o">[</span><span class="n">s</span><span class="o">]</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">Perl</span><span class="w"> </span><span class="o">[</span><span class="n">s</span><span class="o">]</span><span class="w"> </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="c1">---------|------------|-------------|-----------|----------|</span>
<span class="o">|</span><span class="w"> </span><span class="mi">8</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="mi">92</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="mi">1965</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="mf">0.003</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">0.016</span><span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">9</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="mi">352</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="mi">8042</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="mf">0.006</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">0.067</span><span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">10</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">724</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="mi">34815</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="mf">0.017</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">0.259</span><span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">11</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">2680</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="mi">164246</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mf">0.061</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">1.542</span><span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">12</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">14200</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">841989</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mf">0.240</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">8.431</span><span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">13</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">73712</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">4601178</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">1.113</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">48.542</span><span class="w">   </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">14</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">365596</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">26992957</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mf">6.557</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mf">303.278</span><span class="w">  </span><span class="o">|</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">15</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">2279184</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">168849888</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mf">42.619</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mf">2057.052</span><span class="w"> </span><span class="o">|</span><span class="w"></span>
<span class="c1">-------------------------------------------------------------</span>
</pre></div>


<p>When the wall time for Java and Perl are plotted against the number of solutions tested,
an interesting trend emerges: the two scale the same way, with a fixed vertical offset.</p>
<p><img alt="Graph of walltime versus number of solutions tested" src="/images/perl-vs-java-ntested.png"></p>
<p>While this is proving what we already knew, 
that a compiled language beats a scripted language every time,
it also provides proof Perl can scale as well as Java - 
it just takes significantly more overhead and time per statement.</p>
<p><a name="pvj-applesoranges"></a></p>
<h2>Why Java Beat Perl</h2>
<p>Compiled languages are turned into bytecode and pre-optimized for the processor.</p>
<p>Perl is a scripted and interpreted language, like Python, evaluated piece by piece.</p>
<p>So, we didn't learn anything surprising. But we did find an interesting result - 
Perl can scale as well as Java in its implementation of the N queens recursive backtracking algorithm.</p>
<p><a name="pvj-sources"></a></p>
<h2>Sources</h2>
<ol>
<li>
<p>"Execution in the Kingdom of Nouns". Steve Yegge. March 2006. Accessed 18 March 2017.
&lt;<a href="https://web.archive.org/web/20170320081755/https://steve-yegge.blogspot.com/2006/03/execution-in-kingdom-of-nouns.html">https://web.archive.org/web/20170320081755/https://steve-yegge.blogspot.com/2006/03/execution-in-kingdom-of-nouns.html</a>&gt;</p>
</li>
<li>
<p>"N-Queens Problem". Rosetta Code, GNU Free Documentation License. Edited 6 March 2017. Accessed 21 March 2017.
&lt;<a href="https://web.archive.org/web/20170320081421/http://rosettacode.org/wiki/N-queens_problem">https://web.archive.org/web/20170320081421/http://rosettacode.org/wiki/N-queens_problem</a>&gt;</p>
</li>
<li>
<p>"nqueens.pl". Charles Reid. Github Gist, Github Inc. Edited 20 March 2017. Accessed 20 March 2017.
&lt;<a href="https://gist.github.com/charlesreid1/4ce97a5f896ff1c89855a5d038d51535">https://gist.github.com/charlesreid1/4ce97a5f896ff1c89855a5d038d51535</a>&gt;</p>
</li>
<li>
<p>"NQueens.java". Charles Reid. Github Gist, Github Inc. Edited 20 March 2017. Accessed 20 March 2017.
&lt;<a href="https://gist.github.com/charlesreid1/7b8d7b9dffb7b3090039849d72c5fff5">https://gist.github.com/charlesreid1/7b8d7b9dffb7b3090039849d72c5fff5</a>&gt;</p>
</li>
<li>
<p>"Devel::NYTProf". Adam Kaplan, Tim Bunce. Copyright 2008-2016, Tim Bunce. Published 4 March 2008. Accessed 20 March 2017.
&lt;<a href="https://web.archive.org/web/20170320081508/http://search.cpan.org/~timb/Devel-NYTProf-6.04/lib/Devel/NYTProf.pm">https://web.archive.org/web/20170320081508/http://search.cpan.org/~timb/Devel-NYTProf-6.04/lib/Devel/NYTProf.pm</a>&gt;</p>
</li>
<li>
<p>"Perl/Profiling". Charles Reid. Edited 20 March 2017. Accessed 20 March 2017.
&lt;<a href="https://web.archive.org/web/20170320081532/https://charlesreid1.com/wiki/Perl/Profiling">https://web.archive.org/web/20170320081532/https://charlesreid1.com/wiki/Perl/Profiling</a>&gt;</p>
</li>
<li>
<p>"Java/Profiling". Charles Reid. Edited 20 March 2017. Accessed 20 March 2017.
&lt;<a href="https://web.archive.org/web/20170320081535/https://charlesreid1.com/wiki/Java/Profiling">https://web.archive.org/web/20170320081535/https://charlesreid1.com/wiki/Java/Profiling</a>&gt;</p>
</li>
<li>
<p>"JIP - The Java Interactive Profiler." Andrew Wilcox. Published 30 April 2010. Accessed 20 March 2017.
&lt;<a href="https://web.archive.org/web/20170320081538/http://jiprof.sourceforge.net/">https://web.archive.org/web/20170320081538/http://jiprof.sourceforge.net/</a>&gt;</p>
</li>
<li>
<p>"HPROF". Oracle Corporation. Copyright 1993, 2016. Published 2016. Accessed 20 March 2017.
&lt;<a href="https://web.archive.org/web/20170320081540/https://docs.oracle.com/javase/7/docs/technotes/samples/hprof.html">https://web.archive.org/web/20170320081540/https://docs.oracle.com/javase/7/docs/technotes/samples/hprof.html</a>&gt;</p>
</li>
</ol>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script></div>

    </div>
</div>

<div class="v20"></div>

<div class="row">
    <div class="col-md-12" style="text-align: left;">

        <div class="tags">
            <p>Tags:&nbsp;&nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/java.html">java</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/perl.html">perl</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/algorithms.html">algorithms</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/recursion.html">recursion</a>
                    &nbsp;&nbsp;
                    <a href="https://charlesreid1.github.io/tag/n-queens.html">n-queens</a>
                    &nbsp;&nbsp;
        </div>

    </div>
</div>


<div class="v200"></div>
  	            	</article>

<div class="row">
    <div class="col-md-4 col-centered" style="text-align: center;">

        <div class="pagination">

            <a class="next" href="https://charlesreid1.github.io/index19.html">&larr; Newer</a>

            &nbsp;
            &nbsp;
            &nbsp;
            &nbsp;
            &nbsp;

            <a class="prev" href="https://charlesreid1.github.io/index21.html">Older &rarr;</a>
        
          <br />
        </div>

    </div>
</div>

<div class="v50"></div>


        </div>

        <div class="col-md-4" style="text-align: center;">
<a name="a_archive"></a>


        <div class="well">

            <h2>September 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/mocking-aws-in-unit-tests.html">Mocking AWS in Unit Tests</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>May 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/deconvoluting-convolutional-neural-networks.html">Deconvoluting Convolutional Neural Networks</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/graphs-for-bioinformatics-part-1-de-bruijn-graphs-hamiltonian-paths-and-eulerian-paths.html">Graphs for Bioinformatics, Part 1: de Bruijn Graphs, Hamiltonian Paths, and Eulerian Paths</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>April 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/the-git-commit-ectomy.html">The Git-Commit-Ectomy</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>March 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/the-josephus-problem-part-3-solving-the-double-step-case.html">The Josephus Problem: Part 3: Solving the Double Step Case</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/the-josephus-problem-part-2-two-examples.html">The Josephus Problem: Part 2: Two Examples</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/the-josephus-problem-part-1-the-problem.html">The Josephus Problem: Part 1: The Problem</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/approximating-pi-happy-pi-day.html">Approximating Pi (Happy Pi Day)</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/five-letter-words-part-5-the-try-trie-tree.html">Five Letter Words: Part 5: The Try Trie Tree</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/five-letter-words-part-4-revisiting-diff-by-one.html">Five Letter Words: Part 4: Revisiting Diff by One</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/centillion-a-document-search-engine.html">centillion: a document search engine</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>February 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/any-color-you-like-as-long-as-its-00add8.html">Any Color You Like, As Long As It's 00ADD8</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/a-few-of-my-favorite-peps.html">A Few of My Favorite PEPs</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/context-managers-in-python.html">Context Managers in Python</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>January 2019</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/building-snakemake-command-line-wrappers-for-kubernetes-workflows.html">Building Snakemake Command Line Wrappers for Kubernetes Workflows</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/building-snakemake-command-line-wrappers-for-workflows.html">Building Snakemake Command Line Wrappers for Workflows</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/recursive-backtracking-in-go-for-bioinformatics-applications-3-go-implementation-of-backtracking.html">Recursive Backtracking in Go for Bioinformatics Applications: 3. Go Implementation of Backtracking</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>December 2018</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/recursive-backtracking-in-go-for-bioinformatics-applications-2-generating-variations.html">Recursive Backtracking in Go for Bioinformatics Applications: 2. Generating Variations</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/recursive-backtracking-in-go-for-bioinformatics-applications-1-counting-variations.html">Recursive Backtracking in Go for Bioinformatics Applications: 1. Counting Variations</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/basic-data-structures-in-go-maps.html">Basic Data Structures in Go: Maps</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/learning-bioinformatics-with-go-and-rosalind.html">Learning Bioinformatics with Go and Rosalind</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>October 2018</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/first-post-of-the-fall-part-2-flaskadillo.html">First Post of the Fall, Part 2: Flaskadillo</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/first-post-of-the-fall-part-1-data-commons.html">First Post of the Fall, Part 1: Data Commons</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>May 2018</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/current-projects.html">Current Projects</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>March 2018</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/charlesreid1com-stack.html">Charlesreid1.com Stack</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>February 2018</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/d3-calendar-visualizations.html">D3 Calendar Visualizations</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/project-euler-problem-172.html">Project Euler Problem 172</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>January 2018</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/4x4-rubiks-cube-part-4-sequence-order.html">4x4 Rubik's Cube: Part 4: Sequence Order</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/4x4-rubiks-cube-part-3-factoring-permutations.html">4x4 Rubik's Cube: Part 3: Factoring Permutations</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/4x4-rubiks-cube-part-2-permutations.html">4x4 Rubik's Cube: Part 2: Permutations</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/4x4-rubiks-cube-part-1-representations.html">4x4 Rubik's Cube: Part 1: Representations</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/lets-generate-permutations.html">Let's Generate Permutations!</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>September 2017</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/five-letter-words-part-3-letter-coverage-and-dynamic-programming.html">Five Letter Words: Part 3: Letter Coverage and Dynamic Programming</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/five-letter-words-part-2-more-five-word-algorithms.html">Five Letter Words: Part 2: More Five-Word Algorithms</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/five-letter-words-part-1-getting-familiar-with-the-list.html">Five Letter Words: Part 1: Getting Familiar With The List</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>August 2017</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/eulers-theorem-the-totient-function-and-calculating-totients-by-hand.html">Euler's Theorem, the Totient Function, and Calculating Totients By Hand</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>July 2017</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/mad-combinatoric-castles.html">Mad Combinatoric Castles</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/project-euler-problem-1.html">Project Euler Problem 1</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/shortest-lattice-paths-and-multiset-permutations.html">Shortest Lattice Paths and Multiset Permutations</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/computing-square-roots-part-2-using-continued-fractions.html">Computing Square Roots: Part 2: Using Continued Fractions</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/computing-square-roots-part-1-using-newtons-method.html">Computing Square Roots: Part 1: Using Newton's Method</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>June 2017</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/cse-143-final-project-hilbert-sort-3-the-code.html">CSE 143 Final Project: Hilbert Sort: 3. The Code</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/cse-143-final-project-hilbert-sort-2-the-solution-algorithm.html">CSE 143 Final Project: Hilbert Sort: 2. The Solution Algorithm</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/cse-143-final-project-hilbert-sort-1-the-problem.html">CSE 143 Final Project: Hilbert Sort: 1. The Problem</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/cse-143-final-project-classy.html">CSE 143 Final Project: Classy</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/cse-143-final-project-checkers.html">CSE 143 Final Project: Checkers</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>May 2017</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/teaching-recursion-with-the-n-queens-problem.html">Teaching Recursion with the N Queens Problem</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/undergraduate-research-project-wireless-sensor-networks-for-internet-of-things-applications-part-2-the-technologies.html">Undergraduate Research Project: Wireless Sensor Networks for Internet of Things Applications (Part 2: The Technologies)</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/undergraduate-research-project-wireless-sensor-networks-for-internet-of-things-applications-part-1-the-project.html">Undergraduate Research Project: Wireless Sensor Networks for Internet of Things Applications (Part 1: The Project)</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>April 2017</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/stunnel.html">Stunnel</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/traveling-schoolteacher-problem.html">Traveling Schoolteacher Problem</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/the-z-machine-a-simple-turing-machine.html">The Z-Machine: A Simple Turing Machine</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/awsome-day-seattle-notes-part-2-networking-security-and-miscellany.html">AWSome Day Seattle Notes: Part 2: Networking, Security, and Miscellany</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/awsome-day-seattle-notes-part-1-the-basics.html">AWSome Day Seattle Notes: Part 1: The Basics</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/setting-up-a-self-hosted-github-clone-with-gitea.html">Setting Up a Self-Hosted Github Clone with Gitea</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/better-timing-of-guava-traveling-salesperson-problem-code-timing-scripts.html">Better Timing of Guava Traveling Salesperson Problem Code: Timing Scripts</a>
            </p>

        </div>

        <div class="v20"></div>


        <div class="well">

            <h2>March 2017</h2>

            <p class="archive">
            <a href="https://charlesreid1.github.io/fixing-bottlenecks-in-the-guava-traveling-salesperson-problem-code.html">Fixing Bottlenecks in the Guava Traveling Salesperson Problem Code</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/python-vs-perl-n-queens-problem.html">Python vs. Perl: N Queens Problem</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/solving-the-traveling-salesperson-problem-with-java-and-guava.html">Solving the Traveling Salesperson Problem with Java and Guava</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/perl-vs-java-n-queens-problem.html">Perl vs. Java: N Queens Problem</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/enigma-cipher-implementation-part-4-combinatorics.html">Enigma Cipher Implementation: Part 4: Combinatorics</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/enigma-cipher-implementation-part-3-enigma-in-java-without-objects.html">Enigma Cipher Implementation: Part 3: Enigma in Java Without Objects</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/enigma-cipher-implementation-part-2-pseudocode.html">Enigma Cipher Implementation: Part 2: Pseudocode</a>
            </p>
            <p class="archive">
            <a href="https://charlesreid1.github.io/enigma-cipher-implementation-part-1-how-it-works.html">Enigma Cipher Implementation: Part 1: How It Works</a>
            </p>

        </div>

        <div class="v20"></div>



<div class="v100"></div>
        </div>

    </div>



</div>



<script type="text/javascript" src="https://charlesreid1.github.io/theme/js/jquery-1.11.2.js"></script>
<script type="text/javascript" src="https://charlesreid1.github.io/theme/js/bootstrap-3.3.4.js"></script>
<script type="text/javascript" src="https://charlesreid1.github.io/theme/js/d3-3.5.5.js"></script><script type="text/javascript" src="https://charlesreid1.github.io/theme/js/jquery-1.11.2.js"></script>
<script type="text/javascript" src="https://charlesreid1.github.io/theme/js/bootstrap-3.3.4.js"></script>

<footer id="contentinfo" class="body">
<p>&nbsp;</p>
<p>&nbsp;</p>
<center>
	<hr />
</center>
<p>&nbsp;</p>
<p style="text-align: center">
    <span class="fa-stack fa-lg">
        <i class="fa fa-square fa-stack-2x" style="color:#000;"></i>
        <i class="fa fa-terminal fa-stack-1x fa-inverse"></i>
    </span>
    Made from the command line with vim by 
    <a href="http://charlesreid1.com">charlesreid1</a><br />
    with help from <a href="https://getbootstrap.com/">Bootstrap</a> and <a href="http://getpelican.com">Pelican</a>.
</p>

<br />

<p style="text-align: center">
    <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">
    <span class="fa-stack fa-lg">
        <i class="fa fa-square fa-stack-2x" style="color:#000;"></i>
        <i class="fa fa-creative-commons fa-stack-1x fa-inverse"></i>
    </span>
    </a>
    <br />
    Licensed under the <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 License</a>.
</p>

<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=11611748;
var sc_invisible=1;
var sc_security="9fcba820";
</script>
<script type="text/javascript"
src="https://www.statcounter.com/counter/counter.js"
async></script>

<noscript><div class="statcounter"><a title="Web Analytics"
href="http://statcounter.com/" target="_blank"><img
class="statcounter"
src="//c.statcounter.com/11611748/0/9fcba820/1/" alt="Web
Analytics"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->
</footer><!-- /#contentinfo -->
</body>
</html>